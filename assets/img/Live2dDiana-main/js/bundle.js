(function(){"use strict";var t={"../../../Framework/src/cubismdefaultparameterid.ts":
/*!**********************************************************!*\
  !*** ../../../Framework/src/cubismdefaultparameterid.ts ***!
  \**********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismDefaultParameterId=void 0;e.CubismDefaultParameterId=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"});var o=n(r(/*! ./cubismdefaultparameterid */"../../../Framework/src/cubismdefaultparameterid.ts"));var s;(function(t){t.HitAreaBody=o.CubismDefaultParameterId.HitAreaBody;t.HitAreaHead=o.CubismDefaultParameterId.HitAreaHead;t.HitAreaPrefix=o.CubismDefaultParameterId.HitAreaPrefix;t.ParamAngleX=o.CubismDefaultParameterId.ParamAngleX;t.ParamAngleY=o.CubismDefaultParameterId.ParamAngleY;t.ParamAngleZ=o.CubismDefaultParameterId.ParamAngleZ;t.ParamArmLA=o.CubismDefaultParameterId.ParamArmLA;t.ParamArmLB=o.CubismDefaultParameterId.ParamArmLB;t.ParamArmRA=o.CubismDefaultParameterId.ParamArmRA;t.ParamArmRB=o.CubismDefaultParameterId.ParamArmRB;t.ParamBaseX=o.CubismDefaultParameterId.ParamBaseX;t.ParamBaseY=o.CubismDefaultParameterId.ParamBaseY;t.ParamBodyAngleX=o.CubismDefaultParameterId.ParamBodyAngleX;t.ParamBodyAngleY=o.CubismDefaultParameterId.ParamBodyAngleY;t.ParamBodyAngleZ=o.CubismDefaultParameterId.ParamBodyAngleZ;t.ParamBreath=o.CubismDefaultParameterId.ParamBreath;t.ParamBrowLAngle=o.CubismDefaultParameterId.ParamBrowLAngle;t.ParamBrowLForm=o.CubismDefaultParameterId.ParamBrowLForm;t.ParamBrowLX=o.CubismDefaultParameterId.ParamBrowLX;t.ParamBrowLY=o.CubismDefaultParameterId.ParamBrowLY;t.ParamBrowRAngle=o.CubismDefaultParameterId.ParamBrowRAngle;t.ParamBrowRForm=o.CubismDefaultParameterId.ParamBrowRForm;t.ParamBrowRX=o.CubismDefaultParameterId.ParamBrowRX;t.ParamBrowRY=o.CubismDefaultParameterId.ParamBrowRY;t.ParamBustX=o.CubismDefaultParameterId.ParamBustX;t.ParamBustY=o.CubismDefaultParameterId.ParamBustY;t.ParamCheek=o.CubismDefaultParameterId.ParamCheek;t.ParamEyeBallForm=o.CubismDefaultParameterId.ParamEyeBallForm;t.ParamEyeBallX=o.CubismDefaultParameterId.ParamEyeBallX;t.ParamEyeBallY=o.CubismDefaultParameterId.ParamEyeBallY;t.ParamEyeLOpen=o.CubismDefaultParameterId.ParamEyeLOpen;t.ParamEyeLSmile=o.CubismDefaultParameterId.ParamEyeLSmile;t.ParamEyeROpen=o.CubismDefaultParameterId.ParamEyeROpen;t.ParamEyeRSmile=o.CubismDefaultParameterId.ParamEyeRSmile;t.ParamHairBack=o.CubismDefaultParameterId.ParamHairBack;t.ParamHairFluffy=o.CubismDefaultParameterId.ParamHairFluffy;t.ParamHairFront=o.CubismDefaultParameterId.ParamHairFront;t.ParamHairSide=o.CubismDefaultParameterId.ParamHairSide;t.ParamHandL=o.CubismDefaultParameterId.ParamHandL;t.ParamHandR=o.CubismDefaultParameterId.ParamHandR;t.ParamMouthForm=o.CubismDefaultParameterId.ParamMouthForm;t.ParamMouthOpenY=o.CubismDefaultParameterId.ParamMouthOpenY;t.ParamNONE=o.CubismDefaultParameterId.ParamNONE;t.ParamShoulderY=o.CubismDefaultParameterId.ParamShoulderY;t.PartsArmLPrefix=o.CubismDefaultParameterId.PartsArmLPrefix;t.PartsArmPrefix=o.CubismDefaultParameterId.PartsArmPrefix;t.PartsArmRPrefix=o.CubismDefaultParameterId.PartsArmRPrefix;t.PartsIdCore=o.CubismDefaultParameterId.PartsIdCore})(s=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/cubismframeworkconfig.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/cubismframeworkconfig.ts ***!
  \*******************************************************/function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.CSM_LOG_LEVEL=e.CSM_LOG_LEVEL_OFF=e.CSM_LOG_LEVEL_ERROR=e.CSM_LOG_LEVEL_WARNING=e.CSM_LOG_LEVEL_INFO=e.CSM_LOG_LEVEL_DEBUG=e.CSM_LOG_LEVEL_VERBOSE=void 0;e.CSM_LOG_LEVEL_VERBOSE=0;e.CSM_LOG_LEVEL_DEBUG=1;e.CSM_LOG_LEVEL_INFO=2;e.CSM_LOG_LEVEL_WARNING=3;e.CSM_LOG_LEVEL_ERROR=4;e.CSM_LOG_LEVEL_OFF=5;e.CSM_LOG_LEVEL=e.CSM_LOG_LEVEL_VERBOSE},"../../../Framework/src/cubismmodelsettingjson.ts":
/*!********************************************************!*\
  !*** ../../../Framework/src/cubismmodelsettingjson.ts ***!
  \********************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismModelSettingJson=void 0;var s=r(/*! ./icubismmodelsetting */"../../../Framework/src/icubismmodelsetting.ts");var u=r(/*! ./live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var l=r(/*! ./type/csmvector */"../../../Framework/src/type/csmvector.ts");var c=r(/*! ./utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var h="Version";var f="FileReferences";var d="Groups";var m="Layout";var p="HitAreas";var g="Moc";var _="Textures";var v="Physics";var y="Pose";var b="Expressions";var C="Motions";var S="UserData";var P="Name";var M="File";var w="Id";var x="Ids";var B="Target";var L="Idle";var F="TapBody";var I="PinchIn";var V="PinchOut";var D="Shake";var k="FlickHead";var E="Parameter";var T="Sound";var O="FadeInTime";var R="FadeOutTime";var A="CenterX";var j="CenterY";var N="X";var U="Y";var z="Width";var X="Height";var G="LipSync";var Y="EyeBlink";var H="init_param";var q="init_parts_visible";var W="val";var J;(function(t){t[t["FrequestNode_Groups"]=0]="FrequestNode_Groups";t[t["FrequestNode_Moc"]=1]="FrequestNode_Moc";t[t["FrequestNode_Motions"]=2]="FrequestNode_Motions";t[t["FrequestNode_Expressions"]=3]="FrequestNode_Expressions";t[t["FrequestNode_Textures"]=4]="FrequestNode_Textures";t[t["FrequestNode_Physics"]=5]="FrequestNode_Physics";t[t["FrequestNode_Pose"]=6]="FrequestNode_Pose";t[t["FrequestNode_HitAreas"]=7]="FrequestNode_HitAreas"})(J||(J={}));var Q=function(t){i(e,t);function e(e,r){var i=t.call(this)||this;i._json=c.CubismJson.create(e,r);if(i._json){i._jsonValue=new l.csmVector;i._jsonValue.pushBack(i._json.getRoot().getValueByString(d));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(g));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(C));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(b));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(_));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(v));i._jsonValue.pushBack(i._json.getRoot().getValueByString(f).getValueByString(y));i._jsonValue.pushBack(i._json.getRoot().getValueByString(p))}return i}e.prototype.release=function(){c.CubismJson.delete(this._json);this._jsonValue=null};e.prototype.GetJson=function(){return this._json};e.prototype.getModelFileName=function(){if(!this.isExistModelFile()){return""}return this._jsonValue.at(J.FrequestNode_Moc).getRawString()};e.prototype.getTextureCount=function(){if(!this.isExistTextureFiles()){return 0}return this._jsonValue.at(J.FrequestNode_Textures).getSize()};e.prototype.getTextureDirectory=function(){return this._jsonValue.at(J.FrequestNode_Textures).getRawString()};e.prototype.getTextureFileName=function(t){return this._jsonValue.at(J.FrequestNode_Textures).getValueByIndex(t).getRawString()};e.prototype.getHitAreasCount=function(){if(!this.isExistHitAreas()){return 0}return this._jsonValue.at(J.FrequestNode_HitAreas).getSize()};e.prototype.getHitAreaId=function(t){return u.CubismFramework.getIdManager().getId(this._jsonValue.at(J.FrequestNode_HitAreas).getValueByIndex(t).getValueByString(w).getRawString())};e.prototype.getHitAreaName=function(t){return this._jsonValue.at(J.FrequestNode_HitAreas).getValueByIndex(t).getValueByString(P).getRawString()};e.prototype.getPhysicsFileName=function(){if(!this.isExistPhysicsFile()){return""}return this._jsonValue.at(J.FrequestNode_Physics).getRawString()};e.prototype.getPoseFileName=function(){if(!this.isExistPoseFile()){return""}return this._jsonValue.at(J.FrequestNode_Pose).getRawString()};e.prototype.getExpressionCount=function(){if(!this.isExistExpressionFile()){return 0}return this._jsonValue.at(J.FrequestNode_Expressions).getSize()};e.prototype.getExpressionName=function(t){return this._jsonValue.at(J.FrequestNode_Expressions).getValueByIndex(t).getValueByString(P).getRawString()};e.prototype.getExpressionFileName=function(t){return this._jsonValue.at(J.FrequestNode_Expressions).getValueByIndex(t).getValueByString(M).getRawString()};e.prototype.getMotionGroupCount=function(){if(!this.isExistMotionGroups()){return 0}return this._jsonValue.at(J.FrequestNode_Motions).getKeys().getSize()};e.prototype.getMotionGroupName=function(t){if(!this.isExistMotionGroups()){return null}return this._jsonValue.at(J.FrequestNode_Motions).getKeys().at(t)};e.prototype.getMotionCount=function(t){if(!this.isExistMotionGroupName(t)){return 0}return this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getSize()};e.prototype.getMotionFileName=function(t,e){if(!this.isExistMotionGroupName(t)){return""}return this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(M).getRawString()};e.prototype.getMotionSoundFileName=function(t,e){if(!this.isExistMotionSoundFile(t,e)){return""}return this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(T).getRawString()};e.prototype.getMotionFadeInTimeValue=function(t,e){if(!this.isExistMotionFadeIn(t,e)){return-1}return this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(O).toFloat()};e.prototype.getMotionFadeOutTimeValue=function(t,e){if(!this.isExistMotionFadeOut(t,e)){return-1}return this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(R).toFloat()};e.prototype.getUserDataFile=function(){if(!this.isExistUserDataFile()){return""}return this._json.getRoot().getValueByString(f).getValueByString(S).getRawString()};e.prototype.getLayoutMap=function(t){var e=this._json.getRoot().getValueByString(m).getMap();if(e==null){return false}var r=false;for(var i=e.begin();i.notEqual(e.end());i.preIncrement()){t.setValue(i.ptr().first,i.ptr().second.toFloat());r=true}return r};e.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters()){return 0}var t=0;for(var e=0;e<this._jsonValue.at(J.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(e);if(r.isNull()||r.isError()){continue}if(r.getValueByString(P).getRawString()==Y){t=r.getValueByString(x).getVector().getSize();break}}return t};e.prototype.getEyeBlinkParameterId=function(t){if(!this.isExistEyeBlinkParameters()){return null}for(var e=0;e<this._jsonValue.at(J.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(e);if(r.isNull()||r.isError()){continue}if(r.getValueByString(P).getRawString()==Y){return u.CubismFramework.getIdManager().getId(r.getValueByString(x).getValueByIndex(t).getRawString())}}return null};e.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters()){return 0}var t=0;for(var e=0;e<this._jsonValue.at(J.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(e);if(r.isNull()||r.isError()){continue}if(r.getValueByString(P).getRawString()==G){t=r.getValueByString(x).getVector().getSize();break}}return t};e.prototype.getLipSyncParameterId=function(t){if(!this.isExistLipSyncParameters()){return null}for(var e=0;e<this._jsonValue.at(J.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(e);if(r.isNull()||r.isError()){continue}if(r.getValueByString(P).getRawString()==G){return u.CubismFramework.getIdManager().getId(r.getValueByString(x).getValueByIndex(t).getRawString())}}return null};e.prototype.isExistModelFile=function(){var t=this._jsonValue.at(J.FrequestNode_Moc);return!t.isNull()&&!t.isError()};e.prototype.isExistTextureFiles=function(){var t=this._jsonValue.at(J.FrequestNode_Textures);return!t.isNull()&&!t.isError()};e.prototype.isExistHitAreas=function(){var t=this._jsonValue.at(J.FrequestNode_HitAreas);return!t.isNull()&&!t.isError()};e.prototype.isExistPhysicsFile=function(){var t=this._jsonValue.at(J.FrequestNode_Physics);return!t.isNull()&&!t.isError()};e.prototype.isExistPoseFile=function(){var t=this._jsonValue.at(J.FrequestNode_Pose);return!t.isNull()&&!t.isError()};e.prototype.isExistExpressionFile=function(){var t=this._jsonValue.at(J.FrequestNode_Expressions);return!t.isNull()&&!t.isError()};e.prototype.isExistMotionGroups=function(){var t=this._jsonValue.at(J.FrequestNode_Motions);return!t.isNull()&&!t.isError()};e.prototype.isExistMotionGroupName=function(t){var e=this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t);return!e.isNull()&&!e.isError()};e.prototype.isExistMotionSoundFile=function(t,e){var r=this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(T);return!r.isNull()&&!r.isError()};e.prototype.isExistMotionFadeIn=function(t,e){var r=this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(O);return!r.isNull()&&!r.isError()};e.prototype.isExistMotionFadeOut=function(t,e){var r=this._jsonValue.at(J.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(R);return!r.isNull()&&!r.isError()};e.prototype.isExistUserDataFile=function(){var t=this._json.getRoot().getValueByString(f).getValueByString(S);return!t.isNull()&&!t.isError()};e.prototype.isExistEyeBlinkParameters=function(){if(this._jsonValue.at(J.FrequestNode_Groups).isNull()||this._jsonValue.at(J.FrequestNode_Groups).isError()){return false}for(var t=0;t<this._jsonValue.at(J.FrequestNode_Groups).getSize();++t){if(this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(t).getValueByString(P).getRawString()==Y){return true}}return false};e.prototype.isExistLipSyncParameters=function(){if(this._jsonValue.at(J.FrequestNode_Groups).isNull()||this._jsonValue.at(J.FrequestNode_Groups).isError()){return false}for(var t=0;t<this._jsonValue.at(J.FrequestNode_Groups).getSize();++t){if(this._jsonValue.at(J.FrequestNode_Groups).getValueByIndex(t).getValueByString(P).getRawString()==G){return true}}return false};return e}(s.ICubismModelSetting);e.CubismModelSettingJson=Q;var Z=o(r(/*! ./cubismmodelsettingjson */"../../../Framework/src/cubismmodelsettingjson.ts"));var K;(function(t){t.CubismModelSettingJson=Z.CubismModelSettingJson})(K=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/effect/cubismbreath.ts":
/*!*****************************************************!*\
  !*** ../../../Framework/src/effect/cubismbreath.ts ***!
  \*****************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.BreathParameterData=e.CubismBreath=void 0;var o=function(){function t(){this._currentTime=0}t.create=function(){return new t};t.delete=function(t){if(t!=null){t=null}};t.prototype.setParameters=function(t){this._breathParameters=t};t.prototype.getParameters=function(){return this._breathParameters};t.prototype.updateParameters=function(t,e){this._currentTime+=e;var r=this._currentTime*2*3.14159;for(var i=0;i<this._breathParameters.getSize();++i){var a=this._breathParameters.at(i);t.addParameterValueById(a.parameterId,a.offset+a.peak*Math.sin(r/a.cycle),a.weight)}};return t}();e.CubismBreath=o;var s=function(){function t(t,e,r,i,a){this.parameterId=t==undefined?null:t;this.offset=e==undefined?0:e;this.peak=r==undefined?0:r;this.cycle=i==undefined?0:i;this.weight=a==undefined?0:a}return t}();e.BreathParameterData=s;var u=n(r(/*! ./cubismbreath */"../../../Framework/src/effect/cubismbreath.ts"));var l;(function(t){t.BreathParameterData=u.BreathParameterData;t.CubismBreath=u.CubismBreath})(l=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/effect/cubismeyeblink.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/effect/cubismeyeblink.ts ***!
  \*******************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.EyeState=e.CubismEyeBlink=void 0;var o=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var s=function(){function t(t){this._blinkingState=u.EyeState_First;this._nextBlinkingTime=0;this._stateStartTimeSeconds=0;this._blinkingIntervalSeconds=4;this._closingSeconds=.1;this._closedSeconds=.05;this._openingSeconds=.15;this._userTimeSeconds=0;this._parameterIds=new o.csmVector;if(t==null){return}for(var e=0;e<t.getEyeBlinkParameterCount();++e){this._parameterIds.pushBack(t.getEyeBlinkParameterId(e))}}t.create=function(e){if(e===void 0){e=null}return new t(e)};t.delete=function(t){if(t!=null){t=null}};t.prototype.setBlinkingInterval=function(t){this._blinkingIntervalSeconds=t};t.prototype.setBlinkingSetting=function(t,e,r){this._closingSeconds=t;this._closedSeconds=e;this._openingSeconds=r};t.prototype.setParameterIds=function(t){this._parameterIds=t};t.prototype.getParameterIds=function(){return this._parameterIds};t.prototype.updateParameters=function(e,r){this._userTimeSeconds+=r;var i;var a=0;switch(this._blinkingState){case u.EyeState_Closing:a=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds;if(a>=1){a=1;this._blinkingState=u.EyeState_Closed;this._stateStartTimeSeconds=this._userTimeSeconds}i=1-a;break;case u.EyeState_Closed:a=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds;if(a>=1){this._blinkingState=u.EyeState_Opening;this._stateStartTimeSeconds=this._userTimeSeconds}i=0;break;case u.EyeState_Opening:a=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds;if(a>=1){a=1;this._blinkingState=u.EyeState_Interval;this._nextBlinkingTime=this.determinNextBlinkingTiming()}i=a;break;case u.EyeState_Interval:if(this._nextBlinkingTime<this._userTimeSeconds){this._blinkingState=u.EyeState_Closing;this._stateStartTimeSeconds=this._userTimeSeconds}i=1;break;case u.EyeState_First:default:this._blinkingState=u.EyeState_Interval;this._nextBlinkingTime=this.determinNextBlinkingTiming();i=1;break}if(!t.CloseIfZero){i=-i}for(var n=0;n<this._parameterIds.getSize();++n){e.setParameterValueById(this._parameterIds.at(n),i)}};t.prototype.determinNextBlinkingTiming=function(){var t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)};t.CloseIfZero=true;return t}();e.CubismEyeBlink=s;var u;(function(t){t[t["EyeState_First"]=0]="EyeState_First";t[t["EyeState_Interval"]=1]="EyeState_Interval";t[t["EyeState_Closing"]=2]="EyeState_Closing";t[t["EyeState_Closed"]=3]="EyeState_Closed";t[t["EyeState_Opening"]=4]="EyeState_Opening"})(u=e.EyeState||(e.EyeState={}));var l=n(r(/*! ./cubismeyeblink */"../../../Framework/src/effect/cubismeyeblink.ts"));var c;(function(t){t.CubismEyeBlink=l.CubismEyeBlink;t.EyeState=l.EyeState})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/effect/cubismpose.ts":
/*!***************************************************!*\
  !*** ../../../Framework/src/effect/cubismpose.ts ***!
  \***************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.PartData=e.CubismPose=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var u=r(/*! ../utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var l=.001;var c=.5;var h="FadeInTime";var f="Link";var d="Groups";var m="Id";var p=function(){function t(){this._fadeTimeSeconds=c;this._lastModel=null;this._partGroups=new s.csmVector;this._partGroupCounts=new s.csmVector}t.create=function(e,r){var i=new t;var a=u.CubismJson.create(e,r);var n=a.getRoot();if(!n.getValueByString(h).isNull()){i._fadeTimeSeconds=n.getValueByString(h).toFloat(c);if(i._fadeTimeSeconds<=0){i._fadeTimeSeconds=c}}var s=n.getValueByString(d);var l=s.getSize();for(var p=0;p<l;++p){var _=s.getValueByIndex(p);var v=_.getSize();var y=0;for(var b=0;b<v;++b){var C=_.getValueByIndex(b);var S=new g;var P=o.CubismFramework.getIdManager().getId(C.getValueByString(m).getRawString());S.partId=P;if(!C.getValueByString(f).isNull()){var M=C.getValueByString(f);var w=M.getSize();for(var x=0;x<w;++x){var B=new g;var L=o.CubismFramework.getIdManager().getId(M.getValueByIndex(x).getString());B.partId=L;S.link.pushBack(B)}}i._partGroups.pushBack(S.clone());++y}i._partGroupCounts.pushBack(y)}u.CubismJson.delete(a);return i};t.delete=function(t){if(t!=null){t=null}};t.prototype.updateParameters=function(t,e){if(t!=this._lastModel){this.reset(t)}this._lastModel=t;if(e<0){e=0}var r=0;for(var i=0;i<this._partGroupCounts.getSize();i++){var a=this._partGroupCounts.at(i);this.doFade(t,e,r,a);r+=a}this.copyPartOpacities(t)};t.prototype.reset=function(t){var e=0;for(var r=0;r<this._partGroupCounts.getSize();++r){var i=this._partGroupCounts.at(r);for(var a=e;a<e+i;++a){this._partGroups.at(a).initialize(t);var n=this._partGroups.at(a).partIndex;var o=this._partGroups.at(a).parameterIndex;if(n<0){continue}t.setPartOpacityByIndex(n,a==e?1:0);t.setParameterValueByIndex(o,a==e?1:0);for(var s=0;s<this._partGroups.at(a).link.getSize();++s){this._partGroups.at(a).link.at(s).initialize(t)}}e+=i}};t.prototype.copyPartOpacities=function(t){for(var e=0;e<this._partGroups.getSize();++e){var r=this._partGroups.at(e);if(r.link.getSize()==0){continue}var i=this._partGroups.at(e).partIndex;var a=t.getPartOpacityByIndex(i);for(var n=0;n<r.link.getSize();++n){var o=r.link.at(n);var s=o.partIndex;if(s<0){continue}t.setPartOpacityByIndex(s,a)}}};t.prototype.doFade=function(t,e,r,i){var a=-1;var n=1;var o=.5;var s=.15;for(var u=r;u<r+i;++u){var c=this._partGroups.at(u).partIndex;var h=this._partGroups.at(u).parameterIndex;if(t.getParameterValueByIndex(h)>l){if(a>=0){break}a=u;n=t.getPartOpacityByIndex(c);n+=e/this._fadeTimeSeconds;if(n>1){n=1}}}if(a<0){a=0;n=1}for(var u=r;u<r+i;++u){var f=this._partGroups.at(u).partIndex;if(a==u){t.setPartOpacityByIndex(f,n)}else{var d=t.getPartOpacityByIndex(f);var m=void 0;if(n<o){m=n*(o-1)/o+1}else{m=(1-n)*o/(1-o)}var p=(1-m)*(1-n);if(p>s){m=1-s/(1-n)}if(d>m){d=m}t.setPartOpacityByIndex(f,d)}}};return t}();e.CubismPose=p;var g=function(){function t(t){this.parameterIndex=0;this.partIndex=0;this.link=new s.csmVector;if(t!=undefined){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement()){this.link.pushBack(e.ptr().clone())}}}t.prototype.assignment=function(t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement()){this.link.pushBack(e.ptr().clone())}return this};t.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId);this.partIndex=t.getPartIndex(this.partId);t.setParameterValueByIndex(this.parameterIndex,1)};t.prototype.clone=function(){var e=new t;e.partId=this.partId;e.parameterIndex=this.parameterIndex;e.partIndex=this.partIndex;e.link=new s.csmVector;for(var r=this.link.begin();r.notEqual(this.link.end());r.increment()){e.link.pushBack(r.ptr().clone())}return e};return t}();e.PartData=g;var _=n(r(/*! ./cubismpose */"../../../Framework/src/effect/cubismpose.ts"));var v;(function(t){t.CubismPose=_.CubismPose;t.PartData=_.PartData})(v=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/icubismmodelsetting.ts":
/*!*****************************************************!*\
  !*** ../../../Framework/src/icubismmodelsetting.ts ***!
  \*****************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.ICubismModelSetting=void 0;var o=function(){function t(){}return t}();e.ICubismModelSetting=o;var s=n(r(/*! ./icubismmodelsetting */"../../../Framework/src/icubismmodelsetting.ts"));var u;(function(t){t.ICubismModelSetting=s.ICubismModelSetting})(u=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/id/cubismid.ts":
/*!*********************************************!*\
  !*** ../../../Framework/src/id/cubismid.ts ***!
  \*********************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismId=void 0;var o=r(/*! ../type/csmstring */"../../../Framework/src/type/csmstring.ts");var s=function(){function t(t){if(typeof t==="string"){this._id=new o.csmString(t);return}this._id=t}t.prototype.getString=function(){return this._id};t.prototype.isEqual=function(e){if(typeof e==="string"){return this._id.isEqual(e)}else if(e instanceof o.csmString){return this._id.isEqual(e.s)}else if(e instanceof t){return this._id.isEqual(e._id.s)}return false};t.prototype.isNotEqual=function(e){if(typeof e=="string"){return!this._id.isEqual(e)}else if(e instanceof o.csmString){return!this._id.isEqual(e.s)}else if(e instanceof t){return!this._id.isEqual(e._id.s)}return false};return t}();e.CubismId=s;var u=n(r(/*! ./cubismid */"../../../Framework/src/id/cubismid.ts"));var l;(function(t){t.CubismId=u.CubismId})(l=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/id/cubismidmanager.ts":
/*!****************************************************!*\
  !*** ../../../Framework/src/id/cubismidmanager.ts ***!
  \****************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismIdManager=void 0;var o=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var s=r(/*! ./cubismid */"../../../Framework/src/id/cubismid.ts");var u=function(){function t(){this._ids=new o.csmVector}t.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t){this._ids.set(t,void 0)}this._ids=null};t.prototype.registerIds=function(t){for(var e=0;e<t.length;e++){this.registerId(t[e])}};t.prototype.registerId=function(t){var e=null;if("string"==typeof t){if((e=this.findId(t))!=null){return e}e=new s.CubismId(t);this._ids.pushBack(e)}else{return this.registerId(t.s)}return e};t.prototype.getId=function(t){return this.registerId(t)};t.prototype.isExist=function(t){if("string"==typeof t){return this.findId(t)!=null}return this.isExist(t.s)};t.prototype.findId=function(t){for(var e=0;e<this._ids.getSize();++e){if(this._ids.at(e).getString().isEqual(t)){return this._ids.at(e)}}return null};return t}();e.CubismIdManager=u;var l=n(r(/*! ./cubismidmanager */"../../../Framework/src/id/cubismidmanager.ts"));var c;(function(t){t.CubismIdManager=l.CubismIdManager})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/live2dcubismframework.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/live2dcubismframework.ts ***!
  \*******************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.LogLevel=e.Option=e.CubismFramework=e.csmDelete=e.Constant=e.strtod=void 0;var o=r(/*! ./id/cubismidmanager */"../../../Framework/src/id/cubismidmanager.ts");var s=r(/*! ./rendering/cubismrenderer */"../../../Framework/src/rendering/cubismrenderer.ts");var u=r(/*! ./utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var l=r(/*! ./utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");function c(t,e){var r=0;for(var i=1;;i++){var a=t.slice(i-1,i);if(a=="e"||a=="-"||a=="E"){continue}var n=t.substring(0,i);var o=Number(n);if(isNaN(o)){break}r=i}var s=parseFloat(t);if(isNaN(s)){s=NaN}e[0]=t.slice(r);return s}e.strtod=c;var h=false;var f=false;var d=null;var m=null;e.Constant=Object.freeze({vertexOffset:0,vertexStep:2});function p(t){if(!t){return}t=void 0}e.csmDelete=p;var g=function(){function t(){}t.startUp=function(t){if(t===void 0){t=null}if(h){u.CubismLogInfo("CubismFramework.startUp() is already done.");return h}d=t;if(d!=null){Live2DCubismCore.Logging.csmSetLogFunction(d.logFunction)}h=true;if(h){var e=Live2DCubismCore.Version.csmGetVersion();var r=(e&4278190080)>>24;var i=(e&16711680)>>16;var a=e&65535;var n=e;u.CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+r).slice(-2),("00"+i).slice(-2),("0000"+a).slice(-4),n)}u.CubismLogInfo("CubismFramework.startUp() is complete.");return h};t.cleanUp=function(){h=false;f=false;d=null;m=null};t.initialize=function(){u.CSM_ASSERT(h);if(!h){u.CubismLogWarning("CubismFramework is not started.");return}if(f){u.CubismLogWarning("CubismFramework.initialize() skipped, already initialized.");return}l.Value.staticInitializeNotForClientCall();m=new o.CubismIdManager;f=true;u.CubismLogInfo("CubismFramework.initialize() is complete.")};t.dispose=function(){u.CSM_ASSERT(h);if(!h){u.CubismLogWarning("CubismFramework is not started.");return}if(!f){u.CubismLogWarning("CubismFramework.dispose() skipped, not initialized.");return}l.Value.staticReleaseNotForClientCall();m.release();m=null;s.CubismRenderer.staticRelease();f=false;u.CubismLogInfo("CubismFramework.dispose() is complete.")};t.isStarted=function(){return h};t.isInitialized=function(){return f};t.coreLogFunction=function(t){if(!Live2DCubismCore.Logging.csmGetLogFunction()){return}Live2DCubismCore.Logging.csmGetLogFunction()(t)};t.getLoggingLevel=function(){if(d!=null){return d.loggingLevel}return v.LogLevel_Off};t.getIdManager=function(){return m};return t}();e.CubismFramework=g;var _=function(){function t(){}return t}();e.Option=_;var v;(function(t){t[t["LogLevel_Verbose"]=0]="LogLevel_Verbose";t[t["LogLevel_Debug"]=1]="LogLevel_Debug";t[t["LogLevel_Info"]=2]="LogLevel_Info";t[t["LogLevel_Warning"]=3]="LogLevel_Warning";t[t["LogLevel_Error"]=4]="LogLevel_Error";t[t["LogLevel_Off"]=5]="LogLevel_Off"})(v=e.LogLevel||(e.LogLevel={}));var y=n(r(/*! ./live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts"));var b;(function(t){t.Constant=y.Constant;t.csmDelete=y.csmDelete;t.CubismFramework=y.CubismFramework})(b=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismmath.ts":
/*!*************************************************!*\
  !*** ../../../Framework/src/math/cubismmath.ts ***!
  \*************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMath=void 0;var o=r(/*! ./cubismvector2 */"../../../Framework/src/math/cubismvector2.ts");var s=function(){function t(){}t.range=function(t,e,r){if(t<e){t=e}else if(t>r){t=r}return t};t.sin=function(t){return Math.sin(t)};t.cos=function(t){return Math.cos(t)};t.abs=function(t){return Math.abs(t)};t.sqrt=function(t){return Math.sqrt(t)};t.cbrt=function(t){if(t===0){return t}var e=t;var r=e<0;if(r){e=-e}var i;if(e===Infinity){i=Infinity}else{i=Math.exp(Math.log(e)/3);i=(e/(i*i)+2*i)/3}return r?-i:i};t.getEasingSine=function(t){if(t<0){return 0}else if(t>1){return 1}return.5-.5*this.cos(t*Math.PI)};t.max=function(t,e){return t>e?t:e};t.min=function(t,e){return t>e?e:t};t.degreesToRadian=function(t){return t/180*Math.PI};t.radianToDegrees=function(t){return t*180/Math.PI};t.directionToRadian=function(t,e){var r=Math.atan2(e.y,e.x);var i=Math.atan2(t.y,t.x);var a=r-i;while(a<-Math.PI){a+=Math.PI*2}while(a>Math.PI){a-=Math.PI*2}return a};t.directionToDegrees=function(t,e){var r=this.directionToRadian(t,e);var i=this.radianToDegrees(r);if(e.x-t.x>0){i=-i}return i};t.radianToDirection=function(t){var e=new o.CubismVector2;e.x=this.sin(t);e.y=this.cos(t);return e};t.quadraticEquation=function(e,r,i){if(this.abs(e)<t.Epsilon){if(this.abs(r)<t.Epsilon){return-i}return-i/r}return-(r+this.sqrt(r*r-4*e*i))/(2*e)};t.cardanoAlgorithmForBezier=function(e,r,i,a){if(this.sqrt(e)<t.Epsilon){return this.range(this.quadraticEquation(r,i,a),0,1)}var n=r/e;var o=i/e;var s=a/e;var u=(3*o-n*n)/3;var l=u/3;var c=(2*n*n*n-9*n*o+27*s)/27;var h=c/2;var f=h*h+l*l*l;var d=.5;var m=d+.01;if(f<0){var p=-u/3;var g=p*p*p;var _=this.sqrt(g);var v=-c/(2*_);var y=this.range(v,-1,1);var b=Math.acos(y);var C=this.cbrt(_);var S=2*C;var P=S*this.cos(b/3)-n/3;if(this.abs(P-d)<m){return this.range(P,0,1)}var M=S*this.cos((b+2*Math.PI)/3)-n/3;if(this.abs(M-d)<m){return this.range(M,0,1)}var w=S*this.cos((b+4*Math.PI)/3)-n/3;return this.range(w,0,1)}if(f==0){var x;if(h<0){x=this.cbrt(-h)}else{x=-this.cbrt(h)}var B=2*x-n/3;if(this.abs(B-d)<m){return this.range(B,0,1)}var M=-x-n/3;return this.range(M,0,1)}var L=this.sqrt(f);var F=this.cbrt(L-h);var I=this.cbrt(L+h);var V=F-I-n/3;return this.range(V,0,1)};t.Epsilon=1e-5;return t}();e.CubismMath=s;var u=n(r(/*! ./cubismmath */"../../../Framework/src/math/cubismmath.ts"));var l;(function(t){t.CubismMath=u.CubismMath})(l=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismmatrix44.ts":
/*!*****************************************************!*\
  !*** ../../../Framework/src/math/cubismmatrix44.ts ***!
  \*****************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMatrix44=void 0;var o=function(){function t(){this._tr=new Float32Array(16);this.loadIdentity()}t.multiply=function(t,e,r){var i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var a=4;for(var n=0;n<a;++n){for(var o=0;o<a;++o){for(var s=0;s<a;++s){i[o+n*4]+=t[s+n*4]*e[o+s*4]}}}for(var n=0;n<16;++n){r[n]=i[n]}};t.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)};t.prototype.setMatrix=function(t){for(var e=0;e<16;++e){this._tr[e]=t[e]}};t.prototype.getArray=function(){return this._tr};t.prototype.getScaleX=function(){return this._tr[0]};t.prototype.getScaleY=function(){return this._tr[5]};t.prototype.getTranslateX=function(){return this._tr[12]};t.prototype.getTranslateY=function(){return this._tr[13]};t.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]};t.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]};t.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]};t.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]};t.prototype.translateRelative=function(e,r){var i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);t.multiply(i,this._tr,this._tr)};t.prototype.translate=function(t,e){this._tr[12]=t;this._tr[13]=e};t.prototype.translateX=function(t){this._tr[12]=t};t.prototype.translateY=function(t){this._tr[13]=t};t.prototype.scaleRelative=function(e,r){var i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);t.multiply(i,this._tr,this._tr)};t.prototype.scale=function(t,e){this._tr[0]=t;this._tr[5]=e};t.prototype.multiplyByMatrix=function(e){t.multiply(e.getArray(),this._tr,this._tr)};t.prototype.clone=function(){var e=new t;for(var r=0;r<this._tr.length;r++){e._tr[r]=this._tr[r]}return e};return t}();e.CubismMatrix44=o;var s=n(r(/*! ./cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts"));var u;(function(t){t.CubismMatrix44=s.CubismMatrix44})(u=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismmodelmatrix.ts":
/*!********************************************************!*\
  !*** ../../../Framework/src/math/cubismmodelmatrix.ts ***!
  \********************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismModelMatrix=void 0;var s=r(/*! ./cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var u=function(t){i(e,t);function e(e,r){var i=t.call(this)||this;i._width=e!==undefined?e:0;i._height=r!==undefined?r:0;i.setHeight(2);return i}e.prototype.setWidth=function(t){var e=t/this._width;var r=e;this.scale(e,r)};e.prototype.setHeight=function(t){var e=t/this._height;var r=e;this.scale(e,r)};e.prototype.setPosition=function(t,e){this.translate(t,e)};e.prototype.setCenterPosition=function(t,e){this.centerX(t);this.centerY(e)};e.prototype.top=function(t){this.setY(t)};e.prototype.bottom=function(t){var e=this._height*this.getScaleY();this.translateY(t-e)};e.prototype.left=function(t){this.setX(t)};e.prototype.right=function(t){var e=this._width*this.getScaleX();this.translateX(t-e)};e.prototype.centerX=function(t){var e=this._width*this.getScaleX();this.translateX(t-e/2)};e.prototype.setX=function(t){this.translateX(t)};e.prototype.centerY=function(t){var e=this._height*this.getScaleY();this.translateY(t-e/2)};e.prototype.setY=function(t){this.translateY(t)};e.prototype.setupFromLayout=function(t){var e="width";var r="height";var i="x";var a="y";var n="center_x";var o="center_y";var s="top";var u="bottom";var l="left";var c="right";for(var h=t.begin();h.notEqual(t.end());h.preIncrement()){var f=h.ptr().first;var d=h.ptr().second;if(f==e){this.setWidth(d)}else if(f==r){this.setHeight(d)}}for(var h=t.begin();h.notEqual(t.end());h.preIncrement()){var f=h.ptr().first;var d=h.ptr().second;if(f==i){this.setX(d)}else if(f==a){this.setY(d)}else if(f==n){this.centerX(d)}else if(f==o){this.centerY(d)}else if(f==s){this.top(d)}else if(f==u){this.bottom(d)}else if(f==l){this.left(d)}else if(f==c){this.right(d)}}};return e}(s.CubismMatrix44);e.CubismModelMatrix=u;var l=o(r(/*! ./cubismmodelmatrix */"../../../Framework/src/math/cubismmodelmatrix.ts"));var c;(function(t){t.CubismModelMatrix=l.CubismModelMatrix})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismtargetpoint.ts":
/*!********************************************************!*\
  !*** ../../../Framework/src/math/cubismtargetpoint.ts ***!
  \********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismTargetPoint=void 0;var o=r(/*! ./cubismmath */"../../../Framework/src/math/cubismmath.ts");var s=30;var u=.01;var l=function(){function t(){this._faceTargetX=0;this._faceTargetY=0;this._faceX=0;this._faceY=0;this._faceVX=0;this._faceVY=0;this._lastTimeSeconds=0;this._userTimeSeconds=0}t.prototype.update=function(t){this._userTimeSeconds+=t;var e=40/10;var r=e*1/s;if(this._lastTimeSeconds==0){this._lastTimeSeconds=this._userTimeSeconds;return}var i=(this._userTimeSeconds-this._lastTimeSeconds)*s;this._lastTimeSeconds=this._userTimeSeconds;var a=.15;var n=a*s;var l=i*r/n;var c=this._faceTargetX-this._faceX;var h=this._faceTargetY-this._faceY;if(o.CubismMath.abs(c)<=u&&o.CubismMath.abs(h)<=u){return}var f=o.CubismMath.sqrt(c*c+h*h);var d=r*c/f;var m=r*h/f;var p=d-this._faceVX;var g=m-this._faceVY;var _=o.CubismMath.sqrt(p*p+g*g);if(_<-l||_>l){p*=l/_;g*=l/_}this._faceVX+=p;this._faceVY+=g;{var v=.5*(o.CubismMath.sqrt(l*l+16*l*f-8*l*f)-l);var y=o.CubismMath.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);if(y>v){this._faceVX*=v/y;this._faceVY*=v/y}}this._faceX+=this._faceVX;this._faceY+=this._faceVY};t.prototype.getX=function(){return this._faceX};t.prototype.getY=function(){return this._faceY};t.prototype.set=function(t,e){this._faceTargetX=t;this._faceTargetY=e};return t}();e.CubismTargetPoint=l;var c=n(r(/*! ./cubismtargetpoint */"../../../Framework/src/math/cubismtargetpoint.ts"));var h;(function(t){t.CubismTargetPoint=c.CubismTargetPoint})(h=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismvector2.ts":
/*!****************************************************!*\
  !*** ../../../Framework/src/math/cubismvector2.ts ***!
  \****************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismVector2=void 0;var o=function(){function t(t,e){this.x=t;this.y=e;this.x=t==undefined?0:t;this.y=e==undefined?0:e}t.prototype.add=function(e){var r=new t(0,0);r.x=this.x+e.x;r.y=this.y+e.y;return r};t.prototype.substract=function(e){var r=new t(0,0);r.x=this.x-e.x;r.y=this.y-e.y;return r};t.prototype.multiply=function(e){var r=new t(0,0);r.x=this.x*e.x;r.y=this.y*e.y;return r};t.prototype.multiplyByScaler=function(e){return this.multiply(new t(e,e))};t.prototype.division=function(e){var r=new t(0,0);r.x=this.x/e.x;r.y=this.y/e.y;return r};t.prototype.divisionByScalar=function(e){return this.division(new t(e,e))};t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};t.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))};t.prototype.dot=function(t){return this.x*t.x+this.y*t.y};t.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t;this.y=this.y/t};t.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y};t.prototype.isNotEqual=function(t){return!this.isEqual(t)};return t}();e.CubismVector2=o;var s=n(r(/*! ./cubismvector2 */"../../../Framework/src/math/cubismvector2.ts"));var u;(function(t){t.CubismVector2=s.CubismVector2})(u=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/math/cubismviewmatrix.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/math/cubismviewmatrix.ts ***!
  \*******************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismViewMatrix=void 0;var s=r(/*! ./cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var u=function(t){i(e,t);function e(){var e=t.call(this)||this;e._screenLeft=0;e._screenRight=0;e._screenTop=0;e._screenBottom=0;e._maxLeft=0;e._maxRight=0;e._maxTop=0;e._maxBottom=0;e._maxScale=0;e._minScale=0;return e}e.prototype.adjustTranslate=function(t,e){if(this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft){t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]}if(this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight){t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]}if(this._tr[5]*this._maxTop+(this._tr[13]+e)<this._screenTop){e=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]}if(this._tr[5]*this._maxBottom+(this._tr[13]+e)>this._screenBottom){e=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]}var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);s.CubismMatrix44.multiply(r,this._tr,this._tr)};e.prototype.adjustScale=function(t,e,r){var i=this.getMaxScale();var a=this.getMinScale();var n=r*this._tr[0];if(n<a){if(this._tr[0]>0){r=a/this._tr[0]}}else if(n>i){if(this._tr[0]>0){r=i/this._tr[0]}}var o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);var u=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);var l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1]);s.CubismMatrix44.multiply(l,this._tr,this._tr);s.CubismMatrix44.multiply(u,this._tr,this._tr);s.CubismMatrix44.multiply(o,this._tr,this._tr)};e.prototype.setScreenRect=function(t,e,r,i){this._screenLeft=t;this._screenRight=e;this._screenBottom=r;this._screenTop=i};e.prototype.setMaxScreenRect=function(t,e,r,i){this._maxLeft=t;this._maxRight=e;this._maxTop=i;this._maxBottom=r};e.prototype.setMaxScale=function(t){this._maxScale=t};e.prototype.setMinScale=function(t){this._minScale=t};e.prototype.getMaxScale=function(){return this._maxScale};e.prototype.getMinScale=function(){return this._minScale};e.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale};e.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale};e.prototype.getScreenLeft=function(){return this._screenLeft};e.prototype.getScreenRight=function(){return this._screenRight};e.prototype.getScreenBottom=function(){return this._screenBottom};e.prototype.getScreenTop=function(){return this._screenTop};e.prototype.getMaxLeft=function(){return this._maxLeft};e.prototype.getMaxRight=function(){return this._maxRight};e.prototype.getMaxBottom=function(){return this._maxBottom};e.prototype.getMaxTop=function(){return this._maxTop};return e}(s.CubismMatrix44);e.CubismViewMatrix=u;var l=o(r(/*! ./cubismviewmatrix */"../../../Framework/src/math/cubismviewmatrix.ts"));var c;(function(t){t.CubismViewMatrix=l.CubismViewMatrix})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/model/cubismmoc.ts":
/*!*************************************************!*\
  !*** ../../../Framework/src/model/cubismmoc.ts ***!
  \*************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMoc=void 0;var o=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var s=r(/*! ./cubismmodel */"../../../Framework/src/model/cubismmodel.ts");var u=function(){function t(t){this._moc=t;this._modelCount=0}t.create=function(e){var r=null;var i=Live2DCubismCore.Moc.fromArrayBuffer(e);if(i){r=new t(i)}return r};t.delete=function(t){t._moc._release();t._moc=null;t=null};t.prototype.createModel=function(){var t=null;var e=Live2DCubismCore.Model.fromMoc(this._moc);if(e){t=new s.CubismModel(e);t.initialize();++this._modelCount}return t};t.prototype.deleteModel=function(t){if(t!=null){t.release();t=null;--this._modelCount}};t.prototype.release=function(){o.CSM_ASSERT(this._modelCount==0);this._moc._release();this._moc=null};return t}();e.CubismMoc=u;var l=n(r(/*! ./cubismmoc */"../../../Framework/src/model/cubismmoc.ts"));var c;(function(t){t.CubismMoc=l.CubismMoc})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/model/cubismmodel.ts":
/*!***************************************************!*\
  !*** ../../../Framework/src/model/cubismmodel.ts ***!
  \***************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismModel=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../rendering/cubismrenderer */"../../../Framework/src/rendering/cubismrenderer.ts");var u=r(/*! ../type/csmmap */"../../../Framework/src/type/csmmap.ts");var l=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var c=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var h=function(){function t(t){this._model=t;this._parameterValues=null;this._parameterMaximumValues=null;this._parameterMinimumValues=null;this._partOpacities=null;this._savedParameters=new l.csmVector;this._parameterIds=new l.csmVector;this._drawableIds=new l.csmVector;this._partIds=new l.csmVector;this._notExistPartId=new u.csmMap;this._notExistParameterId=new u.csmMap;this._notExistParameterValues=new u.csmMap;this._notExistPartOpacities=new u.csmMap}t.prototype.update=function(){this._model.update();this._model.drawables.resetDynamicFlags()};t.prototype.getCanvasWidth=function(){if(this._model==null){return 0}return this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit};t.prototype.getCanvasHeight=function(){if(this._model==null){return 0}return this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit};t.prototype.saveParameters=function(){var t=this._model.parameters.count;var e=this._savedParameters.getSize();for(var r=0;r<t;++r){if(r<e){this._savedParameters.set(r,this._parameterValues[r])}else{this._savedParameters.pushBack(this._parameterValues[r])}}};t.prototype.getModel=function(){return this._model};t.prototype.getPartIndex=function(t){var e;var r=this._model.parts.count;for(e=0;e<r;++e){if(t==this._partIds.at(e)){return e}}if(this._notExistPartId.isExist(t)){return this._notExistPartId.getValue(t)}e=r+this._notExistPartId.getSize();this._notExistPartId.setValue(t,e);this._notExistPartOpacities.appendKey(e);return e};t.prototype.getPartCount=function(){var t=this._model.parts.count;return t};t.prototype.setPartOpacityByIndex=function(t,e){if(this._notExistPartOpacities.isExist(t)){this._notExistPartOpacities.setValue(t,e);return}c.CSM_ASSERT(0<=t&&t<this.getPartCount());this._partOpacities[t]=e};t.prototype.setPartOpacityById=function(t,e){var r=this.getPartIndex(t);if(r<0){return}this.setPartOpacityByIndex(r,e)};t.prototype.getPartOpacityByIndex=function(t){if(this._notExistPartOpacities.isExist(t)){return this._notExistPartOpacities.getValue(t)}c.CSM_ASSERT(0<=t&&t<this.getPartCount());return this._partOpacities[t]};t.prototype.getPartOpacityById=function(t){var e=this.getPartIndex(t);if(e<0){return 0}return this.getPartOpacityByIndex(e)};t.prototype.getParameterIndex=function(t){var e;var r=this._model.parameters.count;for(e=0;e<r;++e){if(t!=this._parameterIds.at(e)){continue}return e}if(this._notExistParameterId.isExist(t)){return this._notExistParameterId.getValue(t)}e=this._model.parameters.count+this._notExistParameterId.getSize();this._notExistParameterId.setValue(t,e);this._notExistParameterValues.appendKey(e);return e};t.prototype.getParameterCount=function(){return this._model.parameters.count};t.prototype.getParameterMaximumValue=function(t){return this._model.parameters.maximumValues[t]};t.prototype.getParameterMinimumValue=function(t){return this._model.parameters.minimumValues[t]};t.prototype.getParameterDefaultValue=function(t){return this._model.parameters.defaultValues[t]};t.prototype.getParameterValueByIndex=function(t){if(this._notExistParameterValues.isExist(t)){return this._notExistParameterValues.getValue(t)}c.CSM_ASSERT(0<=t&&t<this.getParameterCount());return this._parameterValues[t]};t.prototype.getParameterValueById=function(t){var e=this.getParameterIndex(t);return this.getParameterValueByIndex(e)};t.prototype.setParameterValueByIndex=function(t,e,r){if(r===void 0){r=1}if(this._notExistParameterValues.isExist(t)){this._notExistParameterValues.setValue(t,r==1?e:this._notExistParameterValues.getValue(t)*(1-r)+e*r);return}c.CSM_ASSERT(0<=t&&t<this.getParameterCount());if(this._model.parameters.maximumValues[t]<e){e=this._model.parameters.maximumValues[t]}if(this._model.parameters.minimumValues[t]>e){e=this._model.parameters.minimumValues[t]}this._parameterValues[t]=r==1?e:this._parameterValues[t]=this._parameterValues[t]*(1-r)+e*r};t.prototype.setParameterValueById=function(t,e,r){if(r===void 0){r=1}var i=this.getParameterIndex(t);this.setParameterValueByIndex(i,e,r)};t.prototype.addParameterValueByIndex=function(t,e,r){if(r===void 0){r=1}this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+e*r)};t.prototype.addParameterValueById=function(t,e,r){if(r===void 0){r=1}var i=this.getParameterIndex(t);this.addParameterValueByIndex(i,e,r)};t.prototype.multiplyParameterValueById=function(t,e,r){if(r===void 0){r=1}var i=this.getParameterIndex(t);this.multiplyParameterValueByIndex(i,e,r)};t.prototype.multiplyParameterValueByIndex=function(t,e,r){if(r===void 0){r=1}this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(e-1)*r))};t.prototype.getDrawableIndex=function(t){var e=this._model.drawables.count;for(var r=0;r<e;++r){if(this._drawableIds.at(r)==t){return r}}return-1};t.prototype.getDrawableCount=function(){var t=this._model.drawables.count;return t};t.prototype.getDrawableId=function(t){var e=this._model.drawables.ids;return o.CubismFramework.getIdManager().getId(e[t])};t.prototype.getDrawableRenderOrders=function(){var t=this._model.drawables.renderOrders;return t};t.prototype.getDrawableTextureIndices=function(t){var e=this._model.drawables.textureIndices;return e[t]};t.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(e[t])};t.prototype.getDrawableVertexIndexCount=function(t){var e=this._model.drawables.indexCounts;return e[t]};t.prototype.getDrawableVertexCount=function(t){var e=this._model.drawables.vertexCounts;return e[t]};t.prototype.getDrawableVertices=function(t){return this.getDrawableVertexPositions(t)};t.prototype.getDrawableVertexIndices=function(t){var e=this._model.drawables.indices;return e[t]};t.prototype.getDrawableVertexPositions=function(t){var e=this._model.drawables.vertexPositions;return e[t]};t.prototype.getDrawableVertexUvs=function(t){var e=this._model.drawables.vertexUvs;return e[t]};t.prototype.getDrawableOpacity=function(t){var e=this._model.drawables.opacities;return e[t]};t.prototype.getDrawableCulling=function(t){var e=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(e[t])};t.prototype.getDrawableBlendMode=function(t){var e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(e[t])?s.CubismBlendMode.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(e[t])?s.CubismBlendMode.CubismBlendMode_Multiplicative:s.CubismBlendMode.CubismBlendMode_Normal};t.prototype.getDrawableInvertedMaskBit=function(t){var e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(e[t])};t.prototype.getDrawableMasks=function(){var t=this._model.drawables.masks;return t};t.prototype.getDrawableMaskCounts=function(){var t=this._model.drawables.maskCounts;return t};t.prototype.isUsingMasking=function(){for(var t=0;t<this._model.drawables.count;++t){if(this._model.drawables.maskCounts[t]<=0){continue}return true}return false};t.prototype.getDrawableDynamicFlagIsVisible=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(e[t])};t.prototype.getDrawableDynamicFlagVisibilityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(e[t])};t.prototype.getDrawableDynamicFlagOpacityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(e[t])};t.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(e[t])};t.prototype.loadParameters=function(){var t=this._model.parameters.count;var e=this._savedParameters.getSize();if(t>e){t=e}for(var r=0;r<t;++r){this._parameterValues[r]=this._savedParameters.at(r)}};t.prototype.initialize=function(){c.CSM_ASSERT(this._model);this._parameterValues=this._model.parameters.values;this._partOpacities=this._model.parts.opacities;this._parameterMaximumValues=this._model.parameters.maximumValues;this._parameterMinimumValues=this._model.parameters.minimumValues;{var t=this._model.parameters.ids;var e=this._model.parameters.count;this._parameterIds.prepareCapacity(e);for(var r=0;r<e;++r){this._parameterIds.pushBack(o.CubismFramework.getIdManager().getId(t[r]))}}{var i=this._model.parts.ids;var a=this._model.parts.count;this._partIds.prepareCapacity(a);for(var r=0;r<a;++r){this._partIds.pushBack(o.CubismFramework.getIdManager().getId(i[r]))}}{var n=this._model.drawables.ids;var s=this._model.drawables.count;this._drawableIds.prepareCapacity(s);for(var r=0;r<s;++r){this._drawableIds.pushBack(o.CubismFramework.getIdManager().getId(n[r]))}}};t.prototype.release=function(){this._model.release();this._model=null};return t}();e.CubismModel=h;var f=n(r(/*! ./cubismmodel */"../../../Framework/src/model/cubismmodel.ts"));var d;(function(t){t.CubismModel=f.CubismModel})(d=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/model/cubismmodeluserdata.ts":
/*!***********************************************************!*\
  !*** ../../../Framework/src/model/cubismmodeluserdata.ts ***!
  \***********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismModelUserData=e.CubismModelUserDataNode=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../type/csmstring */"../../../Framework/src/type/csmstring.ts");var u=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var l=r(/*! ./cubismmodeluserdatajson */"../../../Framework/src/model/cubismmodeluserdatajson.ts");var c="ArtMesh";var h=function(){function t(){}return t}();e.CubismModelUserDataNode=h;var f=function(){function t(){this._userDataNodes=new u.csmVector;this._artMeshUserDataNode=new u.csmVector}t.create=function(e,r){var i=new t;i.parseUserData(e,r);return i};t.delete=function(t){if(t!=null){t.release();t=null}};t.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode};t.prototype.parseUserData=function(t,e){var r=new l.CubismModelUserDataJson(t,e);var i=o.CubismFramework.getIdManager().getId(c);var a=r.getUserDataCount();for(var n=0;n<a;n++){var u=new h;u.targetId=r.getUserDataId(n);u.targetType=o.CubismFramework.getIdManager().getId(r.getUserDataTargetType(n));u.value=new s.csmString(r.getUserDataValue(n));this._userDataNodes.pushBack(u);if(u.targetType==i){this._artMeshUserDataNode.pushBack(u)}}r.release();r=void 0};t.prototype.release=function(){for(var t=0;t<this._userDataNodes.getSize();++t){this._userDataNodes.set(t,null)}this._userDataNodes=null};return t}();e.CubismModelUserData=f;var d=n(r(/*! ./cubismmodeluserdata */"../../../Framework/src/model/cubismmodeluserdata.ts"));var m;(function(t){t.CubismModelUserData=d.CubismModelUserData;t.CubismModelUserDataNode=d.CubismModelUserDataNode})(m=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/model/cubismmodeluserdatajson.ts":
/*!***************************************************************!*\
  !*** ../../../Framework/src/model/cubismmodeluserdatajson.ts ***!
  \***************************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismModelUserDataJson=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var u="Meta";var l="UserDataCount";var c="TotalUserDataSize";var h="UserData";var f="Target";var d="Id";var m="Value";var p=function(){function t(t,e){this._json=s.CubismJson.create(t,e)}t.prototype.release=function(){s.CubismJson.delete(this._json)};t.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString(u).getValueByString(l).toInt()};t.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString(u).getValueByString(c).toInt()};t.prototype.getUserDataTargetType=function(t){return this._json.getRoot().getValueByString(h).getValueByIndex(t).getValueByString(f).getRawString()};t.prototype.getUserDataId=function(t){return o.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(h).getValueByIndex(t).getValueByString(d).getRawString())};t.prototype.getUserDataValue=function(t){return this._json.getRoot().getValueByString(h).getValueByIndex(t).getValueByString(m).getRawString()};return t}();e.CubismModelUserDataJson=p;var g=n(r(/*! ./cubismmodeluserdatajson */"../../../Framework/src/model/cubismmodeluserdatajson.ts"));var _;(function(t){t.CubismModelUserDataJson=g.CubismModelUserDataJson})(_=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/model/cubismusermodel.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/model/cubismusermodel.ts ***!
  \*******************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismUserModel=void 0;var o=r(/*! ../effect/cubismbreath */"../../../Framework/src/effect/cubismbreath.ts");var s=r(/*! ../effect/cubismeyeblink */"../../../Framework/src/effect/cubismeyeblink.ts");var u=r(/*! ../effect/cubismpose */"../../../Framework/src/effect/cubismpose.ts");var l=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var c=r(/*! ../math/cubismmodelmatrix */"../../../Framework/src/math/cubismmodelmatrix.ts");var h=r(/*! ../math/cubismtargetpoint */"../../../Framework/src/math/cubismtargetpoint.ts");var f=r(/*! ../motion/cubismexpressionmotion */"../../../Framework/src/motion/cubismexpressionmotion.ts");var d=r(/*! ../motion/cubismmotion */"../../../Framework/src/motion/cubismmotion.ts");var m=r(/*! ../motion/cubismmotionmanager */"../../../Framework/src/motion/cubismmotionmanager.ts");var p=r(/*! ../physics/cubismphysics */"../../../Framework/src/physics/cubismphysics.ts");var g=r(/*! ../rendering/cubismrenderer_webgl */"../../../Framework/src/rendering/cubismrenderer_webgl.ts");var _=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var v=r(/*! ./cubismmoc */"../../../Framework/src/model/cubismmoc.ts");var y=r(/*! ./cubismmodeluserdata */"../../../Framework/src/model/cubismmodeluserdata.ts");var b=function(){function t(){this.loadMotion=function(t,e,r,i){return d.CubismMotion.create(t,e,i)};this._moc=null;this._model=null;this._motionManager=null;this._expressionManager=null;this._eyeBlink=null;this._breath=null;this._modelMatrix=null;this._pose=null;this._dragManager=null;this._physics=null;this._modelUserData=null;this._initialized=false;this._updating=false;this._opacity=1;this._lipsync=true;this._lastLipSyncValue=0;this._dragX=0;this._dragY=0;this._accelerationX=0;this._accelerationY=0;this._accelerationZ=0;this._debugMode=false;this._renderer=null;this._motionManager=new m.CubismMotionManager;this._motionManager.setEventCallback(t.cubismDefaultMotionEventCallback,this);this._expressionManager=new m.CubismMotionManager;this._dragManager=new h.CubismTargetPoint}t.prototype.isInitialized=function(){return this._initialized};t.prototype.setInitialized=function(t){this._initialized=t};t.prototype.isUpdating=function(){return this._updating};t.prototype.setUpdating=function(t){this._updating=t};t.prototype.setDragging=function(t,e){this._dragManager.set(t,e)};t.prototype.setAcceleration=function(t,e,r){this._accelerationX=t;this._accelerationY=e;this._accelerationZ=r};t.prototype.getModelMatrix=function(){return this._modelMatrix};t.prototype.setOpacity=function(t){this._opacity=t};t.prototype.getOpacity=function(){return this._opacity};t.prototype.loadModel=function(t){this._moc=v.CubismMoc.create(t);this._model=this._moc.createModel();this._model.saveParameters();if(this._moc==null||this._model==null){_.CubismLogError("Failed to CreateModel().");return}this._modelMatrix=new c.CubismModelMatrix(this._model.getCanvasWidth(),this._model.getCanvasHeight())};t.prototype.loadExpression=function(t,e,r){return f.CubismExpressionMotion.create(t,e)};t.prototype.loadPose=function(t,e){this._pose=u.CubismPose.create(t,e)};t.prototype.loadUserData=function(t,e){this._modelUserData=y.CubismModelUserData.create(t,e)};t.prototype.loadPhysics=function(t,e){this._physics=p.CubismPhysics.create(t,e)};t.prototype.isHit=function(t,e,r){var i=this._model.getDrawableIndex(t);if(i<0){return false}var a=this._model.getDrawableVertexCount(i);var n=this._model.getDrawableVertices(i);var o=n[0];var s=n[0];var u=n[1];var c=n[1];for(var h=1;h<a;++h){var f=n[l.Constant.vertexOffset+h*l.Constant.vertexStep];var d=n[l.Constant.vertexOffset+h*l.Constant.vertexStep+1];if(f<o){o=f}if(f>s){s=f}if(d<u){u=d}if(d>c){c=d}}var m=this._modelMatrix.invertTransformX(e);var p=this._modelMatrix.invertTransformY(r);return o<=m&&m<=s&&u<=p&&p<=c};t.prototype.getModel=function(){return this._model};t.prototype.getRenderer=function(){return this._renderer};t.prototype.createRenderer=function(){if(this._renderer){this.deleteRenderer()}this._renderer=new g.CubismRenderer_WebGL;this._renderer.initialize(this._model)};t.prototype.deleteRenderer=function(){if(this._renderer!=null){this._renderer.release();this._renderer=null}};t.prototype.motionEventFired=function(t){_.CubismLogInfo("{0}",t.s)};t.cubismDefaultMotionEventCallback=function(t,e,r){var i=r;if(i!=null){i.motionEventFired(e)}};t.prototype.release=function(){if(this._motionManager!=null){this._motionManager.release();this._motionManager=null}if(this._expressionManager!=null){this._expressionManager.release();this._expressionManager=null}if(this._moc!=null){this._moc.deleteModel(this._model);this._moc.release();this._moc=null}this._modelMatrix=null;u.CubismPose.delete(this._pose);s.CubismEyeBlink.delete(this._eyeBlink);o.CubismBreath.delete(this._breath);this._dragManager=null;p.CubismPhysics.delete(this._physics);y.CubismModelUserData.delete(this._modelUserData);this.deleteRenderer()};return t}();e.CubismUserModel=b;var C=n(r(/*! ./cubismusermodel */"../../../Framework/src/model/cubismusermodel.ts"));var S;(function(t){t.CubismUserModel=C.CubismUserModel})(S=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/acubismmotion.ts":
/*!******************************************************!*\
  !*** ../../../Framework/src/motion/acubismmotion.ts ***!
  \******************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.ACubismMotion=void 0;var o=r(/*! ../math/cubismmath */"../../../Framework/src/math/cubismmath.ts");var s=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var u=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var l=function(){function t(){var t=this;this.setFinishedMotionHandler=function(e){return t._onFinishedMotion=e};this.getFinishedMotionHandler=function(){return t._onFinishedMotion};this._fadeInSeconds=-1;this._fadeOutSeconds=-1;this._weight=1;this._offsetSeconds=0;this._firedEventValues=new s.csmVector}t.delete=function(t){t.release();t=void 0;t=null};t.prototype.release=function(){this._weight=0};t.prototype.updateParameters=function(t,e,r){if(!e.isAvailable()||e.isFinished()){return}if(!e.isStarted()){e.setIsStarted(true);e.setStartTime(r-this._offsetSeconds);e.setFadeInStartTime(r);var i=this.getDuration();if(e.getEndTime()<0){e.setEndTime(i<=0?-1:e.getStartTime()+i)}}var a=this._weight;var n=this._fadeInSeconds==0?1:o.CubismMath.getEasingSine((r-e.getFadeInStartTime())/this._fadeInSeconds);var s=this._fadeOutSeconds==0||e.getEndTime()<0?1:o.CubismMath.getEasingSine((e.getEndTime()-r)/this._fadeOutSeconds);a=a*n*s;e.setState(r,a);u.CSM_ASSERT(0<=a&&a<=1);this.doUpdateParameters(t,r,a,e);if(e.getEndTime()>0&&e.getEndTime()<r){e.setIsFinished(true)}};t.prototype.setFadeInTime=function(t){this._fadeInSeconds=t};t.prototype.setFadeOutTime=function(t){this._fadeOutSeconds=t};t.prototype.getFadeOutTime=function(){return this._fadeOutSeconds};t.prototype.getFadeInTime=function(){return this._fadeInSeconds};t.prototype.setWeight=function(t){this._weight=t};t.prototype.getWeight=function(){return this._weight};t.prototype.getDuration=function(){return-1};t.prototype.getLoopDuration=function(){return-1};t.prototype.setOffsetTime=function(t){this._offsetSeconds=t};t.prototype.getFiredEvent=function(t,e){return this._firedEventValues};return t}();e.ACubismMotion=l;var c=n(r(/*! ./acubismmotion */"../../../Framework/src/motion/acubismmotion.ts"));var h;(function(t){t.ACubismMotion=c.ACubismMotion})(h=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismexpressionmotion.ts":
/*!***************************************************************!*\
  !*** ../../../Framework/src/motion/cubismexpressionmotion.ts ***!
  \***************************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.ExpressionParameter=e.ExpressionBlendType=e.CubismExpressionMotion=void 0;var s=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var u=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var l=r(/*! ../utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var c=r(/*! ./acubismmotion */"../../../Framework/src/motion/acubismmotion.ts");var h="FadeInTime";var f="FadeOutTime";var d="Parameters";var m="Id";var p="Value";var g="Blend";var _="Add";var v="Multiply";var y="Overwrite";var b=1;var C=function(t){i(e,t);function e(){var e=t.call(this)||this;e._parameters=new u.csmVector;return e}e.create=function(t,r){var i=new e;var a=l.CubismJson.create(t,r);var n=a.getRoot();i.setFadeInTime(n.getValueByString(h).toFloat(b));i.setFadeOutTime(n.getValueByString(f).toFloat(b));var o=n.getValueByString(d).getSize();i._parameters.prepareCapacity(o);for(var u=0;u<o;++u){var c=n.getValueByString(d).getValueByIndex(u);var C=s.CubismFramework.getIdManager().getId(c.getValueByString(m).getRawString());var M=c.getValueByString(p).toFloat();var w=void 0;if(c.getValueByString(g).isNull()||c.getValueByString(g).getString()==_){w=S.ExpressionBlendType_Add}else if(c.getValueByString(g).getString()==v){w=S.ExpressionBlendType_Multiply}else if(c.getValueByString(g).getString()==y){w=S.ExpressionBlendType_Overwrite}else{w=S.ExpressionBlendType_Add}var x=new P;x.parameterId=C;x.blendType=w;x.value=M;i._parameters.pushBack(x)}l.CubismJson.delete(a);return i};e.prototype.doUpdateParameters=function(t,e,r,i){for(var a=0;a<this._parameters.getSize();++a){var n=this._parameters.at(a);switch(n.blendType){case S.ExpressionBlendType_Add:{t.addParameterValueById(n.parameterId,n.value,r);break}case S.ExpressionBlendType_Multiply:{t.multiplyParameterValueById(n.parameterId,n.value,r);break}case S.ExpressionBlendType_Overwrite:{t.setParameterValueById(n.parameterId,n.value,r);break}default:break}}};return e}(c.ACubismMotion);e.CubismExpressionMotion=C;var S;(function(t){t[t["ExpressionBlendType_Add"]=0]="ExpressionBlendType_Add";t[t["ExpressionBlendType_Multiply"]=1]="ExpressionBlendType_Multiply";t[t["ExpressionBlendType_Overwrite"]=2]="ExpressionBlendType_Overwrite"})(S=e.ExpressionBlendType||(e.ExpressionBlendType={}));var P=function(){function t(){}return t}();e.ExpressionParameter=P;var M=o(r(/*! ./cubismexpressionmotion */"../../../Framework/src/motion/cubismexpressionmotion.ts"));var w;(function(t){t.CubismExpressionMotion=M.CubismExpressionMotion;t.ExpressionBlendType=M.ExpressionBlendType;t.ExpressionParameter=M.ExpressionParameter})(w=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotion.ts":
/*!*****************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotion.ts ***!
  \*****************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMotion=void 0;var s=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var u=r(/*! ../math/cubismmath */"../../../Framework/src/math/cubismmath.ts");var l=r(/*! ../type/csmstring */"../../../Framework/src/type/csmstring.ts");var c=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var h=r(/*! ./acubismmotion */"../../../Framework/src/motion/acubismmotion.ts");var f=r(/*! ./cubismmotioninternal */"../../../Framework/src/motion/cubismmotioninternal.ts");var d=r(/*! ./cubismmotionjson */"../../../Framework/src/motion/cubismmotionjson.ts");var m="EyeBlink";var p="LipSync";var g="Model";var _="Parameter";var v="PartOpacity";var y=false;function b(t,e,r){var i=new f.CubismMotionPoint;i.time=t.time+(e.time-t.time)*r;i.value=t.value+(e.value-t.value)*r;return i}function C(t,e){var r=(e-t[0].time)/(t[1].time-t[0].time);if(r<0){r=0}return t[0].value+(t[1].value-t[0].value)*r}function S(t,e){var r=(e-t[0].time)/(t[3].time-t[0].time);if(r<0){r=0}var i=b(t[0],t[1],r);var a=b(t[1],t[2],r);var n=b(t[2],t[3],r);var o=b(i,a,r);var s=b(a,n,r);return b(o,s,r).value}function P(t,e){var r=.01;var i=e;var a=t[0].time;var n=t[3].time;var o=t[1].time;var s=t[2].time;var u=0;var l=1;var c=0;var h=0;for(var f=true;h<20;++h){if(i<a+r){c=u;break}if(n-r<i){c=l;break}var d=(o+s)*.5;o=(a+o)*.5;s=(n+s)*.5;var m=(o+d)*.5;var p=(s+d)*.5;d=(m+p)*.5;if(i<d){l=(u+l)*.5;if(d-r<i){c=l;break}n=d;s=m}else{u=(u+l)*.5;if(i<d+r){c=u;break}a=d;o=p}}if(h==20){c=(u+l)*.5}if(c<0){c=0}if(c>1){c=1}var g=b(t[0],t[1],c);var _=b(t[1],t[2],c);var v=b(t[2],t[3],c);var y=b(g,_,c);var C=b(_,v,c);return b(y,C,c).value}function M(t,e){var r=e;var i=t[0].time;var a=t[3].time;var n=t[1].time;var o=t[2].time;var s=a-3*o+3*n-i;var l=3*o-6*n+3*i;var c=3*n-3*i;var h=i-r;var f=u.CubismMath.cardanoAlgorithmForBezier(s,l,c,h);var d=b(t[0],t[1],f);var m=b(t[1],t[2],f);var p=b(t[2],t[3],f);var g=b(d,m,f);var _=b(m,p,f);return b(g,_,f).value}function w(t,e){return t[0].value}function x(t,e){return t[1].value}function B(t,e,r){var i=t.curves.at(e);var a=-1;var n=i.baseSegmentIndex+i.segmentCount;var o=0;for(var s=i.baseSegmentIndex;s<n;++s){o=t.segments.at(s).basePointIndex+(t.segments.at(s).segmentType==f.CubismMotionSegmentType.CubismMotionSegmentType_Bezier?3:1);if(t.points.at(o).time>r){a=s;break}}if(a==-1){return t.points.at(o).value}var u=t.segments.at(a);return u.evaluate(t.points.get(u.basePointIndex),r)}var L=function(t){i(e,t);function e(){var e=t.call(this)||this;e._sourceFrameRate=30;e._loopDurationSeconds=-1;e._isLoop=false;e._isLoopFadeIn=true;e._lastWeight=0;e._motionData=null;e._modelCurveIdEyeBlink=null;e._modelCurveIdLipSync=null;e._eyeBlinkParameterIds=null;e._lipSyncParameterIds=null;return e}e.create=function(t,r,i){var a=new e;a.parse(t,r);a._sourceFrameRate=a._motionData.fps;a._loopDurationSeconds=a._motionData.duration;a._onFinishedMotion=i;return a};e.prototype.doUpdateParameters=function(t,e,r,i){if(this._modelCurveIdEyeBlink==null){this._modelCurveIdEyeBlink=s.CubismFramework.getIdManager().getId(m)}if(this._modelCurveIdLipSync==null){this._modelCurveIdLipSync=s.CubismFramework.getIdManager().getId(p)}var a=e-i.getStartTime();if(a<0){a=0}var n=Number.MAX_VALUE;var o=Number.MAX_VALUE;var l=64;var h=0;var d=0;if(this._eyeBlinkParameterIds.getSize()>l){c.CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize())}if(this._lipSyncParameterIds.getSize()>l){c.CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize())}var g=this._fadeInSeconds<=0?1:u.CubismMath.getEasingSine((e-i.getFadeInStartTime())/this._fadeInSeconds);var _=this._fadeOutSeconds<=0||i.getEndTime()<0?1:u.CubismMath.getEasingSine((i.getEndTime()-e)/this._fadeOutSeconds);var v;var y,b;var C=a;if(this._isLoop){while(C>this._motionData.duration){C-=this._motionData.duration}}var S=this._motionData.curves;for(y=0;y<this._motionData.curveCount&&S.at(y).type==f.CubismMotionCurveTarget.CubismMotionCurveTarget_Model;++y){v=B(this._motionData,y,C);if(S.at(y).id==this._modelCurveIdEyeBlink){o=v}else if(S.at(y).id==this._modelCurveIdLipSync){n=v}}var P=0;for(;y<this._motionData.curveCount&&S.at(y).type==f.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;++y){P++;b=t.getParameterIndex(S.at(y).id);if(b==-1){continue}var M=t.getParameterValueByIndex(b);v=B(this._motionData,y,C);if(o!=Number.MAX_VALUE){for(var w=0;w<this._eyeBlinkParameterIds.getSize()&&w<l;++w){if(this._eyeBlinkParameterIds.at(w)==S.at(y).id){v*=o;d|=1<<w;break}}}if(n!=Number.MAX_VALUE){for(var w=0;w<this._lipSyncParameterIds.getSize()&&w<l;++w){if(this._lipSyncParameterIds.at(w)==S.at(y).id){v+=n;h|=1<<w;break}}}var x=void 0;if(S.at(y).fadeInTime<0&&S.at(y).fadeOutTime<0){x=M+(v-M)*r}else{var L=void 0;var F=void 0;if(S.at(y).fadeInTime<0){L=g}else{L=S.at(y).fadeInTime==0?1:u.CubismMath.getEasingSine((e-i.getFadeInStartTime())/S.at(y).fadeInTime)}if(S.at(y).fadeOutTime<0){F=_}else{F=S.at(y).fadeOutTime==0||i.getEndTime()<0?1:u.CubismMath.getEasingSine((i.getEndTime()-e)/S.at(y).fadeOutTime)}var I=this._weight*L*F;x=M+(v-M)*I}t.setParameterValueByIndex(b,x,1)}{if(o!=Number.MAX_VALUE){for(var w=0;w<this._eyeBlinkParameterIds.getSize()&&w<l;++w){var M=t.getParameterValueById(this._eyeBlinkParameterIds.at(w));if(d>>w&1){continue}var x=M+(o-M)*r;t.setParameterValueById(this._eyeBlinkParameterIds.at(w),x)}}if(n!=Number.MAX_VALUE){for(var w=0;w<this._lipSyncParameterIds.getSize()&&w<l;++w){var M=t.getParameterValueById(this._lipSyncParameterIds.at(w));if(h>>w&1){continue}var x=M+(n-M)*r;t.setParameterValueById(this._lipSyncParameterIds.at(w),x)}}}for(;y<this._motionData.curveCount&&S.at(y).type==f.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;++y){b=t.getParameterIndex(S.at(y).id);if(b==-1){continue}v=B(this._motionData,y,C);t.setParameterValueByIndex(b,v)}if(a>=this._motionData.duration){if(this._isLoop){i.setStartTime(e);if(this._isLoopFadeIn){i.setFadeInStartTime(e)}}else{if(this._onFinishedMotion){this._onFinishedMotion(this)}i.setIsFinished(true)}}this._lastWeight=r};e.prototype.setIsLoop=function(t){this._isLoop=t};e.prototype.isLoop=function(){return this._isLoop};e.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t};e.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn};e.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds};e.prototype.getLoopDuration=function(){return this._loopDurationSeconds};e.prototype.setParameterFadeInTime=function(t,e){var r=this._motionData.curves;for(var i=0;i<this._motionData.curveCount;++i){if(t==r.at(i).id){r.at(i).fadeInTime=e;return}}};e.prototype.setParameterFadeOutTime=function(t,e){var r=this._motionData.curves;for(var i=0;i<this._motionData.curveCount;++i){if(t==r.at(i).id){r.at(i).fadeOutTime=e;return}}};e.prototype.getParameterFadeInTime=function(t){var e=this._motionData.curves;for(var r=0;r<this._motionData.curveCount;++r){if(t==e.at(r).id){return e.at(r).fadeInTime}}return-1};e.prototype.getParameterFadeOutTime=function(t){var e=this._motionData.curves;for(var r=0;r<this._motionData.curveCount;++r){if(t==e.at(r).id){return e.at(r).fadeOutTime}}return-1};e.prototype.setEffectIds=function(t,e){this._eyeBlinkParameterIds=t;this._lipSyncParameterIds=e};e.prototype.release=function(){this._motionData=void 0;this._motionData=null};e.prototype.parse=function(t,e){this._motionData=new f.CubismMotionData;var r=new d.CubismMotionJson(t,e);this._motionData.duration=r.getMotionDuration();this._motionData.loop=r.isMotionLoop();this._motionData.curveCount=r.getMotionCurveCount();this._motionData.fps=r.getMotionFps();this._motionData.eventCount=r.getEventCount();var i=r.getEvaluationOptionFlag(d.EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);if(r.isExistMotionFadeInTime()){this._fadeInSeconds=r.getMotionFadeInTime()<0?1:r.getMotionFadeInTime()}else{this._fadeInSeconds=1}if(r.isExistMotionFadeOutTime()){this._fadeOutSeconds=r.getMotionFadeOutTime()<0?1:r.getMotionFadeOutTime()}else{this._fadeOutSeconds=1}this._motionData.curves.updateSize(this._motionData.curveCount,f.CubismMotionCurve,true);this._motionData.segments.updateSize(r.getMotionTotalSegmentCount(),f.CubismMotionSegment,true);this._motionData.points.updateSize(r.getMotionTotalPointCount(),f.CubismMotionPoint,true);this._motionData.events.updateSize(this._motionData.eventCount,f.CubismMotionEvent,true);var a=0;var n=0;for(var o=0;o<this._motionData.curveCount;++o){if(r.getMotionCurveTarget(o)==g){this._motionData.curves.at(o).type=f.CubismMotionCurveTarget.CubismMotionCurveTarget_Model}else if(r.getMotionCurveTarget(o)==_){this._motionData.curves.at(o).type=f.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter}else if(r.getMotionCurveTarget(o)==v){this._motionData.curves.at(o).type=f.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity}this._motionData.curves.at(o).id=r.getMotionCurveId(o);this._motionData.curves.at(o).baseSegmentIndex=n;this._motionData.curves.at(o).fadeInTime=r.isExistMotionCurveFadeInTime(o)?r.getMotionCurveFadeInTime(o):-1;this._motionData.curves.at(o).fadeOutTime=r.isExistMotionCurveFadeOutTime(o)?r.getMotionCurveFadeOutTime(o):-1;for(var s=0;s<r.getMotionCurveSegmentCount(o);){if(s==0){this._motionData.segments.at(n).basePointIndex=a;this._motionData.points.at(a).time=r.getMotionCurveSegment(o,s);this._motionData.points.at(a).value=r.getMotionCurveSegment(o,s+1);a+=1;s+=2}else{this._motionData.segments.at(n).basePointIndex=a-1}var u=r.getMotionCurveSegment(o,s);switch(u){case f.CubismMotionSegmentType.CubismMotionSegmentType_Linear:{this._motionData.segments.at(n).segmentType=f.CubismMotionSegmentType.CubismMotionSegmentType_Linear;this._motionData.segments.at(n).evaluate=C;this._motionData.points.at(a).time=r.getMotionCurveSegment(o,s+1);this._motionData.points.at(a).value=r.getMotionCurveSegment(o,s+2);a+=1;s+=3;break}case f.CubismMotionSegmentType.CubismMotionSegmentType_Bezier:{this._motionData.segments.at(n).segmentType=f.CubismMotionSegmentType.CubismMotionSegmentType_Bezier;if(i||y){this._motionData.segments.at(n).evaluate=S}else{this._motionData.segments.at(n).evaluate=M}this._motionData.points.at(a).time=r.getMotionCurveSegment(o,s+1);this._motionData.points.at(a).value=r.getMotionCurveSegment(o,s+2);this._motionData.points.at(a+1).time=r.getMotionCurveSegment(o,s+3);this._motionData.points.at(a+1).value=r.getMotionCurveSegment(o,s+4);this._motionData.points.at(a+2).time=r.getMotionCurveSegment(o,s+5);this._motionData.points.at(a+2).value=r.getMotionCurveSegment(o,s+6);a+=3;s+=7;break}case f.CubismMotionSegmentType.CubismMotionSegmentType_Stepped:{this._motionData.segments.at(n).segmentType=f.CubismMotionSegmentType.CubismMotionSegmentType_Stepped;this._motionData.segments.at(n).evaluate=w;this._motionData.points.at(a).time=r.getMotionCurveSegment(o,s+1);this._motionData.points.at(a).value=r.getMotionCurveSegment(o,s+2);a+=1;s+=3;break}case f.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:{this._motionData.segments.at(n).segmentType=f.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;this._motionData.segments.at(n).evaluate=x;this._motionData.points.at(a).time=r.getMotionCurveSegment(o,s+1);this._motionData.points.at(a).value=r.getMotionCurveSegment(o,s+2);a+=1;s+=3;break}default:{c.CSM_ASSERT(0);break}}++this._motionData.curves.at(o).segmentCount;++n}}for(var l=0;l<r.getEventCount();++l){this._motionData.events.at(l).fireTime=r.getEventTime(l);this._motionData.events.at(l).value=r.getEventValue(l)}r.release();r=void 0;r=null};e.prototype.getFiredEvent=function(t,e){this._firedEventValues.updateSize(0);for(var r=0;r<this._motionData.eventCount;++r){if(this._motionData.events.at(r).fireTime>t&&this._motionData.events.at(r).fireTime<=e){this._firedEventValues.pushBack(new l.csmString(this._motionData.events.at(r).value.s))}}return this._firedEventValues};return e}(h.ACubismMotion);e.CubismMotion=L;var F=o(r(/*! ./cubismmotion */"../../../Framework/src/motion/cubismmotion.ts"));var I;(function(t){t.CubismMotion=F.CubismMotion})(I=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotioninternal.ts":
/*!*************************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotioninternal.ts ***!
  \*************************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMotionData=e.CubismMotionEvent=e.CubismMotionCurve=e.CubismMotionSegment=e.CubismMotionPoint=e.CubismMotionSegmentType=e.CubismMotionCurveTarget=void 0;var o=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var s;(function(t){t[t["CubismMotionCurveTarget_Model"]=0]="CubismMotionCurveTarget_Model";t[t["CubismMotionCurveTarget_Parameter"]=1]="CubismMotionCurveTarget_Parameter";t[t["CubismMotionCurveTarget_PartOpacity"]=2]="CubismMotionCurveTarget_PartOpacity"})(s=e.CubismMotionCurveTarget||(e.CubismMotionCurveTarget={}));var u;(function(t){t[t["CubismMotionSegmentType_Linear"]=0]="CubismMotionSegmentType_Linear";t[t["CubismMotionSegmentType_Bezier"]=1]="CubismMotionSegmentType_Bezier";t[t["CubismMotionSegmentType_Stepped"]=2]="CubismMotionSegmentType_Stepped";t[t["CubismMotionSegmentType_InverseStepped"]=3]="CubismMotionSegmentType_InverseStepped"})(u=e.CubismMotionSegmentType||(e.CubismMotionSegmentType={}));var l=function(){function t(){this.time=0;this.value=0}return t}();e.CubismMotionPoint=l;var c=function(){function t(){this.evaluate=null;this.basePointIndex=0;this.segmentType=0}return t}();e.CubismMotionSegment=c;var h=function(){function t(){this.type=s.CubismMotionCurveTarget_Model;this.segmentCount=0;this.baseSegmentIndex=0;this.fadeInTime=0;this.fadeOutTime=0}return t}();e.CubismMotionCurve=h;var f=function(){function t(){this.fireTime=0}return t}();e.CubismMotionEvent=f;var d=function(){function t(){this.duration=0;this.loop=false;this.curveCount=0;this.eventCount=0;this.fps=0;this.curves=new o.csmVector;this.segments=new o.csmVector;this.points=new o.csmVector;this.events=new o.csmVector}return t}();e.CubismMotionData=d;var m=n(r(/*! ./cubismmotioninternal */"../../../Framework/src/motion/cubismmotioninternal.ts"));var p;(function(t){t.CubismMotionCurve=m.CubismMotionCurve;t.CubismMotionCurveTarget=m.CubismMotionCurveTarget;t.CubismMotionData=m.CubismMotionData;t.CubismMotionEvent=m.CubismMotionEvent;t.CubismMotionPoint=m.CubismMotionPoint;t.CubismMotionSegment=m.CubismMotionSegment;t.CubismMotionSegmentType=m.CubismMotionSegmentType})(p=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotionjson.ts":
/*!*********************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotionjson.ts ***!
  \*********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.EvaluationOptionFlag=e.CubismMotionJson=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../type/csmstring */"../../../Framework/src/type/csmstring.ts");var u=r(/*! ../utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var l="Meta";var c="Duration";var h="Loop";var f="AreBeziersRestricted";var d="CurveCount";var m="Fps";var p="TotalSegmentCount";var g="TotalPointCount";var _="Curves";var v="Target";var y="Id";var b="FadeInTime";var C="FadeOutTime";var S="Segments";var P="UserData";var M="UserDataCount";var w="TotalUserDataSize";var x="Time";var B="Value";var L=function(){function t(t,e){this._json=u.CubismJson.create(t,e)}t.prototype.release=function(){u.CubismJson.delete(this._json)};t.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString(l).getValueByString(c).toFloat()};t.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString(l).getValueByString(h).toBoolean()};t.prototype.getEvaluationOptionFlag=function(t){if(F.EvaluationOptionFlag_AreBeziersRistricted==t){return this._json.getRoot().getValueByString(l).getValueByString(f).toBoolean()}return false};t.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString(l).getValueByString(d).toInt()};t.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString(l).getValueByString(m).toFloat()};t.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString(l).getValueByString(p).toInt()};t.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString(l).getValueByString(g).toInt()};t.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString(l).getValueByString(b).isNull()};t.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString(l).getValueByString(C).isNull()};t.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString(l).getValueByString(b).toFloat()};t.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString(l).getValueByString(C).toFloat()};t.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(v).getRawString()};t.prototype.getMotionCurveId=function(t){return o.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(y).getRawString())};t.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(b).isNull()};t.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(C).isNull()};t.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(b).toFloat()};t.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(C).toFloat()};t.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(S).getVector().getSize()};t.prototype.getMotionCurveSegment=function(t,e){return this._json.getRoot().getValueByString(_).getValueByIndex(t).getValueByString(S).getValueByIndex(e).toFloat()};t.prototype.getEventCount=function(){return this._json.getRoot().getValueByString(l).getValueByString(M).toInt()};t.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString(l).getValueByString(w).toInt()};t.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(x).toFloat()};t.prototype.getEventValue=function(t){return new s.csmString(this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(B).getRawString())};return t}();e.CubismMotionJson=L;var F;(function(t){t[t["EvaluationOptionFlag_AreBeziersRistricted"]=0]="EvaluationOptionFlag_AreBeziersRistricted"})(F=e.EvaluationOptionFlag||(e.EvaluationOptionFlag={}));var I=n(r(/*! ./cubismmotionjson */"../../../Framework/src/motion/cubismmotionjson.ts"));var V;(function(t){t.CubismMotionJson=I.CubismMotionJson})(V=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotionmanager.ts":
/*!************************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotionmanager.ts ***!
  \************************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMotionManager=void 0;var s=r(/*! ./cubismmotionqueuemanager */"../../../Framework/src/motion/cubismmotionqueuemanager.ts");var u=function(t){i(e,t);function e(){var e=t.call(this)||this;e._currentPriority=0;e._reservePriority=0;return e}e.prototype.getCurrentPriority=function(){return this._currentPriority};e.prototype.getReservePriority=function(){return this._reservePriority};e.prototype.setReservePriority=function(t){this._reservePriority=t};e.prototype.startMotionPriority=function(e,r,i){if(i==this._reservePriority){this._reservePriority=0}this._currentPriority=i;return t.prototype.startMotion.call(this,e,r,this._userTimeSeconds)};e.prototype.updateMotion=function(e,r){this._userTimeSeconds+=r;var i=t.prototype.doUpdateMotion.call(this,e,this._userTimeSeconds);if(this.isFinished()){this._currentPriority=0}return i};e.prototype.reserveMotion=function(t){if(t<=this._reservePriority||t<=this._currentPriority){return false}this._reservePriority=t;return true};return e}(s.CubismMotionQueueManager);e.CubismMotionManager=u;var l=o(r(/*! ./cubismmotionmanager */"../../../Framework/src/motion/cubismmotionmanager.ts"));var c;(function(t){t.CubismMotionManager=l.CubismMotionManager})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotionqueueentry.ts":
/*!***************************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotionqueueentry.ts ***!
  \***************************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismMotionQueueEntry=void 0;var o=r(/*! ./acubismmotion */"../../../Framework/src/motion/acubismmotion.ts");var s=function(){function t(){this._autoDelete=false;this._motion=null;this._available=true;this._finished=false;this._started=false;this._startTimeSeconds=-1;this._fadeInStartTimeSeconds=0;this._endTimeSeconds=-1;this._stateTimeSeconds=0;this._stateWeight=0;this._lastEventCheckSeconds=0;this._motionQueueEntryHandle=this;this._fadeOutSeconds=0;this._isTriggeredFadeOut=false}t.prototype.release=function(){if(this._autoDelete&&this._motion){o.ACubismMotion.delete(this._motion)}};t.prototype.setFadeOut=function(t){this._fadeOutSeconds=t;this._isTriggeredFadeOut=true};t.prototype.startFadeOut=function(t,e){var r=e+t;this._isTriggeredFadeOut=true;if(this._endTimeSeconds<0||r<this._endTimeSeconds){this._endTimeSeconds=r}};t.prototype.isFinished=function(){return this._finished};t.prototype.isStarted=function(){return this._started};t.prototype.getStartTime=function(){return this._startTimeSeconds};t.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds};t.prototype.getEndTime=function(){return this._endTimeSeconds};t.prototype.setStartTime=function(t){this._startTimeSeconds=t};t.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t};t.prototype.setEndTime=function(t){this._endTimeSeconds=t};t.prototype.setIsFinished=function(t){this._finished=t};t.prototype.setIsStarted=function(t){this._started=t};t.prototype.isAvailable=function(){return this._available};t.prototype.setIsAvailable=function(t){this._available=t};t.prototype.setState=function(t,e){this._stateTimeSeconds=t;this._stateWeight=e};t.prototype.getStateTime=function(){return this._stateTimeSeconds};t.prototype.getStateWeight=function(){return this._stateWeight};t.prototype.getLastCheckEventSeconds=function(){return this._lastEventCheckSeconds};t.prototype.setLastCheckEventSeconds=function(t){this._lastEventCheckSeconds=t};t.prototype.isTriggeredFadeOut=function(){return this._isTriggeredFadeOut&&this._endTimeSeconds<0};t.prototype.getFadeOutSeconds=function(){return this._fadeOutSeconds};return t}();e.CubismMotionQueueEntry=s;var u=n(r(/*! ./cubismmotionqueueentry */"../../../Framework/src/motion/cubismmotionqueueentry.ts"));var l;(function(t){t.CubismMotionQueueEntry=u.CubismMotionQueueEntry})(l=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/motion/cubismmotionqueuemanager.ts":
/*!*****************************************************************!*\
  !*** ../../../Framework/src/motion/cubismmotionqueuemanager.ts ***!
  \*****************************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.InvalidMotionQueueEntryHandleValue=e.CubismMotionQueueManager=void 0;var o=r(/*! ./cubismmotionqueueentry */"../../../Framework/src/motion/cubismmotionqueueentry.ts");var s=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var u=function(){function t(){this._userTimeSeconds=0;this._eventCallBack=null;this._eventCustomData=null;this._motions=new s.csmVector}t.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t){if(this._motions.at(t)){this._motions.at(t).release();this._motions.set(t,void 0);this._motions.set(t,null)}}this._motions=null};t.prototype.startMotion=function(t,r,i){if(t==null){return e.InvalidMotionQueueEntryHandleValue}var a=null;for(var n=0;n<this._motions.getSize();++n){a=this._motions.at(n);if(a==null){continue}a.setFadeOut(a._motion.getFadeOutTime())}a=new o.CubismMotionQueueEntry;a._autoDelete=r;a._motion=t;this._motions.pushBack(a);return a._motionQueueEntryHandle};t.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(e==null){t=this._motions.erase(t);continue}var r=e._motion;if(r==null){e.release();e=void 0;e=null;t=this._motions.erase(t);continue}if(!e.isFinished()){return false}else{t.preIncrement()}}return true};t.prototype.isFinishedByHandle=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.increment()){var r=e.ptr();if(r==null){continue}if(r._motionQueueEntryHandle==t&&!r.isFinished()){return false}}return true};t.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(e==null){t=this._motions.erase(t);continue}e.release();e=void 0;e=null;t=this._motions.erase(t)}};t.prototype.getCubismMotionQueueEntry=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.preIncrement()){var r=e.ptr();if(r==null){continue}if(r._motionQueueEntryHandle==t){return r}}return null};t.prototype.setEventCallback=function(t,e){if(e===void 0){e=null}this._eventCallBack=t;this._eventCustomData=e};t.prototype.doUpdateMotion=function(t,e){var r=false;for(var i=this._motions.begin();i.notEqual(this._motions.end());){var a=i.ptr();if(a==null){i=this._motions.erase(i);continue}var n=a._motion;if(n==null){a.release();a=void 0;a=null;i=this._motions.erase(i);continue}n.updateParameters(t,a,e);r=true;var o=n.getFiredEvent(a.getLastCheckEventSeconds()-a.getStartTime(),e-a.getStartTime());for(var s=0;s<o.getSize();++s){this._eventCallBack(this,o.at(s),this._eventCustomData)}a.setLastCheckEventSeconds(e);if(a.isFinished()){a.release();a=void 0;a=null;i=this._motions.erase(i)}else{if(a.isTriggeredFadeOut()){a.startFadeOut(a.getFadeOutSeconds(),e)}i.preIncrement()}}return r};return t}();e.CubismMotionQueueManager=u;e.InvalidMotionQueueEntryHandleValue=-1;var l=n(r(/*! ./cubismmotionqueuemanager */"../../../Framework/src/motion/cubismmotionqueuemanager.ts"));var c;(function(t){t.CubismMotionQueueManager=l.CubismMotionQueueManager;t.InvalidMotionQueueEntryHandleValue=l.InvalidMotionQueueEntryHandleValue})(c=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/physics/cubismphysics.ts":
/*!*******************************************************!*\
  !*** ../../../Framework/src/physics/cubismphysics.ts ***!
  \*******************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.Options=e.CubismPhysics=void 0;var o=r(/*! ../math/cubismmath */"../../../Framework/src/math/cubismmath.ts");var s=r(/*! ../math/cubismvector2 */"../../../Framework/src/math/cubismvector2.ts");var u=r(/*! ./cubismphysicsinternal */"../../../Framework/src/physics/cubismphysicsinternal.ts");var l=r(/*! ./cubismphysicsjson */"../../../Framework/src/physics/cubismphysicsjson.ts");var c="X";var h="Y";var f="Angle";var d=5;var m=100;var p=.001;var g=function(){function t(){this._physicsRig=null;this._options=new _;this._options.gravity.y=-1;this._options.gravity.x=0;this._options.wind.x=0;this._options.wind.y=0}t.create=function(e,r){var i=new t;i.parse(e,r);i._physicsRig.gravity.y=0;return i};t.delete=function(t){if(t!=null){t.release();t=null}};t.prototype.evaluate=function(t,e){var r;var i;var a;var n;var u=new s.CubismVector2;var l;var c;var h;var f;var g;var _;var v;var y;g=t.getModel().parameters.values;_=t.getModel().parameters.maximumValues;v=t.getModel().parameters.minimumValues;y=t.getModel().parameters.defaultValues;for(var b=0;b<this._physicsRig.subRigCount;++b){r={angle:0};u.x=0;u.y=0;l=this._physicsRig.settings.at(b);c=this._physicsRig.inputs.get(l.baseInputIndex);h=this._physicsRig.outputs.get(l.baseOutputIndex);f=this._physicsRig.particles.get(l.baseParticleIndex);for(var C=0;C<l.inputCount;++C){i=c[C].weight/m;if(c[C].sourceParameterIndex==-1){c[C].sourceParameterIndex=t.getParameterIndex(c[C].source.id)}c[C].getNormalizedParameterValue(u,r,g[c[C].sourceParameterIndex],v[c[C].sourceParameterIndex],_[c[C].sourceParameterIndex],y[c[C].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,c[C].reflect,i)}a=o.CubismMath.degreesToRadian(-r.angle);u.x=u.x*o.CubismMath.cos(a)-u.y*o.CubismMath.sin(a);u.y=u.x*o.CubismMath.sin(a)+u.y*o.CubismMath.cos(a);I(f,l.particleCount,u,r.angle,this._options.wind,p*l.normalizationPosition.maximum,e,d);for(var C=0;C<l.outputCount;++C){var S=h[C].vertexIndex;if(S<1||S>=l.particleCount){break}if(h[C].destinationParameterIndex==-1){h[C].destinationParameterIndex=t.getParameterIndex(h[C].destination.id)}var P=new s.CubismVector2;P.x=f[S].position.x-f[S-1].position.x;P.y=f[S].position.y-f[S-1].position.y;n=h[C].getValue(P,f,S,h[C].reflect,this._options.gravity);var M=h[C].destinationParameterIndex;var w=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(g.subarray(M))):g.slice(M);V(w,v[M],_[M],n,h[C]);for(var x=M,B=0;x<g.length;x++,B++){g[x]=w[B]}}}};t.prototype.setOptions=function(t){this._options=t};t.prototype.getOption=function(){return this._options};t.prototype.release=function(){this._physicsRig=void 0;this._physicsRig=null};t.prototype.parse=function(t,e){this._physicsRig=new u.CubismPhysicsRig;var r=new l.CubismPhysicsJson(t,e);this._physicsRig.gravity=r.getGravity();this._physicsRig.wind=r.getWind();this._physicsRig.subRigCount=r.getSubRigCount();this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,u.CubismPhysicsSubRig,true);this._physicsRig.inputs.updateSize(r.getTotalInputCount(),u.CubismPhysicsInput,true);this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),u.CubismPhysicsOutput,true);this._physicsRig.particles.updateSize(r.getVertexCount(),u.CubismPhysicsParticle,true);var i=0,a=0,n=0;for(var o=0;o<this._physicsRig.settings.getSize();++o){this._physicsRig.settings.at(o).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(o);this._physicsRig.settings.at(o).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(o);this._physicsRig.settings.at(o).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(o);this._physicsRig.settings.at(o).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(o);this._physicsRig.settings.at(o).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(o);this._physicsRig.settings.at(o).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(o);this._physicsRig.settings.at(o).inputCount=r.getInputCount(o);this._physicsRig.settings.at(o).baseInputIndex=i;for(var s=0;s<this._physicsRig.settings.at(o).inputCount;++s){this._physicsRig.inputs.at(i+s).sourceParameterIndex=-1;this._physicsRig.inputs.at(i+s).weight=r.getInputWeight(o,s);this._physicsRig.inputs.at(i+s).reflect=r.getInputReflect(o,s);if(r.getInputType(o,s)==c){this._physicsRig.inputs.at(i+s).type=u.CubismPhysicsSource.CubismPhysicsSource_X;this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=y}else if(r.getInputType(o,s)==h){this._physicsRig.inputs.at(i+s).type=u.CubismPhysicsSource.CubismPhysicsSource_Y;this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=b}else if(r.getInputType(o,s)==f){this._physicsRig.inputs.at(i+s).type=u.CubismPhysicsSource.CubismPhysicsSource_Angle;this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=C}this._physicsRig.inputs.at(i+s).source.targetType=u.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;this._physicsRig.inputs.at(i+s).source.id=r.getInputSourceId(o,s)}i+=this._physicsRig.settings.at(o).inputCount;this._physicsRig.settings.at(o).outputCount=r.getOutputCount(o);this._physicsRig.settings.at(o).baseOutputIndex=a;for(var s=0;s<this._physicsRig.settings.at(o).outputCount;++s){this._physicsRig.outputs.at(a+s).destinationParameterIndex=-1;this._physicsRig.outputs.at(a+s).vertexIndex=r.getOutputVertexIndex(o,s);this._physicsRig.outputs.at(a+s).angleScale=r.getOutputAngleScale(o,s);this._physicsRig.outputs.at(a+s).weight=r.getOutputWeight(o,s);this._physicsRig.outputs.at(a+s).destination.targetType=u.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;this._physicsRig.outputs.at(a+s).destination.id=r.getOutputDestinationId(o,s);if(r.getOutputType(o,s)==c){this._physicsRig.outputs.at(a+s).type=u.CubismPhysicsSource.CubismPhysicsSource_X;this._physicsRig.outputs.at(a+s).getValue=S;this._physicsRig.outputs.at(a+s).getScale=B}else if(r.getOutputType(o,s)==h){this._physicsRig.outputs.at(a+s).type=u.CubismPhysicsSource.CubismPhysicsSource_Y;this._physicsRig.outputs.at(a+s).getValue=P;this._physicsRig.outputs.at(a+s).getScale=L}else if(r.getOutputType(o,s)==f){this._physicsRig.outputs.at(a+s).type=u.CubismPhysicsSource.CubismPhysicsSource_Angle;this._physicsRig.outputs.at(a+s).getValue=M;this._physicsRig.outputs.at(a+s).getScale=F}this._physicsRig.outputs.at(a+s).reflect=r.getOutputReflect(o,s)}a+=this._physicsRig.settings.at(o).outputCount;this._physicsRig.settings.at(o).particleCount=r.getParticleCount(o);this._physicsRig.settings.at(o).baseParticleIndex=n;for(var s=0;s<this._physicsRig.settings.at(o).particleCount;++s){this._physicsRig.particles.at(n+s).mobility=r.getParticleMobility(o,s);this._physicsRig.particles.at(n+s).delay=r.getParticleDelay(o,s);this._physicsRig.particles.at(n+s).acceleration=r.getParticleAcceleration(o,s);this._physicsRig.particles.at(n+s).radius=r.getParticleRadius(o,s);this._physicsRig.particles.at(n+s).position=r.getParticlePosition(o,s)}n+=this._physicsRig.settings.at(o).particleCount}this.initialize();r.release();r=void 0;r=null};t.prototype.initialize=function(){var t;var e;var r;for(var i=0;i<this._physicsRig.subRigCount;++i){e=this._physicsRig.settings.at(i);t=this._physicsRig.particles.get(e.baseParticleIndex);t[0].initialPosition=new s.CubismVector2(0,0);t[0].lastPosition=new s.CubismVector2(t[0].initialPosition.x,t[0].initialPosition.y);t[0].lastGravity=new s.CubismVector2(0,-1);t[0].lastGravity.y*=-1;t[0].velocity=new s.CubismVector2(0,0);t[0].force=new s.CubismVector2(0,0);for(var a=1;a<e.particleCount;++a){r=new s.CubismVector2(0,0);r.y=t[a].radius;t[a].initialPosition=new s.CubismVector2(t[a-1].initialPosition.x+r.x,t[a-1].initialPosition.y+r.y);t[a].position=new s.CubismVector2(t[a].initialPosition.x,t[a].initialPosition.y);t[a].lastPosition=new s.CubismVector2(t[a].initialPosition.x,t[a].initialPosition.y);t[a].lastGravity=new s.CubismVector2(0,-1);t[a].lastGravity.y*=-1;t[a].velocity=new s.CubismVector2(0,0);t[a].force=new s.CubismVector2(0,0)}}};return t}();e.CubismPhysics=g;var _=function(){function t(){this.gravity=new s.CubismVector2(0,0);this.wind=new s.CubismVector2(0,0)}return t}();e.Options=_;function v(t){var e=0;if(t>0){e=1}else if(t<0){e=-1}return e}function y(t,e,r,i,a,n,o,s,u,l){t.x+=D(r,i,a,n,o.minimum,o.maximum,o.defalut,u)*l}function b(t,e,r,i,a,n,o,s,u,l){t.y+=D(r,i,a,n,o.minimum,o.maximum,o.defalut,u)*l}function C(t,e,r,i,a,n,o,s,u,l){e.angle+=D(r,i,a,n,s.minimum,s.maximum,s.defalut,u)*l}function S(t,e,r,i,a){var n=t.x;if(i){n*=-1}return n}function P(t,e,r,i,a){var n=t.y;if(i){n*=-1}return n}function M(t,e,r,i,a){var n;if(r>=2){a=e[r-1].position.substract(e[r-2].position)}else{a=a.multiplyByScaler(-1)}n=o.CubismMath.directionToRadian(a,t);if(i){n*=-1}return n}function w(t,e){var r=o.CubismMath.max(t,e);var i=o.CubismMath.min(t,e);return o.CubismMath.abs(r-i)}function x(t,e){var r=o.CubismMath.min(t,e);return r+w(t,e)/2}function B(t,e){return JSON.parse(JSON.stringify(t.x))}function L(t,e){return JSON.parse(JSON.stringify(t.y))}function F(t,e){return JSON.parse(JSON.stringify(e))}function I(t,e,r,i,a,n,u,l){var c;var h;var f;var d;var m=new s.CubismVector2(0,0);var p=new s.CubismVector2(0,0);var g=new s.CubismVector2(0,0);var _=new s.CubismVector2(0,0);t[0].position=new s.CubismVector2(r.x,r.y);c=o.CubismMath.degreesToRadian(i);d=o.CubismMath.radianToDirection(c);d.normalize();for(var v=1;v<e;++v){t[v].force=d.multiplyByScaler(t[v].acceleration).add(a);t[v].lastPosition=new s.CubismVector2(t[v].position.x,t[v].position.y);h=t[v].delay*u*30;m=t[v].position.substract(t[v-1].position);f=o.CubismMath.directionToRadian(t[v].lastGravity,d)/l;m.x=o.CubismMath.cos(f)*m.x-m.y*o.CubismMath.sin(f);m.y=o.CubismMath.sin(f)*m.x+m.y*o.CubismMath.cos(f);t[v].position=t[v-1].position.add(m);p=t[v].velocity.multiplyByScaler(h);g=t[v].force.multiplyByScaler(h).multiplyByScaler(h);t[v].position=t[v].position.add(p).add(g);_=t[v].position.substract(t[v-1].position);_.normalize();t[v].position=t[v-1].position.add(_.multiplyByScaler(t[v].radius));if(o.CubismMath.abs(t[v].position.x)<n){t[v].position.x=0}if(h!=0){t[v].velocity=t[v].position.substract(t[v].lastPosition);t[v].velocity=t[v].velocity.divisionByScalar(h);t[v].velocity=t[v].velocity.multiplyByScaler(t[v].mobility)}t[v].force=new s.CubismVector2(0,0);t[v].lastGravity=new s.CubismVector2(d.x,d.y)}}function V(t,e,r,i,a){var n;var o;var s;n=a.getScale(a.translationScale,a.angleScale);o=i*n;if(o<e){if(o<a.valueBelowMinimum){a.valueBelowMinimum=o}o=e}else if(o>r){if(o>a.valueExceededMaximum){a.valueExceededMaximum=o}o=r}s=a.weight/m;if(s>=1){t[0]=o}else{o=t[0]*(1-s)+o*s;t[0]=o}}function D(t,e,r,i,a,n,s,u){var l=0;var c=o.CubismMath.max(r,e);if(c<t){t=c}var h=o.CubismMath.min(r,e);if(h>t){t=h}var f=o.CubismMath.min(a,n);var d=o.CubismMath.max(a,n);var m=s;var p=x(h,c);var g=t-p;switch(v(g)){case 1:{var _=d-m;var y=c-p;if(y!=0){l=g*(_/y);l+=m}break}case-1:{var _=f-m;var y=h-p;if(y!=0){l=g*(_/y);l+=m}break}case 0:{l=m;break}default:{break}}return u?l:l*-1}var k=n(r(/*! ./cubismphysics */"../../../Framework/src/physics/cubismphysics.ts"));var E;(function(t){t.CubismPhysics=k.CubismPhysics;t.Options=k.Options})(E=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/physics/cubismphysicsinternal.ts":
/*!***************************************************************!*\
  !*** ../../../Framework/src/physics/cubismphysicsinternal.ts ***!
  \***************************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismPhysicsRig=e.CubismPhysicsOutput=e.CubismPhysicsInput=e.CubismPhysicsSubRig=e.CubismPhysicsParticle=e.CubismPhysicsNormalization=e.CubismPhysicsParameter=e.PhysicsJsonEffectiveForces=e.CubismPhysicsSource=e.CubismPhysicsTargetType=void 0;var o=r(/*! ../math/cubismvector2 */"../../../Framework/src/math/cubismvector2.ts");var s=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var u;(function(t){t[t["CubismPhysicsTargetType_Parameter"]=0]="CubismPhysicsTargetType_Parameter"})(u=e.CubismPhysicsTargetType||(e.CubismPhysicsTargetType={}));var l;(function(t){t[t["CubismPhysicsSource_X"]=0]="CubismPhysicsSource_X";t[t["CubismPhysicsSource_Y"]=1]="CubismPhysicsSource_Y";t[t["CubismPhysicsSource_Angle"]=2]="CubismPhysicsSource_Angle"})(l=e.CubismPhysicsSource||(e.CubismPhysicsSource={}));var c=function(){function t(){this.gravity=new o.CubismVector2(0,0);this.wind=new o.CubismVector2(0,0)}return t}();e.PhysicsJsonEffectiveForces=c;var h=function(){function t(){}return t}();e.CubismPhysicsParameter=h;var f=function(){function t(){}return t}();e.CubismPhysicsNormalization=f;var d=function(){function t(){this.initialPosition=new o.CubismVector2(0,0);this.position=new o.CubismVector2(0,0);this.lastPosition=new o.CubismVector2(0,0);this.lastGravity=new o.CubismVector2(0,0);this.force=new o.CubismVector2(0,0);this.velocity=new o.CubismVector2(0,0)}return t}();e.CubismPhysicsParticle=d;var m=function(){function t(){this.normalizationPosition=new f;this.normalizationAngle=new f}return t}();e.CubismPhysicsSubRig=m;var p=function(){function t(){this.source=new h}return t}();e.CubismPhysicsInput=p;var g=function(){function t(){this.destination=new h;this.translationScale=new o.CubismVector2(0,0)}return t}();e.CubismPhysicsOutput=g;var _=function(){function t(){this.settings=new s.csmVector;this.inputs=new s.csmVector;this.outputs=new s.csmVector;this.particles=new s.csmVector;this.gravity=new o.CubismVector2(0,0);this.wind=new o.CubismVector2(0,0)}return t}();e.CubismPhysicsRig=_;var v=n(r(/*! ./cubismphysicsinternal */"../../../Framework/src/physics/cubismphysicsinternal.ts"));var y;(function(t){t.CubismPhysicsInput=v.CubismPhysicsInput;t.CubismPhysicsNormalization=v.CubismPhysicsNormalization;t.CubismPhysicsOutput=v.CubismPhysicsOutput;t.CubismPhysicsParameter=v.CubismPhysicsParameter;t.CubismPhysicsParticle=v.CubismPhysicsParticle;t.CubismPhysicsRig=v.CubismPhysicsRig;t.CubismPhysicsSource=v.CubismPhysicsSource;t.CubismPhysicsSubRig=v.CubismPhysicsSubRig;t.CubismPhysicsTargetType=v.CubismPhysicsTargetType;t.PhysicsJsonEffectiveForces=v.PhysicsJsonEffectiveForces})(y=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/physics/cubismphysicsjson.ts":
/*!***********************************************************!*\
  !*** ../../../Framework/src/physics/cubismphysicsjson.ts ***!
  \***********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismPhysicsJson=void 0;var o=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=r(/*! ../math/cubismvector2 */"../../../Framework/src/math/cubismvector2.ts");var u=r(/*! ../utils/cubismjson */"../../../Framework/src/utils/cubismjson.ts");var l="Position";var c="X";var h="Y";var f="Angle";var d="Type";var m="Id";var p="Meta";var g="EffectiveForces";var _="TotalInputCount";var v="TotalOutputCount";var y="PhysicsSettingCount";var b="Gravity";var C="Wind";var S="VertexCount";var P="PhysicsSettings";var M="Normalization";var w="Minimum";var x="Maximum";var B="Default";var L="Reflect";var F="Weight";var I="Input";var V="Source";var D="Output";var k="Scale";var E="VertexIndex";var T="Destination";var O="Vertices";var R="Mobility";var A="Delay";var j="Radius";var N="Acceleration";var U=function(){function t(t,e){this._json=u.CubismJson.create(t,e)}t.prototype.release=function(){u.CubismJson.delete(this._json)};t.prototype.getGravity=function(){var t=new s.CubismVector2(0,0);t.x=this._json.getRoot().getValueByString(p).getValueByString(g).getValueByString(b).getValueByString(c).toFloat();t.y=this._json.getRoot().getValueByString(p).getValueByString(g).getValueByString(b).getValueByString(h).toFloat();return t};t.prototype.getWind=function(){var t=new s.CubismVector2(0,0);t.x=this._json.getRoot().getValueByString(p).getValueByString(g).getValueByString(C).getValueByString(c).toFloat();t.y=this._json.getRoot().getValueByString(p).getValueByString(g).getValueByString(C).getValueByString(h).toFloat();return t};t.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString(p).getValueByString(y).toInt()};t.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString(p).getValueByString(_).toInt()};t.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString(p).getValueByString(v).toInt()};t.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString(p).getValueByString(S).toInt()};t.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(l).getValueByString(w).toFloat()};t.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(l).getValueByString(x).toFloat()};t.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(l).getValueByString(B).toFloat()};t.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(f).getValueByString(w).toFloat()};t.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(f).getValueByString(x).toFloat()};t.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(M).getValueByString(f).getValueByString(B).toFloat()};t.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(I).getVector().getSize()};t.prototype.getInputWeight=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(I).getValueByIndex(e).getValueByString(F).toFloat()};t.prototype.getInputReflect=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(I).getValueByIndex(e).getValueByString(L).toBoolean()};t.prototype.getInputType=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(I).getValueByIndex(e).getValueByString(d).getRawString()};t.prototype.getInputSourceId=function(t,e){return o.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(I).getValueByIndex(e).getValueByString(V).getValueByString(m).getRawString())};t.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getVector().getSize()};t.prototype.getOutputVertexIndex=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(E).toInt()};t.prototype.getOutputAngleScale=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(k).toFloat()};t.prototype.getOutputWeight=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(F).toFloat()};t.prototype.getOutputDestinationId=function(t,e){return o.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(T).getValueByString(m).getRawString())};t.prototype.getOutputType=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(d).getRawString()};t.prototype.getOutputReflect=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(D).getValueByIndex(e).getValueByString(L).toBoolean()};t.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getVector().getSize()};t.prototype.getParticleMobility=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(R).toFloat()};t.prototype.getParticleDelay=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(A).toFloat()};t.prototype.getParticleAcceleration=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(N).toFloat()};t.prototype.getParticleRadius=function(t,e){return this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(j).toFloat()};t.prototype.getParticlePosition=function(t,e){var r=new s.CubismVector2(0,0);r.x=this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(l).getValueByString(c).toFloat();r.y=this._json.getRoot().getValueByString(P).getValueByIndex(t).getValueByString(O).getValueByIndex(e).getValueByString(l).getValueByString(h).toFloat();return r};return t}();e.CubismPhysicsJson=U;var z=n(r(/*! ./cubismphysicsjson */"../../../Framework/src/physics/cubismphysicsjson.ts"));var X;(function(t){t.CubismPhysicsJson=z.CubismPhysicsJson})(X=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/rendering/cubismrenderer.ts":
/*!**********************************************************!*\
  !*** ../../../Framework/src/rendering/cubismrenderer.ts ***!
  \**********************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismTextureColor=e.CubismBlendMode=e.CubismRenderer=void 0;var o=r(/*! ../math/cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var s=function(){function t(){this._isCulling=false;this._isPremultipliedAlpha=false;this._anisortopy=0;this._model=null;this._modelColor=new l;this._mvpMatrix4x4=new o.CubismMatrix44;this._mvpMatrix4x4.loadIdentity()}t.create=function(){return null};t.delete=function(t){t=null};t.prototype.initialize=function(t){this._model=t};t.prototype.drawModel=function(){if(this.getModel()==null)return;this.doDrawModel()};t.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())};t.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4};t.prototype.setModelColor=function(t,e,r,i){if(t<0){t=0}else if(t>1){t=1}if(e<0){e=0}else if(e>1){e=1}if(r<0){r=0}else if(r>1){r=1}if(i<0){i=0}else if(i>1){i=1}this._modelColor.R=t;this._modelColor.G=e;this._modelColor.B=r;this._modelColor.A=i};t.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))};t.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t};t.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha};t.prototype.setIsCulling=function(t){this._isCulling=t};t.prototype.isCulling=function(){return this._isCulling};t.prototype.setAnisotropy=function(t){this._anisortopy=t};t.prototype.getAnisotropy=function(){return this._anisortopy};t.prototype.getModel=function(){return this._model};return t}();e.CubismRenderer=s;var u;(function(t){t[t["CubismBlendMode_Normal"]=0]="CubismBlendMode_Normal";t[t["CubismBlendMode_Additive"]=1]="CubismBlendMode_Additive";t[t["CubismBlendMode_Multiplicative"]=2]="CubismBlendMode_Multiplicative"})(u=e.CubismBlendMode||(e.CubismBlendMode={}));var l=function(){function t(){this.R=1;this.G=1;this.B=1;this.A=1}return t}();e.CubismTextureColor=l;var c=n(r(/*! ./cubismrenderer */"../../../Framework/src/rendering/cubismrenderer.ts"));var h;(function(t){t.CubismBlendMode=c.CubismBlendMode;t.CubismRenderer=c.CubismRenderer;t.CubismTextureColor=c.CubismTextureColor})(h=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/rendering/cubismrenderer_webgl.ts":
/*!****************************************************************!*\
  !*** ../../../Framework/src/rendering/cubismrenderer_webgl.ts ***!
  \****************************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismRenderer_WebGL=e.fragmentShaderSrcMaskInvertedPremultipliedAlpha=e.fragmentShaderSrcMaskPremultipliedAlpha=e.fragmentShaderSrcPremultipliedAlpha=e.vertexShaderSrcMasked=e.vertexShaderSrc=e.fragmentShaderSrcsetupMask=e.vertexShaderSrcSetupMask=e.ShaderNames=e.CubismShaderSet=e.CubismShader_WebGL=e.CubismClippingContext=e.CubismRenderTextureResource=e.CubismClippingManager_WebGL=void 0;var s=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var u=r(/*! ../math/cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var l=r(/*! ../type/csmmap */"../../../Framework/src/type/csmmap.ts");var c=r(/*! ../type/csmrectf */"../../../Framework/src/type/csmrectf.ts");var h=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var f=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var d=r(/*! ./cubismrenderer */"../../../Framework/src/rendering/cubismrenderer.ts");var m=4;var p=10;var g;var _;var v;var y=function(){function t(){this._maskRenderTexture=null;this._colorBuffer=null;this._currentFrameNo=0;this._clippingMaskBufferSize=256;this._clippingContextListForMask=new h.csmVector;this._clippingContextListForDraw=new h.csmVector;this._channelColors=new h.csmVector;this._tmpBoundsOnModel=new c.csmRect;this._tmpMatrix=new u.CubismMatrix44;this._tmpMatrixForMask=new u.CubismMatrix44;this._tmpMatrixForDraw=new u.CubismMatrix44;this._maskTexture=null;var t=new d.CubismTextureColor;t.R=1;t.G=0;t.B=0;t.A=0;this._channelColors.pushBack(t);t=new d.CubismTextureColor;t.R=0;t.G=1;t.B=0;t.A=0;this._channelColors.pushBack(t);t=new d.CubismTextureColor;t.R=0;t.G=0;t.B=1;t.A=0;this._channelColors.pushBack(t);t=new d.CubismTextureColor;t.R=0;t.G=0;t.B=0;t.A=1;this._channelColors.pushBack(t)}t.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)};t.prototype.getMaskRenderTexture=function(){var t=0;if(this._maskTexture&&this._maskTexture.texture!=0){this._maskTexture.frameNo=this._currentFrameNo;t=this._maskTexture.texture}if(t==0){var e=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);this.gl.bindTexture(this.gl.TEXTURE_2D,null);t=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t);this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,v);this._maskTexture=new b(this._currentFrameNo,t)}return t};t.prototype.setGL=function(t){this.gl=t};t.prototype.calcClippedDrawTotalBounds=function(t,e){var r=Number.MAX_VALUE;var i=Number.MAX_VALUE;var a=Number.MIN_VALUE;var n=Number.MIN_VALUE;var o=e._clippedDrawableIndexList.length;for(var u=0;u<o;u++){var l=e._clippedDrawableIndexList[u];var c=t.getDrawableVertexCount(l);var h=t.getDrawableVertices(l);var f=Number.MAX_VALUE;var d=Number.MAX_VALUE;var m=Number.MIN_VALUE;var p=Number.MIN_VALUE;var g=c*s.Constant.vertexStep;for(var _=s.Constant.vertexOffset;_<g;_+=s.Constant.vertexStep){var v=h[_];var y=h[_+1];if(v<f){f=v}if(v>m){m=v}if(y<d){d=y}if(y>p){p=y}}if(f==Number.MAX_VALUE){continue}if(f<r){r=f}if(d<i){i=d}if(m>a){a=m}if(p>n){n=p}if(r==Number.MAX_VALUE){e._allClippedDrawRect.x=0;e._allClippedDrawRect.y=0;e._allClippedDrawRect.width=0;e._allClippedDrawRect.height=0;e._isUsing=false}else{e._isUsing=true;var b=a-r;var C=n-i;e._allClippedDrawRect.x=r;e._allClippedDrawRect.y=i;e._allClippedDrawRect.width=b;e._allClippedDrawRect.height=C}}};t.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++){if(this._clippingContextListForMask.at(t)){this._clippingContextListForMask.at(t).release();this._clippingContextListForMask.set(t,void 0)}this._clippingContextListForMask.set(t,null)}this._clippingContextListForMask=null;for(var t=0;t<this._clippingContextListForDraw.getSize();t++){this._clippingContextListForDraw.set(t,null)}this._clippingContextListForDraw=null;if(this._maskTexture){this.gl.deleteFramebuffer(this._maskTexture.texture);this._maskTexture=null}for(var t=0;t<this._channelColors.getSize();t++){this._channelColors.set(t,null)}this._channelColors=null;this.gl.deleteTexture(this._colorBuffer);this._colorBuffer=null};t.prototype.initialize=function(t,e,r,i){for(var a=0;a<e;a++){if(i[a]<=0){this._clippingContextListForDraw.pushBack(null);continue}var n=this.findSameClip(r[a],i[a]);if(n==null){n=new C(this,r[a],i[a]);this._clippingContextListForMask.pushBack(n)}n.addClippedDrawable(a);this._clippingContextListForDraw.pushBack(n)}};t.prototype.setupClippingContext=function(t,e){this._currentFrameNo++;var r=0;for(var i=0;i<this._clippingContextListForMask.getSize();i++){var a=this._clippingContextListForMask.at(i);this.calcClippedDrawTotalBounds(t,a);if(a._isUsing){r++}}if(r>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize);this._maskRenderTexture=this.getMaskRenderTexture();var n=e.getMvpMatrix();e.preDraw();this.setupLayoutBounds(r);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture);this.gl.clearColor(1,1,1,1);this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(var i=0;i<this._clippingContextListForMask.getSize();i++){var o=this._clippingContextListForMask.at(i);var s=o._allClippedDrawRect;var u=o._layoutBounds;var l=.05;this._tmpBoundsOnModel.setRect(s);this._tmpBoundsOnModel.expand(s.width*l,s.height*l);var c=u.width/this._tmpBoundsOnModel.width;var h=u.height/this._tmpBoundsOnModel.height;{this._tmpMatrix.loadIdentity();{this._tmpMatrix.translateRelative(-1,-1);this._tmpMatrix.scaleRelative(2,2)}{this._tmpMatrix.translateRelative(u.x,u.y);this._tmpMatrix.scaleRelative(c,h);this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y)}this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray())}{this._tmpMatrix.loadIdentity();{this._tmpMatrix.translateRelative(u.x,u.y);this._tmpMatrix.scaleRelative(c,h);this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y)}this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray())}o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());var f=o._clippingIdCount;for(var m=0;m<f;m++){var p=o._clippingIdList[m];if(!t.getDrawableDynamicFlagVertexPositionsDidChange(p)){continue}e.setIsCulling(t.getDrawableCulling(p)!=false);e.setClippingContextBufferForMask(o);e.drawMesh(t.getDrawableTextureIndices(p),t.getDrawableVertexIndexCount(p),t.getDrawableVertexCount(p),t.getDrawableVertexIndices(p),t.getDrawableVertices(p),t.getDrawableVertexUvs(p),t.getDrawableOpacity(p),d.CubismBlendMode.CubismBlendMode_Normal,false)}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,v);e.setClippingContextBufferForMask(null);this.gl.viewport(_[0],_[1],_[2],_[3])}};t.prototype.findSameClip=function(t,e){for(var r=0;r<this._clippingContextListForMask.getSize();r++){var i=this._clippingContextListForMask.at(r);var a=i._clippingIdCount;if(a!=e){continue}var n=0;for(var o=0;o<a;o++){var s=i._clippingIdList[o];for(var u=0;u<a;u++){if(t[u]==s){n++;break}}}if(n==a){return i}}return null};t.prototype.setupLayoutBounds=function(t){var e=t/m;var r=t%m;e=~~e;r=~~r;var i=0;for(var a=0;a<m;a++){var n=e+(a<r?1:0);if(n==0){}else if(n==1){var o=this._clippingContextListForMask.at(i++);o._layoutChannelNo=a;o._layoutBounds.x=0;o._layoutBounds.y=0;o._layoutBounds.width=1;o._layoutBounds.height=1}else if(n==2){for(var s=0;s<n;s++){var u=s%2;u=~~u;var l=this._clippingContextListForMask.at(i++);l._layoutChannelNo=a;l._layoutBounds.x=u*.5;l._layoutBounds.y=0;l._layoutBounds.width=.5;l._layoutBounds.height=1}}else if(n<=4){for(var s=0;s<n;s++){var u=s%2;var c=s/2;u=~~u;c=~~c;var l=this._clippingContextListForMask.at(i++);l._layoutChannelNo=a;l._layoutBounds.x=u*.5;l._layoutBounds.y=c*.5;l._layoutBounds.width=.5;l._layoutBounds.height=.5}}else if(n<=9){for(var s=0;s<n;s++){var u=s%3;var c=s/3;u=~~u;c=~~c;var l=this._clippingContextListForMask.at(i++);l._layoutChannelNo=a;l._layoutBounds.x=u/3;l._layoutBounds.y=c/3;l._layoutBounds.width=1/3;l._layoutBounds.height=1/3}}else{f.CubismLogError("not supported mask count : {0}",n)}}};t.prototype.getColorBuffer=function(){return this._colorBuffer};t.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw};t.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t};t.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize};return t}();e.CubismClippingManager_WebGL=y;var b=function(){function t(t,e){this.frameNo=t;this.texture=e}return t}();e.CubismRenderTextureResource=b;var C=function(){function t(t,e,r){this._owner=t;this._clippingIdList=e;this._clippingIdCount=r;this._allClippedDrawRect=new c.csmRect;this._layoutBounds=new c.csmRect;this._clippedDrawableIndexList=[];this._matrixForMask=new u.CubismMatrix44;this._matrixForDraw=new u.CubismMatrix44}t.prototype.release=function(){if(this._layoutBounds!=null){this._layoutBounds=null}if(this._allClippedDrawRect!=null){this._allClippedDrawRect=null}if(this._clippedDrawableIndexList!=null){this._clippedDrawableIndexList=null}};t.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)};t.prototype.getClippingManager=function(){return this._owner};t.prototype.setGl=function(t){this._owner.setGL(t)};return t}();e.CubismClippingContext=C;var S=function(){function t(){this._shaderSets=new h.csmVector}t.getInstance=function(){if(g==null){g=new t;return g}return g};t.deleteInstance=function(){if(g){g.release();g=null}};t.prototype.release=function(){this.releaseShaderProgram()};t.prototype.setupShaderProgram=function(t,e,r,i,a,n,o,s,u,l,c,h,m){if(!c){f.CubismLogError("NoPremultipliedAlpha is not allowed")}if(this._shaderSets.getSize()==0){this.generateShaders()}var p;var g;var _;var v;if(t.getClippingContextBufferForMask()!=null){var y=this._shaderSets.at(M.ShaderNames_SetupMask);this.gl.useProgram(y.shaderProgram);this.gl.activeTexture(this.gl.TEXTURE0);this.gl.bindTexture(this.gl.TEXTURE_2D,e);this.gl.uniform1i(y.samplerTexture0Location,0);if(o.vertex==null){o.vertex=this.gl.createBuffer()}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex);this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW);this.gl.enableVertexAttribArray(y.attributePositionLocation);this.gl.vertexAttribPointer(y.attributePositionLocation,2,this.gl.FLOAT,false,0,0);if(o.uv==null){o.uv=this.gl.createBuffer()}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv);this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW);this.gl.enableVertexAttribArray(y.attributeTexCoordLocation);this.gl.vertexAttribPointer(y.attributeTexCoordLocation,2,this.gl.FLOAT,false,0,0);var b=t.getClippingContextBufferForMask()._layoutChannelNo;var C=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(b);this.gl.uniform4f(y.uniformChannelFlagLocation,C.R,C.G,C.B,C.A);this.gl.uniformMatrix4fv(y.uniformClipMatrixLocation,false,t.getClippingContextBufferForMask()._matrixForMask.getArray());var S=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(y.uniformBaseColorLocation,S.x*2-1,S.y*2-1,S.getRight()*2-1,S.getBottom()*2-1);p=this.gl.ZERO;g=this.gl.ONE_MINUS_SRC_COLOR;_=this.gl.ZERO;v=this.gl.ONE_MINUS_SRC_ALPHA}else{var w=t.getClippingContextBufferForDraw()!=null;var x=w?m?2:1:0;var y=new P;switch(u){case d.CubismBlendMode.CubismBlendMode_Normal:default:y=this._shaderSets.at(M.ShaderNames_NormalPremultipliedAlpha+x);p=this.gl.ONE;g=this.gl.ONE_MINUS_SRC_ALPHA;_=this.gl.ONE;v=this.gl.ONE_MINUS_SRC_ALPHA;break;case d.CubismBlendMode.CubismBlendMode_Additive:y=this._shaderSets.at(M.ShaderNames_AddPremultipliedAlpha+x);p=this.gl.ONE;g=this.gl.ONE;_=this.gl.ZERO;v=this.gl.ONE;break;case d.CubismBlendMode.CubismBlendMode_Multiplicative:y=this._shaderSets.at(M.ShaderNames_MultPremultipliedAlpha+x);p=this.gl.DST_COLOR;g=this.gl.ONE_MINUS_SRC_ALPHA;_=this.gl.ZERO;v=this.gl.ONE;break}this.gl.useProgram(y.shaderProgram);if(o.vertex==null){o.vertex=this.gl.createBuffer()}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex);this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW);this.gl.enableVertexAttribArray(y.attributePositionLocation);this.gl.vertexAttribPointer(y.attributePositionLocation,2,this.gl.FLOAT,false,0,0);if(o.uv==null){o.uv=this.gl.createBuffer()}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv);this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW);this.gl.enableVertexAttribArray(y.attributeTexCoordLocation);this.gl.vertexAttribPointer(y.attributeTexCoordLocation,2,this.gl.FLOAT,false,0,0);if(w){this.gl.activeTexture(this.gl.TEXTURE1);var B=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,B);this.gl.uniform1i(y.samplerTexture1Location,1);this.gl.uniformMatrix4fv(y.uniformClipMatrixLocation,false,t.getClippingContextBufferForDraw()._matrixForDraw.getArray());var b=t.getClippingContextBufferForDraw()._layoutChannelNo;var C=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(b);this.gl.uniform4f(y.uniformChannelFlagLocation,C.R,C.G,C.B,C.A)}this.gl.activeTexture(this.gl.TEXTURE0);this.gl.bindTexture(this.gl.TEXTURE_2D,e);this.gl.uniform1i(y.samplerTexture0Location,0);this.gl.uniformMatrix4fv(y.uniformMatrixLocation,false,h.getArray());this.gl.uniform4f(y.uniformBaseColorLocation,l.R,l.G,l.B,l.A)}if(o.index==null){o.index=this.gl.createBuffer()}this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,o.index);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW);this.gl.blendFuncSeparate(p,g,_,v)};t.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++){this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram);this._shaderSets.at(t).shaderProgram=0;this._shaderSets.set(t,void 0);this._shaderSets.set(t,null)}};t.prototype.generateShaders=function(){for(var t=0;t<p;t++){this._shaderSets.pushBack(new P)}this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(e.vertexShaderSrcSetupMask,e.fragmentShaderSrcsetupMask);this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(e.vertexShaderSrc,e.fragmentShaderSrcPremultipliedAlpha);this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(e.vertexShaderSrcMasked,e.fragmentShaderSrcMaskPremultipliedAlpha);this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(e.vertexShaderSrcMasked,e.fragmentShaderSrcMaskInvertedPremultipliedAlpha);this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram;this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram;this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram;this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram;this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram;this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram;this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position");this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord");this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0");this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix");this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag");this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor");this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position");this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord");this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0");this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix");this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor");this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position");this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord");this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0");this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1");this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix");this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix");this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag");this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor");this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position");this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord");this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0");this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1");this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix");this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix");this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag");this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor");this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position");this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord");this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0");this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix");this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor");this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position");this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord");this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0");this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1");this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix");this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix");this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag");this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor");this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position");this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord");this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0");this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1");this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix");this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix");this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag");this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor");this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position");this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord");this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0");this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix");this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor");this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position");this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord");this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0");this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1");this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix");this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix");this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag");this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor");this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position");this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord");this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0");this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1");this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix");this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix");this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag");this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")};t.prototype.loadShaderProgram=function(t,e){var r=this.gl.createProgram();var i=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!i){f.CubismLogError("Vertex shader compile error!");return 0}var a=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);if(!a){f.CubismLogError("Vertex shader compile error!");return 0}this.gl.attachShader(r,i);this.gl.attachShader(r,a);this.gl.linkProgram(r);var n=this.gl.getProgramParameter(r,this.gl.LINK_STATUS);if(!n){f.CubismLogError("Failed to link program: {0}",r);this.gl.deleteShader(i);i=0;this.gl.deleteShader(a);a=0;if(r){this.gl.deleteProgram(r);r=0}return 0}this.gl.deleteShader(i);this.gl.deleteShader(a);return r};t.prototype.compileShaderSource=function(t,e){var r=e;var i=this.gl.createShader(t);this.gl.shaderSource(i,r);this.gl.compileShader(i);if(!i){var a=this.gl.getShaderInfoLog(i);f.CubismLogError("Shader compile log: {0} ",a)}var n=this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS);if(!n){this.gl.deleteShader(i);return null}return i};t.prototype.setGl=function(t){this.gl=t};return t}();e.CubismShader_WebGL=S;var P=function(){function t(){}return t}();e.CubismShaderSet=P;var M;(function(t){t[t["ShaderNames_SetupMask"]=0]="ShaderNames_SetupMask";t[t["ShaderNames_NormalPremultipliedAlpha"]=1]="ShaderNames_NormalPremultipliedAlpha";t[t["ShaderNames_NormalMaskedPremultipliedAlpha"]=2]="ShaderNames_NormalMaskedPremultipliedAlpha";t[t["ShaderNames_NomralMaskedInvertedPremultipliedAlpha"]=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha";t[t["ShaderNames_AddPremultipliedAlpha"]=4]="ShaderNames_AddPremultipliedAlpha";t[t["ShaderNames_AddMaskedPremultipliedAlpha"]=5]="ShaderNames_AddMaskedPremultipliedAlpha";t[t["ShaderNames_AddMaskedPremultipliedAlphaInverted"]=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted";t[t["ShaderNames_MultPremultipliedAlpha"]=7]="ShaderNames_MultPremultipliedAlpha";t[t["ShaderNames_MultMaskedPremultipliedAlpha"]=8]="ShaderNames_MultMaskedPremultipliedAlpha";t[t["ShaderNames_MultMaskedPremultipliedAlphaInverted"]=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted"})(M=e.ShaderNames||(e.ShaderNames={}));e.vertexShaderSrcSetupMask="attribute vec4     a_position;"+"attribute vec2     a_texCoord;"+"varying vec2       v_texCoord;"+"varying vec4       v_myPos;"+"uniform mat4       u_clipMatrix;"+"void main()"+"{"+"   gl_Position = u_clipMatrix * a_position;"+"   v_myPos = u_clipMatrix * a_position;"+"   v_texCoord = a_texCoord;"+"   v_texCoord.y = 1.0 - v_texCoord.y;"+"}";e.fragmentShaderSrcsetupMask="precision mediump float;"+"varying vec2       v_texCoord;"+"varying vec4       v_myPos;"+"uniform vec4       u_baseColor;"+"uniform vec4       u_channelFlag;"+"uniform sampler2D  s_texture0;"+"void main()"+"{"+"   float isInside = "+"       step(u_baseColor.x, v_myPos.x/v_myPos.w)"+"       * step(u_baseColor.y, v_myPos.y/v_myPos.w)"+"       * step(v_myPos.x/v_myPos.w, u_baseColor.z)"+"       * step(v_myPos.y/v_myPos.w, u_baseColor.w);"+"   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;"+"}";e.vertexShaderSrc="attribute vec4     a_position;"+"attribute vec2     a_texCoord;"+"varying vec2       v_texCoord;"+"uniform mat4       u_matrix;"+"void main()"+"{"+"   gl_Position = u_matrix * a_position;"+"   v_texCoord = a_texCoord;"+"   v_texCoord.y = 1.0 - v_texCoord.y;"+"}";e.vertexShaderSrcMasked="attribute vec4     a_position;"+"attribute vec2     a_texCoord;"+"varying vec2       v_texCoord;"+"varying vec4       v_clipPos;"+"uniform mat4       u_matrix;"+"uniform mat4       u_clipMatrix;"+"void main()"+"{"+"   gl_Position = u_matrix * a_position;"+"   v_clipPos = u_clipMatrix * a_position;"+"   v_texCoord = a_texCoord;"+"   v_texCoord.y = 1.0 - v_texCoord.y;"+"}";e.fragmentShaderSrcPremultipliedAlpha="precision mediump float;"+"varying vec2       v_texCoord;"+"uniform vec4       u_baseColor;"+"uniform sampler2D  s_texture0;"+"void main()"+"{"+"   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;"+"}";e.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;"+"varying vec2       v_texCoord;"+"varying vec4       v_clipPos;"+"uniform vec4       u_baseColor;"+"uniform vec4       u_channelFlag;"+"uniform sampler2D  s_texture0;"+"uniform sampler2D  s_texture1;"+"void main()"+"{"+"   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;"+"   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;"+"   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;"+"   col_formask = col_formask * maskVal;"+"   gl_FragColor = col_formask;"+"}";e.fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;"+"varying vec2 v_texCoord;"+"varying vec4 v_clipPos;"+"uniform sampler2D s_texture0;"+"uniform sampler2D s_texture1;"+"uniform vec4 u_channelFlag;"+"uniform vec4 u_baseColor;"+"void main()"+"{"+"vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;"+"vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;"+"float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;"+"col_formask = col_formask * (1.0 - maskVal);"+"gl_FragColor = col_formask;"+"}";var w=function(t){i(e,t);function e(){var e=t.call(this)||this;e._clippingContextBufferForMask=null;e._clippingContextBufferForDraw=null;e._clippingManager=new y;e.firstDraw=true;e._textures=new l.csmMap;e._sortedDrawableIndexList=new h.csmVector;e._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null};e._textures.prepareCapacity(32,true);return e}e.prototype.initialize=function(e){if(e.isUsingMasking()){this._clippingManager=new y;this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())}this._sortedDrawableIndexList.resize(e.getDrawableCount(),0);t.prototype.initialize.call(this,e)};e.prototype.bindTexture=function(t,e){this._textures.setValue(t,e)};e.prototype.getBindedTextures=function(){return this._textures};e.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release();this._clippingManager=void 0;this._clippingManager=null;this._clippingManager=new y;this._clippingManager.setClippingMaskBufferSize(t);this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())};e.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()};e.prototype.release=function(){this._clippingManager.release();this._clippingManager=void 0;this._clippingManager=null;this.gl.deleteBuffer(this._bufferData.vertex);this._bufferData.vertex=null;this.gl.deleteBuffer(this._bufferData.uv);this._bufferData.uv=null;this.gl.deleteBuffer(this._bufferData.index);this._bufferData.index=null;this._bufferData=null;this._textures=null};e.prototype.doDrawModel=function(){if(this._clippingManager!=null){this.preDraw();this._clippingManager.setupClippingContext(this.getModel(),this)}this.preDraw();var t=this.getModel().getDrawableCount();var e=this.getModel().getDrawableRenderOrders();for(var r=0;r<t;++r){var i=e[r];this._sortedDrawableIndexList.set(i,r)}for(var r=0;r<t;++r){var a=this._sortedDrawableIndexList.at(r);if(!this.getModel().getDrawableDynamicFlagIsVisible(a)){continue}this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(a):null);this.setIsCulling(this.getModel().getDrawableCulling(a));this.drawMesh(this.getModel().getDrawableTextureIndices(a),this.getModel().getDrawableVertexIndexCount(a),this.getModel().getDrawableVertexCount(a),this.getModel().getDrawableVertexIndices(a),this.getModel().getDrawableVertices(a),this.getModel().getDrawableVertexUvs(a),this.getModel().getDrawableOpacity(a),this.getModel().getDrawableBlendMode(a),this.getModel().getDrawableInvertedMaskBit(a))}};e.prototype.drawMesh=function(t,e,r,i,a,n,o,s,u){if(this.isCulling()){this.gl.enable(this.gl.CULL_FACE)}else{this.gl.disable(this.gl.CULL_FACE)}this.gl.frontFace(this.gl.CCW);var l=this.getModelColor();if(this.getClippingContextBufferForMask()==null){l.A*=o;if(this.isPremultipliedAlpha()){l.R*=l.A;l.G*=l.A;l.B*=l.A}}var c;if(this._textures.getValue(t)!=null){c=this._textures.getValue(t)}else{c=null}S.getInstance().setupShaderProgram(this,c,r,a,i,n,this._bufferData,o,s,l,this.isPremultipliedAlpha(),this.getMvpMatrix(),u);this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0);this.gl.useProgram(null);this.setClippingContextBufferForDraw(null);this.setClippingContextBufferForMask(null)};e.doStaticRelease=function(){S.deleteInstance()};e.prototype.setRenderState=function(t,e){v=t;_=e};e.prototype.preDraw=function(){if(this.firstDraw){this.firstDraw=false;this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}this.gl.disable(this.gl.SCISSOR_TEST);this.gl.disable(this.gl.STENCIL_TEST);this.gl.disable(this.gl.DEPTH_TEST);this.gl.frontFace(this.gl.CW);this.gl.enable(this.gl.BLEND);this.gl.colorMask(true,true,true,true);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)};e.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t};e.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask};e.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t};e.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw};e.prototype.startUp=function(t){this.gl=t;this._clippingManager.setGL(t);S.getInstance().setGl(t)};return e}(d.CubismRenderer);e.CubismRenderer_WebGL=w;d.CubismRenderer.staticRelease=function(){w.doStaticRelease()};var x=o(r(/*! ./cubismrenderer_webgl */"../../../Framework/src/rendering/cubismrenderer_webgl.ts"));var B;(function(t){t.CubismClippingContext=x.CubismClippingContext;t.CubismClippingManager_WebGL=x.CubismClippingManager_WebGL;t.CubismRenderTextureResource=x.CubismRenderTextureResource;t.CubismRenderer_WebGL=x.CubismRenderer_WebGL;t.CubismShaderSet=x.CubismShaderSet;t.CubismShader_WebGL=x.CubismShader_WebGL;t.ShaderNames=x.ShaderNames})(B=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/type/csmmap.ts":
/*!*********************************************!*\
  !*** ../../../Framework/src/type/csmmap.ts ***!
  \*********************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.iterator=e.csmMap=e.csmPair=void 0;var o=r(/*! ../utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var s=function(){function t(t,e){this.first=t==undefined?null:t;this.second=e==undefined?null:e}return t}();e.csmPair=s;var u=function(){function t(t){if(t!=undefined){if(t<1){this._keyValues=[];this._dummyValue=null;this._size=0}else{this._keyValues=new Array(t);this._size=t}}else{this._keyValues=[];this._dummyValue=null;this._size=0}}t.prototype.release=function(){this.clear()};t.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,false);this._keyValues[this._size]=new s(t);this._size+=1};t.prototype.getValue=function(t){var e=-1;for(var r=0;r<this._size;r++){if(this._keyValues[r].first==t){e=r;break}}if(e>=0){return this._keyValues[e].second}else{this.appendKey(t);return this._keyValues[this._size-1].second}};t.prototype.setValue=function(t,e){var r=-1;for(var i=0;i<this._size;i++){if(this._keyValues[i].first==t){r=i;break}}if(r>=0){this._keyValues[r].second=e}else{this.appendKey(t);this._keyValues[this._size-1].second=e}};t.prototype.isExist=function(t){for(var e=0;e<this._size;e++){if(this._keyValues[e].first==t){return true}}return false};t.prototype.clear=function(){this._keyValues=void 0;this._keyValues=null;this._keyValues=[];this._size=0};t.prototype.getSize=function(){return this._size};t.prototype.prepareCapacity=function(e,r){if(e>this._keyValues.length){if(this._keyValues.length==0){if(!r&&e<t.DefaultSize)e=t.DefaultSize;this._keyValues.length=e}else{if(!r&&e<this._keyValues.length*2)e=this._keyValues.length*2;this._keyValues.length=e}}};t.prototype.begin=function(){var t=new l(this,0);return t};t.prototype.end=function(){var t=new l(this,this._size);return t};t.prototype.erase=function(t){var e=t._index;if(e<0||this._size<=e){return t}this._keyValues.splice(e,1);--this._size;var r=new l(this,e);return r};t.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++){o.CubismLogDebug("{0} ,",this._keyValues[t]);o.CubismLogDebug("\n")}};t.DefaultSize=10;return t}();e.csmMap=u;var l=function(){function t(t,e){this._map=t!=undefined?t:new u;this._index=e!=undefined?e:0}t.prototype.set=function(t){this._index=t._index;this._map=t._map;return this};t.prototype.preIncrement=function(){++this._index;return this};t.prototype.preDecrement=function(){--this._index;return this};t.prototype.increment=function(){var e=new t(this._map,this._index++);return e};t.prototype.decrement=function(){var e=new t(this._map,this._index);this._map=e._map;this._index=e._index;return this};t.prototype.ptr=function(){return this._map._keyValues[this._index]};t.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map};return t}();e.iterator=l;var c=n(r(/*! ./csmmap */"../../../Framework/src/type/csmmap.ts"));var h;(function(t){t.csmMap=c.csmMap;t.csmPair=c.csmPair;t.iterator=c.iterator})(h=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/type/csmrectf.ts":
/*!***********************************************!*\
  !*** ../../../Framework/src/type/csmrectf.ts ***!
  \***********************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.csmRect=void 0;var o=function(){function t(t,e,r,i){this.x=t;this.y=e;this.width=r;this.height=i}t.prototype.getCenterX=function(){return this.x+.5*this.width};t.prototype.getCenterY=function(){return this.y+.5*this.height};t.prototype.getRight=function(){return this.x+this.width};t.prototype.getBottom=function(){return this.y+this.height};t.prototype.setRect=function(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height};t.prototype.expand=function(t,e){this.x-=t;this.y-=e;this.width+=t*2;this.height+=e*2};return t}();e.csmRect=o;var s=n(r(/*! ./csmrectf */"../../../Framework/src/type/csmrectf.ts"));var u;(function(t){t.csmRect=s.csmRect})(u=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/type/csmstring.ts":
/*!************************************************!*\
  !*** ../../../Framework/src/type/csmstring.ts ***!
  \************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.csmString=void 0;var o=function(){function t(t){this.s=t}t.prototype.append=function(t,e){this.s+=e!==undefined?t.substr(0,e):t;return this};t.prototype.expansion=function(t,e){for(var r=0;r<t;r++){this.append(e)}return this};t.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length};t.prototype.getLength=function(){return this.s.length};t.prototype.isLess=function(t){return this.s<t.s};t.prototype.isGreat=function(t){return this.s>t.s};t.prototype.isEqual=function(t){return this.s==t};t.prototype.isEmpty=function(){return this.s.length==0};return t}();e.csmString=o;var s=n(r(/*! ./csmstring */"../../../Framework/src/type/csmstring.ts"));var u;(function(t){t.csmString=s.csmString})(u=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/type/csmvector.ts":
/*!************************************************!*\
  !*** ../../../Framework/src/type/csmvector.ts ***!
  \************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.iterator=e.csmVector=void 0;var o=function(){function t(t){if(t===void 0){t=0}if(t<1){this._ptr=[];this._capacity=0;this._size=0}else{this._ptr=new Array(t);this._capacity=t;this._size=0}}t.prototype.at=function(t){return this._ptr[t]};t.prototype.set=function(t,e){this._ptr[t]=e};t.prototype.get=function(t){if(t===void 0){t=0}var e=new Array;for(var r=t;r<this._size;r++){e.push(this._ptr[r])}return e};t.prototype.pushBack=function(e){if(this._size>=this._capacity){this.prepareCapacity(this._capacity==0?t.s_defaultSize:this._capacity*2)}this._ptr[this._size++]=e};t.prototype.clear=function(){this._ptr.length=0;this._size=0};t.prototype.getSize=function(){return this._size};t.prototype.assign=function(t,e){var r=this._size;if(r<t){this.prepareCapacity(t)}for(var i=0;i<t;i++){this._ptr[i]=e}this._size=t};t.prototype.resize=function(t,e){if(e===void 0){e=null}this.updateSize(t,e,true)};t.prototype.updateSize=function(t,e,r){if(e===void 0){e=null}if(r===void 0){r=true}var i=this._size;if(i<t){this.prepareCapacity(t);if(r){for(var a=this._size;a<t;a++){if(typeof e=="function"){this._ptr[a]=JSON.parse(JSON.stringify(new e))}else{this._ptr[a]=e}}}else{for(var a=this._size;a<t;a++){this._ptr[a]=e}}}else{var n=this._size-t;this._ptr.splice(this._size-n,n)}this._size=t};t.prototype.insert=function(t,e,r){var i=t._index;var a=e._index;var n=r._index;var o=n-a;this.prepareCapacity(this._size+o);var s=this._size-i;if(s>0){for(var u=0;u<s;u++){this._ptr.splice(i+u,0,null)}}for(var u=a;u<n;u++,i++){this._ptr[i]=e._vector._ptr[u]}this._size=this._size+o};t.prototype.remove=function(t){if(t<0||this._size<=t){return false}this._ptr.splice(t,1);--this._size;return true};t.prototype.erase=function(t){var e=t._index;if(e<0||this._size<=e){return t}this._ptr.splice(e,1);--this._size;var r=new s(this,e);return r};t.prototype.prepareCapacity=function(t){if(t>this._capacity){if(this._capacity==0){this._ptr=new Array(t);this._capacity=t}else{this._ptr.length=t;this._capacity=t}}};t.prototype.begin=function(){var t=this._size==0?this.end():new s(this,0);return t};t.prototype.end=function(){var t=new s(this,this._size);return t};t.prototype.getOffset=function(e){var r=new t;r._ptr=this.get(e);r._size=this.get(e).length;r._capacity=this.get(e).length;return r};t.s_defaultSize=10;return t}();e.csmVector=o;var s=function(){function t(t,e){this._vector=t!=undefined?t:null;this._index=e!=undefined?e:0}t.prototype.set=function(t){this._index=t._index;this._vector=t._vector;return this};t.prototype.preIncrement=function(){++this._index;return this};t.prototype.preDecrement=function(){--this._index;return this};t.prototype.increment=function(){var e=new t(this._vector,this._index++);return e};t.prototype.decrement=function(){var e=new t(this._vector,this._index--);return e};t.prototype.ptr=function(){return this._vector._ptr[this._index]};t.prototype.substitution=function(t){this._index=t._index;this._vector=t._vector;return this};t.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector};return t}();e.iterator=s;var u=n(r(/*! ./csmvector */"../../../Framework/src/type/csmvector.ts"));var l;(function(t){t.csmVector=u.csmVector;t.iterator=u.iterator})(l=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/utils/cubismdebug.ts":
/*!***************************************************!*\
  !*** ../../../Framework/src/utils/cubismdebug.ts ***!
  \***************************************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.CubismDebug=e.CubismLogError=e.CubismLogWarning=e.CubismLogInfo=e.CubismLogDebug=e.CubismLogVerbose=e.CSM_ASSERT=e.CubismLogPrintIn=e.CubismLogPrint=void 0;var o=r(/*! ../cubismframeworkconfig */"../../../Framework/src/cubismframeworkconfig.ts");var s=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var u=function(t,e,r){h.print(t,"[CSM]"+e,r)};e.CubismLogPrint=u;var l=function(t,r,i){e.CubismLogPrint(t,r+"\n",i)};e.CubismLogPrintIn=l;var c=function(t){console.assert(t)};e.CSM_ASSERT=c;if(o.CSM_LOG_LEVEL<=o.CSM_LOG_LEVEL_VERBOSE){e.CubismLogVerbose=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Verbose,"[V]"+t,r)};e.CubismLogDebug=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Debug,"[D]"+t,r)};e.CubismLogInfo=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Info,"[I]"+t,r)};e.CubismLogWarning=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Warning,"[W]"+t,r)};e.CubismLogError=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Error,"[E]"+t,r)}}else if(o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_DEBUG){e.CubismLogDebug=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Debug,"[D]"+t,r)};e.CubismLogInfo=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Info,"[I]"+t,r)};e.CubismLogWarning=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Warning,"[W]"+t,r)};e.CubismLogError=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Error,"[E]"+t,r)}}else if(o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_INFO){e.CubismLogInfo=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Info,"[I]"+t,r)};e.CubismLogWarning=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Warning,"[W]"+t,r)};e.CubismLogError=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Error,"[E]"+t,r)}}else if(o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_WARNING){e.CubismLogWarning=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Warning,"[W]"+t,r)};e.CubismLogError=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Error,"[E]"+t,r)}}else if(o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_ERROR){e.CubismLogError=function(t){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}e.CubismLogPrintIn(s.LogLevel.LogLevel_Error,"[E]"+t,r)}}var h=function(){function t(){}t.print=function(t,e,r){if(t<s.CubismFramework.getLoggingLevel()){return}var i=s.CubismFramework.coreLogFunction;if(!i)return;var a=e.replace(/\{(\d+)\}/g,(function(t,e){return r[e]}));i(a)};t.dumpBytes=function(t,e,r){for(var i=0;i<r;i++){if(i%16==0&&i>0)this.print(t,"\n");else if(i%8==0&&i>0)this.print(t,"  ");this.print(t,"{0} ",[e[i]&255])}this.print(t,"\n")};return t}();e.CubismDebug=h;var f=n(r(/*! ./cubismdebug */"../../../Framework/src/utils/cubismdebug.ts"));var d;(function(t){t.CubismDebug=f.CubismDebug})(d=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"../../../Framework/src/utils/cubismjson.ts":
/*!**************************************************!*\
  !*** ../../../Framework/src/utils/cubismjson.ts ***!
  \**************************************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.Live2DCubismFramework=e.JsonMap=e.JsonArray=e.JsonNullvalue=e.JsonError=e.JsonString=e.JsonBoolean=e.JsonFloat=e.CubismJson=e.Value=void 0;var s=r(/*! ../live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var u=r(/*! ../type/csmmap */"../../../Framework/src/type/csmmap.ts");var l=r(/*! ../type/csmstring */"../../../Framework/src/type/csmstring.ts");var c=r(/*! ../type/csmvector */"../../../Framework/src/type/csmvector.ts");var h=r(/*! ./cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var f="Error: type mismatch";var d="Error: index out of bounds";var m=function(){function t(){}t.prototype.getRawString=function(t,e){return this.getString(t,e)};t.prototype.toInt=function(t){if(t===void 0){t=0}return t};t.prototype.toFloat=function(t){if(t===void 0){t=0}return t};t.prototype.toBoolean=function(t){if(t===void 0){t=false}return t};t.prototype.getSize=function(){return 0};t.prototype.getArray=function(t){if(t===void 0){t=null}return t};t.prototype.getVector=function(t){return t};t.prototype.getMap=function(t){return t};t.prototype.getValueByIndex=function(e){return t.errorValue.setErrorNotForClientCall(f)};t.prototype.getValueByString=function(e){return t.nullValue.setErrorNotForClientCall(f)};t.prototype.getKeys=function(){return t.s_dummyKeys};t.prototype.isError=function(){return false};t.prototype.isNull=function(){return false};t.prototype.isBool=function(){return false};t.prototype.isFloat=function(){return false};t.prototype.isString=function(){return false};t.prototype.isArray=function(){return false};t.prototype.isMap=function(){return false};t.prototype.equals=function(t){return false};t.prototype.isStatic=function(){return false};t.prototype.setErrorNotForClientCall=function(t){return y.errorValue};t.staticInitializeNotForClientCall=function(){_.trueValue=new _(true);_.falseValue=new _(false);y.errorValue=new y("ERROR",true);this.nullValue=new b;t.s_dummyKeys=new c.csmVector};t.staticReleaseNotForClientCall=function(){_.trueValue=null;_.falseValue=null;y.errorValue=null;t.nullValue=null;t.s_dummyKeys=null;_.trueValue=null;_.falseValue=null;y.errorValue=null;t.nullValue=null;t.s_dummyKeys=null};return t}();e.Value=m;var p=function(){function t(t,e){this._error=null;this._lineCount=0;this._root=null;if(t!=undefined){this.parseBytes(t,e)}}t.create=function(e,r){var i=new t;var a=i.parseBytes(e,r);if(!a){t.delete(i);return null}else{return i}};t.delete=function(t){t=null};t.prototype.getRoot=function(){return this._root};t.prototype.arrayBufferToString=function(t){var e=new Uint8Array(t);var r="";for(var i=0,a=e.length;i<a;++i){r+="%"+this.pad(e[i].toString(16))}r=decodeURIComponent(r);return r};t.prototype.pad=function(t){return t.length<2?"0"+t:t};t.prototype.parseBytes=function(t,e){var r=new Array(1);var i=this.arrayBufferToString(t);this._root=this.parseValue(i,e,0,r);if(this._error){var a="\0";a="Json parse error : @line "+(this._lineCount+1)+"\n";this._root=new v(a);h.CubismLogInfo("{0}",this._root.getRawString());return false}else if(this._root==null){this._root=new y(new l.csmString(this._error),false);return false}return true};t.prototype.getParseError=function(){return this._error};t.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")};t.prototype.parseValue=function(t,e,r,i){if(this._error)return null;var a=null;var n=r;var o;for(;n<e;n++){var u=t[n];switch(u){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{var l=new Array(1);o=s.strtod(t.slice(n),l);i[0]=t.indexOf(l[0]);return new g(o)}case'"':return new v(this.parseString(t,e,n+1,i));case"[":a=this.parseArray(t,e,n+1,i);return a;case"{":a=this.parseObject(t,e,n+1,i);return a;case"n":if(n+3<e){a=new b;i[0]=n+4}else{this._error="parse null"}return a;case"t":if(n+3<e){a=_.trueValue;i[0]=n+4}else{this._error="parse true"}return a;case"f":if(n+4<e){a=_.falseValue;i[0]=n+5}else{this._error="illegal ',' position"}return a;case",":this._error="illegal ',' position";return null;case"]":i[0]=n;return null;case"\n":this._lineCount++;case" ":case"\t":case"\r":default:break}}this._error="illegal end of value";return null};t.prototype.parseString=function(t,e,r,i){if(this._error)return null;var a=r;var n,o;var s=new l.csmString("");var u=r;for(;a<e;a++){n=t[a];switch(n){case'"':{i[0]=a+1;s.append(t.slice(u),a-u);return s.s}case"//":{a++;if(a-1>u){s.append(t.slice(u),a-u)}u=a+1;if(a<e){o=t[a];switch(o){case"\\":s.expansion(1,"\\");break;case'"':s.expansion(1,'"');break;case"/":s.expansion(1,"/");break;case"b":s.expansion(1,"\b");break;case"f":s.expansion(1,"\f");break;case"n":s.expansion(1,"\n");break;case"r":s.expansion(1,"\r");break;case"t":s.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported";break;default:break}}else{this._error="parse string/escape error"}}default:{break}}}this._error="parse string/illegal end";return null};t.prototype.parseObject=function(t,e,r,i){if(this._error)return null;var a=new S;var n="";var o=r;var s="";var u=Array(1);var l=false;for(;o<e;o++){t:for(;o<e;o++){s=t[o];switch(s){case'"':n=this.parseString(t,e,o+1,u);if(this._error){return null}o=u[0];l=true;break t;case"}":i[0]=o+1;return a;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++;default:break}}if(!l){this._error="key not found";return null}l=false;t:for(;o<e;o++){s=t[o];switch(s){case":":l=true;o++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++;default:break}}if(!l){this._error="':' not found";return null}var c=this.parseValue(t,e,o,u);if(this._error){return null}o=u[0];a.put(n,c);t:for(;o<e;o++){s=t[o];switch(s){case",":break t;case"}":i[0]=o+1;return a;case"\n":this._lineCount++;default:break}}}this._error="illegal end of perseObject";return null};t.prototype.parseArray=function(t,e,r,i){if(this._error)return null;var a=new C;var n=r;var o;var s=new Array(1);for(;n<e;n++){var u=this.parseValue(t,e,n,s);if(this._error){return null}n=s[0];if(u){a.add(u)}t:for(;n<e;n++){o=t[n];switch(o){case",":break t;case"]":i[0]=n+1;return a;case"\n":++this._lineCount;default:break}}}a=void 0;this._error="illegal end of parseObject";return null};return t}();e.CubismJson=p;var g=function(t){i(e,t);function e(e){var r=t.call(this)||this;r._value=e;return r}e.prototype.isFloat=function(){return true};e.prototype.getString=function(t,e){var r="\0";this._value=parseFloat(r);this._stringBuffer=r;return this._stringBuffer};e.prototype.toInt=function(t){if(t===void 0){t=0}return parseInt(this._value.toString())};e.prototype.toFloat=function(t){if(t===void 0){t=0}return this._value};e.prototype.equals=function(t){if("number"===typeof t){if(Math.round(t)){return false}else{return t==this._value}}return false};return e}(m);e.JsonFloat=g;var _=function(t){i(e,t);function e(e){var r=t.call(this)||this;r._boolValue=e;return r}e.prototype.isBool=function(){return true};e.prototype.toBoolean=function(t){if(t===void 0){t=false}return this._boolValue};e.prototype.getString=function(t,e){this._stringBuffer=this._boolValue?"true":"false";return this._stringBuffer};e.prototype.equals=function(t){if("boolean"===typeof t){return t==this._boolValue}return false};e.prototype.isStatic=function(){return true};return e}(m);e.JsonBoolean=_;var v=function(t){i(e,t);function e(e){var r=t.call(this)||this;if("string"===typeof e){r._stringBuffer=e}if(e instanceof l.csmString){r._stringBuffer=e.s}return r}e.prototype.isString=function(){return true};e.prototype.getString=function(t,e){return this._stringBuffer};e.prototype.equals=function(t){if("string"===typeof t){return this._stringBuffer==t}if(t instanceof l.csmString){return this._stringBuffer==t.s}return false};return e}(m);e.JsonString=v;var y=function(t){i(e,t);function e(e,r){var i=this;if("string"===typeof e){i=t.call(this,e)||this}else{i=t.call(this,e)||this}i._isStatic=r;return i}e.prototype.isStatic=function(){return this._isStatic};e.prototype.setErrorNotForClientCall=function(t){this._stringBuffer=t;return this};e.prototype.isError=function(){return true};return e}(v);e.JsonError=y;var b=function(t){i(e,t);function e(){var e=t.call(this)||this;e._stringBuffer="NullValue";return e}e.prototype.isNull=function(){return true};e.prototype.getString=function(t,e){return this._stringBuffer};e.prototype.isStatic=function(){return true};return e}(m);e.JsonNullvalue=b;var C=function(t){i(e,t);function e(){var e=t.call(this)||this;e._array=new c.csmVector;return e}e.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var e=t.ptr();if(e&&!e.isStatic()){e=void 0;e=null}}};e.prototype.isArray=function(){return true};e.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t){return m.errorValue.setErrorNotForClientCall(d)}var e=this._array.at(t);if(e==null){return m.nullValue}return e};e.prototype.getValueByString=function(t){return m.errorValue.setErrorNotForClientCall(f)};e.prototype.getString=function(t,e){var r=e+"[\n";for(var i=this._array.begin();i.notEqual(this._array.end());i.increment()){var a=i.ptr();this._stringBuffer+=e+""+a.getString(e+" ")+"\n"}this._stringBuffer=r+e+"]\n";return this._stringBuffer};e.prototype.add=function(t){this._array.pushBack(t)};e.prototype.getVector=function(t){if(t===void 0){t=null}return this._array};e.prototype.getSize=function(){return this._array.getSize()};return e}(m);e.JsonArray=C;var S=function(t){i(e,t);function e(){var e=t.call(this)||this;e._map=new u.csmMap;return e}e.prototype.release=function(){var t=this._map.begin();while(t.notEqual(this._map.end())){var e=t.ptr().second;if(e&&!e.isStatic()){e=void 0;e=null}t.preIncrement()}};e.prototype.isMap=function(){return true};e.prototype.getValueByString=function(t){if(t instanceof l.csmString){var e=this._map.getValue(t.s);if(e==null){return m.nullValue}return e}for(var r=this._map.begin();r.notEqual(this._map.end());r.preIncrement()){if(r.ptr().first==t){if(r.ptr().second==null){return m.nullValue}return r.ptr().second}}return m.nullValue};e.prototype.getValueByIndex=function(t){return m.errorValue.setErrorNotForClientCall(f)};e.prototype.getString=function(t,e){this._stringBuffer=e+"{\n";var r=this._map.begin();while(r.notEqual(this._map.end())){var i=r.ptr().first;var a=r.ptr().second;this._stringBuffer+=e+" "+i+" : "+a.getString(e+"   ")+" \n";r.preIncrement()}this._stringBuffer+=e+"}\n";return this._stringBuffer};e.prototype.getMap=function(t){return this._map};e.prototype.put=function(t,e){this._map.setValue(t,e)};e.prototype.getKeys=function(){if(!this._keys){this._keys=new c.csmVector;var t=this._map.begin();while(t.notEqual(this._map.end())){var e=t.ptr().first;this._keys.pushBack(e);t.preIncrement()}}return this._keys};e.prototype.getSize=function(){return this._keys.getSize()};return e}(m);e.JsonMap=S;var P=o(r(/*! ./cubismjson */"../../../Framework/src/utils/cubismjson.ts"));var M;(function(t){t.CubismJson=P.CubismJson;t.JsonArray=P.JsonArray;t.JsonBoolean=P.JsonBoolean;t.JsonError=P.JsonError;t.JsonFloat=P.JsonFloat;t.JsonMap=P.JsonMap;t.JsonNullvalue=P.JsonNullvalue;t.JsonString=P.JsonString;t.Value=P.Value})(M=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},"./src/lappdefine.ts":
/*!***************************!*\
  !*** ./src/lappdefine.ts ***!
  \***************************/function(t,e,r){Object.defineProperty(e,"__esModule",{value:true});e.RenderTargetHeight=e.RenderTargetWidth=e.CubismLoggingLevel=e.DebugTouchLogEnable=e.DebugLogEnable=e.PriorityForce=e.PriorityNormal=e.PriorityIdle=e.PriorityNone=e.HitAreaNameBody=e.HitAreaNameHead=e.MotionGroupTapBody=e.MotionGroupIdle=e.ModelDirSize=e.ModelDir=e.PowerImageName=e.GearImageName=e.BackImageName=e.ResourcesPath=e.ViewLogicalMaxTop=e.ViewLogicalMaxBottom=e.ViewLogicalMaxRight=e.ViewLogicalMaxLeft=e.ViewLogicalTop=e.ViewLogicalBottom=e.ViewLogicalRight=e.ViewLogicalLeft=e.ViewMinScale=e.ViewMaxScale=e.ViewScale=e.CanvasSize=void 0;var i=r(/*! @framework/live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");e.CanvasSize="auto";e.ViewScale=1;e.ViewMaxScale=2;e.ViewMinScale=.8;e.ViewLogicalLeft=-1;e.ViewLogicalRight=1;e.ViewLogicalBottom=-1;e.ViewLogicalTop=1;e.ViewLogicalMaxLeft=-2;e.ViewLogicalMaxRight=2;e.ViewLogicalMaxBottom=-2;e.ViewLogicalMaxTop=2;e.ResourcesPath="../../Resources/";e.BackImageName="";e.GearImageName="";e.PowerImageName="";e.ModelDir=["Diana"];e.ModelDirSize=e.ModelDir.length;e.MotionGroupIdle="Idle";e.MotionGroupTapBody="TapBody";e.HitAreaNameHead="Head";e.HitAreaNameBody="Body";e.PriorityNone=0;e.PriorityIdle=1;e.PriorityNormal=2;e.PriorityForce=3;e.DebugLogEnable=true;e.DebugTouchLogEnable=false;e.CubismLoggingLevel=i.LogLevel.LogLevel_Verbose;e.RenderTargetWidth=1900;e.RenderTargetHeight=1e3},"./src/lappdelegate.ts":
/*!*****************************!*\
  !*** ./src/lappdelegate.ts ***!
  \*****************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.LAppDelegate=e.frameBuffer=e.gl=e.s_instance=e.canvas=void 0;var o=r(/*! @framework/live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var s=n(r(/*! ./lappdefine */"./src/lappdefine.ts"));var u=r(/*! ./lapplive2dmanager */"./src/lapplive2dmanager.ts");var l=r(/*! ./lapppal */"./src/lapppal.ts");var c=r(/*! ./lapptexturemanager */"./src/lapptexturemanager.ts");var h=r(/*! ./lappview */"./src/lappview.ts");e.canvas=null;e.s_instance=null;e.gl=null;e.frameBuffer=null;var f=function(){function t(){this._captured=false;this._mouseX=0;this._mouseY=0;this._isEnd=false;this._cubismOption=new o.Option;this._view=new h.LAppView;this._textureManager=new c.LAppTextureManager}t.getInstance=function(){if(e.s_instance==null){e.s_instance=new t}return e.s_instance};t.releaseInstance=function(){if(e.s_instance!=null){e.s_instance.release()}e.s_instance=null};t.prototype.initialize=function(){e.canvas=document.createElement("canvas");if(s.CanvasSize==="auto"){this._resizeCanvas()}else{e.canvas.width=s.CanvasSize.width;e.canvas.height=s.CanvasSize.height}e.gl=e.canvas.getContext("webgl")||e.canvas.getContext("experimental-webgl");if(!e.gl){alert("Cannot initialize WebGL. This browser does not support.");e.gl=null;document.body.innerHTML="This browser does not support the <code>&lt;canvas&gt;</code> element.";return false}document.body.appendChild(e.canvas);if(!e.frameBuffer){e.frameBuffer=e.gl.getParameter(e.gl.FRAMEBUFFER_BINDING)}e.gl.enable(e.gl.BLEND);e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA);var t="ontouchend"in e.canvas;if(t){e.canvas.ontouchstart=g;e.canvas.ontouchmove=_;e.canvas.ontouchend=v;e.canvas.ontouchcancel=y}else{e.canvas.onmousedown=d;e.canvas.onmousemove=m;e.canvas.onmouseup=p}this._view.initialize();this.initializeCubism();return true};t.prototype.onResize=function(){this._resizeCanvas();this._view.initialize();this._view.initializeSprite()};t.prototype.release=function(){this._textureManager.release();this._textureManager=null;this._view.release();this._view=null;u.LAppLive2DManager.releaseInstance();o.CubismFramework.dispose()};t.prototype.run=function(){var t=this;var r=function(){if(e.s_instance==null){return}l.LAppPal.updateTime();e.gl.clearColor(0,0,0,1);e.gl.enable(e.gl.DEPTH_TEST);e.gl.depthFunc(e.gl.LEQUAL);e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT);e.gl.clearDepth(1);e.gl.enable(e.gl.BLEND);e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA);t._view.render();requestAnimationFrame(r)};r()};t.prototype.createShader=function(){var t=e.gl.createShader(e.gl.VERTEX_SHADER);if(t==null){l.LAppPal.printMessage("failed to create vertexShader");return null}var r="precision mediump float;"+"attribute vec3 position;"+"attribute vec2 uv;"+"varying vec2 vuv;"+"void main(void)"+"{"+"   gl_Position = vec4(position, 1.0);"+"   vuv = uv;"+"}";e.gl.shaderSource(t,r);e.gl.compileShader(t);var i=e.gl.createShader(e.gl.FRAGMENT_SHADER);if(i==null){l.LAppPal.printMessage("failed to create fragmentShader");return null}var a="precision mediump float;"+"varying vec2 vuv;"+"uniform sampler2D texture;"+"void main(void)"+"{"+"   gl_FragColor = texture2D(texture, vuv);"+"}";e.gl.shaderSource(i,a);e.gl.compileShader(i);var n=e.gl.createProgram();e.gl.attachShader(n,t);e.gl.attachShader(n,i);e.gl.deleteShader(t);e.gl.deleteShader(i);e.gl.linkProgram(n);e.gl.useProgram(n);return n};t.prototype.getView=function(){return this._view};t.prototype.getTextureManager=function(){return this._textureManager};t.prototype.initializeCubism=function(){this._cubismOption.logFunction=l.LAppPal.printMessage;this._cubismOption.loggingLevel=s.CubismLoggingLevel;o.CubismFramework.startUp(this._cubismOption);o.CubismFramework.initialize();u.LAppLive2DManager.getInstance();l.LAppPal.updateTime();this._view.initializeSprite()};t.prototype._resizeCanvas=function(){e.canvas.width=window.innerWidth;e.canvas.height=window.innerHeight};return t}();e.LAppDelegate=f;function d(t){if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}f.getInstance()._captured=true;var e=t.pageX;var r=t.pageY;f.getInstance()._view.onTouchesBegan(e,r)}function m(t){if(!f.getInstance()._captured){return}if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}var e=t.target.getBoundingClientRect();var r=t.clientX-e.left;var i=t.clientY-e.top;f.getInstance()._view.onTouchesMoved(r,i)}function p(t){f.getInstance()._captured=false;if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}var e=t.target.getBoundingClientRect();var r=t.clientX-e.left;var i=t.clientY-e.top;f.getInstance()._view.onTouchesEnded(r,i)}function g(t){if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}f.getInstance()._captured=true;var e=t.changedTouches[0].pageX;var r=t.changedTouches[0].pageY;f.getInstance()._view.onTouchesBegan(e,r)}function _(t){if(!f.getInstance()._captured){return}if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}var e=t.target.getBoundingClientRect();var r=t.changedTouches[0].clientX-e.left;var i=t.changedTouches[0].clientY-e.top;f.getInstance()._view.onTouchesMoved(r,i)}function v(t){f.getInstance()._captured=false;if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}var e=t.target.getBoundingClientRect();var r=t.changedTouches[0].clientX-e.left;var i=t.changedTouches[0].clientY-e.top;f.getInstance()._view.onTouchesEnded(r,i)}function y(t){f.getInstance()._captured=false;if(!f.getInstance()._view){l.LAppPal.printMessage("view notfound");return}var e=t.target.getBoundingClientRect();var r=t.changedTouches[0].clientX-e.left;var i=t.changedTouches[0].clientY-e.top;f.getInstance()._view.onTouchesEnded(r,i)}},"./src/lapplive2dmanager.ts":
/*!**********************************!*\
  !*** ./src/lapplive2dmanager.ts ***!
  \**********************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.LAppLive2DManager=e.s_instance=void 0;var o=r(/*! @framework/math/cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var s=r(/*! @framework/type/csmvector */"../../../Framework/src/type/csmvector.ts");var u=n(r(/*! ./lappdefine */"./src/lappdefine.ts"));var l=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var c=r(/*! ./lappmodel */"./src/lappmodel.ts");var h=r(/*! ./lapppal */"./src/lapppal.ts");e.s_instance=null;var f=function(){function t(){this._finishedMotion=function(t){h.LAppPal.printMessage("Motion Finished:");console.log(t)};this._viewMatrix=new o.CubismMatrix44;this._models=new s.csmVector;this._sceneIndex=0;this.changeScene(this._sceneIndex)}t.getInstance=function(){if(e.s_instance==null){e.s_instance=new t}return e.s_instance};t.releaseInstance=function(){if(e.s_instance!=null){e.s_instance=void 0}e.s_instance=null};t.prototype.getModel=function(t){if(t<this._models.getSize()){return this._models.at(t)}return null};t.prototype.releaseAllModel=function(){for(var t=0;t<this._models.getSize();t++){this._models.at(t).release();this._models.set(t,null)}this._models.clear()};t.prototype.onDrag=function(t,e){for(var r=0;r<this._models.getSize();r++){var i=this.getModel(r);if(i){i.setDragging(t,e)}}};t.prototype.onTap=function(t,e){if(u.DebugLogEnable){h.LAppPal.printMessage("[APP]tap point: {x: "+t.toFixed(2)+" y: "+e.toFixed(2)+"}")}for(var r=0;r<this._models.getSize();r++){if(this._models.at(r).hitTest(u.HitAreaNameHead,t,e)){if(u.DebugLogEnable){h.LAppPal.printMessage("[APP]hit area: ["+u.HitAreaNameHead+"]")}this._models.at(r).setRandomExpression()}else if(this._models.at(r).hitTest(u.HitAreaNameBody,t,e)){if(u.DebugLogEnable){h.LAppPal.printMessage("[APP]hit area: ["+u.HitAreaNameBody+"]")}this._models.at(r).startRandomMotion(u.MotionGroupTapBody,u.PriorityNormal,this._finishedMotion)}}};t.prototype.onUpdate=function(){var t=l.canvas.width,e=l.canvas.height;var r=new o.CubismMatrix44;var i=this._models.getSize();for(var a=0;a<i;++a){var n=this.getModel(a);if(n.getModel()){if(n.getModel().getCanvasWidth()>1&&t<e){n.getModelMatrix().setWidth(2);r.scale(1,t/e)}else{r.scale(e/t,1)}if(this._viewMatrix!=null){r.multiplyByMatrix(this._viewMatrix)}}n.update();n.draw(r)}};t.prototype.nextScene=function(){var t=(this._sceneIndex+1)%u.ModelDirSize;this.changeScene(t)};t.prototype.changeScene=function(t){this._sceneIndex=t;if(u.DebugLogEnable){h.LAppPal.printMessage("[APP]model index: "+this._sceneIndex)}var e=u.ModelDir[t];var r=u.ResourcesPath+e+"/";var i=u.ModelDir[t];i+=".model3.json";this.releaseAllModel();this._models.pushBack(new c.LAppModel);this._models.at(0).loadAssets(r,i)};t.prototype.setViewMatrix=function(t){for(var e=0;e<16;e++){this._viewMatrix.getArray()[e]=t.getArray()[e]}};return t}();e.LAppLive2DManager=f},"./src/lappmodel.ts":
/*!**************************!*\
  !*** ./src/lappmodel.ts ***!
  \**************************/function(t,e,r){var i=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();var a=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))a(e,t,r);n(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.LAppModel=void 0;r(/*! whatwg-fetch */"./node_modules/whatwg-fetch/fetch.js");var s=r(/*! @framework/cubismdefaultparameterid */"../../../Framework/src/cubismdefaultparameterid.ts");var u=r(/*! @framework/cubismmodelsettingjson */"../../../Framework/src/cubismmodelsettingjson.ts");var l=r(/*! @framework/effect/cubismbreath */"../../../Framework/src/effect/cubismbreath.ts");var c=r(/*! @framework/effect/cubismeyeblink */"../../../Framework/src/effect/cubismeyeblink.ts");var h=r(/*! @framework/live2dcubismframework */"../../../Framework/src/live2dcubismframework.ts");var f=r(/*! @framework/model/cubismusermodel */"../../../Framework/src/model/cubismusermodel.ts");var d=r(/*! @framework/motion/acubismmotion */"../../../Framework/src/motion/acubismmotion.ts");var m=r(/*! @framework/motion/cubismmotionqueuemanager */"../../../Framework/src/motion/cubismmotionqueuemanager.ts");var p=r(/*! @framework/type/csmmap */"../../../Framework/src/type/csmmap.ts");var g=r(/*! @framework/type/csmvector */"../../../Framework/src/type/csmvector.ts");var _=r(/*! @framework/utils/cubismdebug */"../../../Framework/src/utils/cubismdebug.ts");var v=o(r(/*! ./lappdefine */"./src/lappdefine.ts"));var y=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var b=r(/*! ./lapppal */"./src/lapppal.ts");var C=r(/*! ./lappwavfilehandler */"./src/lappwavfilehandler.ts");var S;(function(t){t[t["LoadAssets"]=0]="LoadAssets";t[t["LoadModel"]=1]="LoadModel";t[t["WaitLoadModel"]=2]="WaitLoadModel";t[t["LoadExpression"]=3]="LoadExpression";t[t["WaitLoadExpression"]=4]="WaitLoadExpression";t[t["LoadPhysics"]=5]="LoadPhysics";t[t["WaitLoadPhysics"]=6]="WaitLoadPhysics";t[t["LoadPose"]=7]="LoadPose";t[t["WaitLoadPose"]=8]="WaitLoadPose";t[t["SetupEyeBlink"]=9]="SetupEyeBlink";t[t["SetupBreath"]=10]="SetupBreath";t[t["LoadUserData"]=11]="LoadUserData";t[t["WaitLoadUserData"]=12]="WaitLoadUserData";t[t["SetupEyeBlinkIds"]=13]="SetupEyeBlinkIds";t[t["SetupLipSyncIds"]=14]="SetupLipSyncIds";t[t["SetupLayout"]=15]="SetupLayout";t[t["LoadMotion"]=16]="LoadMotion";t[t["WaitLoadMotion"]=17]="WaitLoadMotion";t[t["CompleteInitialize"]=18]="CompleteInitialize";t[t["CompleteSetupModel"]=19]="CompleteSetupModel";t[t["LoadTexture"]=20]="LoadTexture";t[t["WaitLoadTexture"]=21]="WaitLoadTexture";t[t["CompleteSetup"]=22]="CompleteSetup"})(S||(S={}));var P=function(t){i(e,t);function e(){var e=t.call(this)||this;e._modelSetting=null;e._modelHomeDir=null;e._userTimeSeconds=0;e._eyeBlinkIds=new g.csmVector;e._lipSyncIds=new g.csmVector;e._motions=new p.csmMap;e._expressions=new p.csmMap;e._hitArea=new g.csmVector;e._userArea=new g.csmVector;e._idParamAngleX=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamAngleX);e._idParamAngleY=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamAngleY);e._idParamAngleZ=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamAngleZ);e._idParamEyeBallX=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamEyeBallX);e._idParamEyeBallY=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamEyeBallY);e._idParamBodyAngleX=h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamBodyAngleX);e._state=S.LoadAssets;e._expressionCount=0;e._textureCount=0;e._motionCount=0;e._allMotionCount=0;e._wavFileHandler=new C.LAppWavFileHandler;return e}e.prototype.loadAssets=function(t,e){var r=this;this._modelHomeDir=t;fetch(""+this._modelHomeDir+e).then((function(t){return t.arrayBuffer()})).then((function(t){var e=new u.CubismModelSettingJson(t,t.byteLength);r._state=S.LoadModel;r.setupModel(e)}))};e.prototype.setupModel=function(t){var e=this;this._updating=true;this._initialized=false;this._modelSetting=t;if(this._modelSetting.getModelFileName()!=""){var r=this._modelSetting.getModelFileName();fetch(""+this._modelHomeDir+r).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadModel(t);e._state=S.LoadExpression;i()}));this._state=S.WaitLoadModel}else{b.LAppPal.printMessage("Model data does not exist.")}var i=function(){if(e._modelSetting.getExpressionCount()>0){var t=e._modelSetting.getExpressionCount();var r=function(r){var i=e._modelSetting.getExpressionName(r);var n=e._modelSetting.getExpressionFileName(r);fetch(""+e._modelHomeDir+n).then((function(t){return t.arrayBuffer()})).then((function(r){var n=e.loadExpression(r,r.byteLength,i);if(e._expressions.getValue(i)!=null){d.ACubismMotion.delete(e._expressions.getValue(i));e._expressions.setValue(i,null)}e._expressions.setValue(i,n);e._expressionCount++;if(e._expressionCount>=t){e._state=S.LoadPhysics;a()}}))};for(var i=0;i<t;i++){r(i)}e._state=S.WaitLoadExpression}else{e._state=S.LoadPhysics;a()}};var a=function(){if(e._modelSetting.getPhysicsFileName()!=""){var t=e._modelSetting.getPhysicsFileName();fetch(""+e._modelHomeDir+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadPhysics(t,t.byteLength);e._state=S.LoadPose;n()}));e._state=S.WaitLoadPhysics}else{e._state=S.LoadPose;n()}};var n=function(){if(e._modelSetting.getPoseFileName()!=""){var t=e._modelSetting.getPoseFileName();fetch(""+e._modelHomeDir+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadPose(t,t.byteLength);e._state=S.SetupEyeBlink;o()}));e._state=S.WaitLoadPose}else{e._state=S.SetupEyeBlink;o()}};var o=function(){if(e._modelSetting.getEyeBlinkParameterCount()>0){e._eyeBlink=c.CubismEyeBlink.create(e._modelSetting);e._state=S.SetupBreath}u()};var u=function(){e._breath=l.CubismBreath.create();var t=new g.csmVector;t.pushBack(new l.BreathParameterData(e._idParamAngleX,0,15,6.5345,.5));t.pushBack(new l.BreathParameterData(e._idParamAngleY,0,8,3.5345,.5));t.pushBack(new l.BreathParameterData(e._idParamAngleZ,0,10,5.5345,.5));t.pushBack(new l.BreathParameterData(e._idParamBodyAngleX,0,4,15.5345,.5));t.pushBack(new l.BreathParameterData(h.CubismFramework.getIdManager().getId(s.CubismDefaultParameterId.ParamBreath),0,.5,3.2345,.5));e._breath.setParameters(t);e._state=S.LoadUserData;f()};var f=function(){if(e._modelSetting.getUserDataFile()!=""){var t=e._modelSetting.getUserDataFile();fetch(""+e._modelHomeDir+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadUserData(t,t.byteLength);e._state=S.SetupEyeBlinkIds;m()}));e._state=S.WaitLoadUserData}else{e._state=S.SetupEyeBlinkIds;m()}};var m=function(){var t=e._modelSetting.getEyeBlinkParameterCount();for(var r=0;r<t;++r){e._eyeBlinkIds.pushBack(e._modelSetting.getEyeBlinkParameterId(r))}e._state=S.SetupLipSyncIds;_()};var _=function(){var t=e._modelSetting.getLipSyncParameterCount();for(var r=0;r<t;++r){e._lipSyncIds.pushBack(e._modelSetting.getLipSyncParameterId(r))}e._state=S.SetupLayout;v()};var v=function(){var t=new p.csmMap;e._modelSetting.getLayoutMap(t);e._modelMatrix.setupFromLayout(t);e._state=S.LoadMotion;C()};var C=function(){e._state=S.WaitLoadMotion;e._model.saveParameters();e._allMotionCount=0;e._motionCount=0;var t=[];var r=e._modelSetting.getMotionGroupCount();for(var i=0;i<r;i++){t[i]=e._modelSetting.getMotionGroupName(i);e._allMotionCount+=e._modelSetting.getMotionCount(t[i])}for(var i=0;i<r;i++){e.preLoadMotionGroup(t[i])}if(r==0){e._state=S.LoadTexture;e._motionManager.stopAllMotions();e._updating=false;e._initialized=true;e.createRenderer();e.setupTextures();e.getRenderer().startUp(y.gl)}}};e.prototype.setupTextures=function(){var t=this;var e=true;if(this._state==S.LoadTexture){var r=this._modelSetting.getTextureCount();var i=function(i){if(a._modelSetting.getTextureFileName(i)==""){console.log("getTextureFileName null");return"continue"}var n=a._modelSetting.getTextureFileName(i);n=a._modelHomeDir+n;var o=function(e){t.getRenderer().bindTexture(i,e.id);t._textureCount++;if(t._textureCount>=r){t._state=S.CompleteSetup}};y.LAppDelegate.getInstance().getTextureManager().createTextureFromPngFile(n,e,o);a.getRenderer().setIsPremultipliedAlpha(e)};var a=this;for(var n=0;n<r;n++){i(n)}this._state=S.WaitLoadTexture}};e.prototype.reloadRenderer=function(){this.deleteRenderer();this.createRenderer();this.setupTextures()};e.prototype.update=function(){if(this._state!=S.CompleteSetup)return;var t=b.LAppPal.getDeltaTime();this._userTimeSeconds+=t;this._dragManager.update(t);this._dragX=this._dragManager.getX();this._dragY=this._dragManager.getY();var e=false;this._model.loadParameters();if(this._motionManager.isFinished()){this.startRandomMotion(v.MotionGroupIdle,v.PriorityIdle)}else{e=this._motionManager.updateMotion(this._model,t)}this._model.saveParameters();if(!e){if(this._eyeBlink!=null){this._eyeBlink.updateParameters(this._model,t)}}if(this._expressionManager!=null){this._expressionManager.updateMotion(this._model,t)}this._model.addParameterValueById(this._idParamAngleX,this._dragX*30);this._model.addParameterValueById(this._idParamAngleY,this._dragY*30);this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30);this._model.addParameterValueById(this._idParamBodyAngleX,this._dragX*10);this._model.addParameterValueById(this._idParamEyeBallX,this._dragX);this._model.addParameterValueById(this._idParamEyeBallY,this._dragY);if(this._breath!=null){this._breath.updateParameters(this._model,t)}if(this._physics!=null){this._physics.evaluate(this._model,t)}if(this._lipsync){var r=0;this._wavFileHandler.update(t);r=this._wavFileHandler.getRms();for(var i=0;i<this._lipSyncIds.getSize();++i){this._model.addParameterValueById(this._lipSyncIds.at(i),r,.8)}}if(this._pose!=null){this._pose.updateParameters(this._model,t)}this._model.update()};e.prototype.startMotion=function(t,e,r,i){var a=this;if(r==v.PriorityForce){this._motionManager.setReservePriority(r)}else if(!this._motionManager.reserveMotion(r)){if(this._debugMode){b.LAppPal.printMessage("[APP]can't start motion.")}return m.InvalidMotionQueueEntryHandleValue}var n=this._modelSetting.getMotionFileName(t,e);var o=t+"_"+e;var s=this._motions.getValue(o);var u=false;if(s==null){fetch(""+this._modelHomeDir+n).then((function(t){return t.arrayBuffer()})).then((function(r){s=a.loadMotion(r,r.byteLength,null,i);var n=a._modelSetting.getMotionFadeInTimeValue(t,e);if(n>=0){s.setFadeInTime(n)}n=a._modelSetting.getMotionFadeOutTimeValue(t,e);if(n>=0){s.setFadeOutTime(n)}s.setEffectIds(a._eyeBlinkIds,a._lipSyncIds);u=true}))}else{s.setFinishedMotionHandler(i)}var l=this._modelSetting.getMotionSoundFileName(t,e);if(l.localeCompare("")!=0){var c=l;c=this._modelHomeDir+c;this._wavFileHandler.start(c)}if(this._debugMode){b.LAppPal.printMessage("[APP]start motion: ["+t+"_"+e)}return this._motionManager.startMotionPriority(s,u,r)};e.prototype.startRandomMotion=function(t,e,r){if(this._modelSetting.getMotionCount(t)==0){return m.InvalidMotionQueueEntryHandleValue}var i=Math.floor(Math.random()*this._modelSetting.getMotionCount(t));return this.startMotion(t,i,e,r)};e.prototype.setExpression=function(t){var e=this._expressions.getValue(t);if(this._debugMode){b.LAppPal.printMessage("[APP]expression: ["+t+"]")}if(e!=null){this._expressionManager.startMotionPriority(e,false,v.PriorityForce)}else{if(this._debugMode){b.LAppPal.printMessage("[APP]expression["+t+"] is null")}}};e.prototype.setRandomExpression=function(){if(this._expressions.getSize()==0){return}var t=Math.floor(Math.random()*this._expressions.getSize());for(var e=0;e<this._expressions.getSize();e++){if(e==t){var r=this._expressions._keyValues[e].first;this.setExpression(r);return}}};e.prototype.motionEventFired=function(t){_.CubismLogInfo("{0} is fired on LAppModel!!",t.s)};e.prototype.hitTest=function(t,e,r){if(this._opacity<1){return false}var i=this._modelSetting.getHitAreasCount();for(var a=0;a<i;a++){if(this._modelSetting.getHitAreaName(a)==t){var n=this._modelSetting.getHitAreaId(a);return this.isHit(n,e,r)}}return false};e.prototype.preLoadMotionGroup=function(t){var e=this;var r=function(r){var a=i._modelSetting.getMotionFileName(t,r);var n=t+"_"+r;if(i._debugMode){b.LAppPal.printMessage("[APP]load motion: "+a+" => ["+n+"]")}fetch(""+i._modelHomeDir+a).then((function(t){return t.arrayBuffer()})).then((function(i){var a=e.loadMotion(i,i.byteLength,n);var o=e._modelSetting.getMotionFadeInTimeValue(t,r);if(o>=0){a.setFadeInTime(o)}o=e._modelSetting.getMotionFadeOutTimeValue(t,r);if(o>=0){a.setFadeOutTime(o)}a.setEffectIds(e._eyeBlinkIds,e._lipSyncIds);if(e._motions.getValue(n)!=null){d.ACubismMotion.delete(e._motions.getValue(n))}e._motions.setValue(n,a);e._motionCount++;if(e._motionCount>=e._allMotionCount){e._state=S.LoadTexture;e._motionManager.stopAllMotions();e._updating=false;e._initialized=true;e.createRenderer();e.setupTextures();e.getRenderer().startUp(y.gl)}}))};var i=this;for(var a=0;a<this._modelSetting.getMotionCount(t);a++){r(a)}};e.prototype.releaseMotions=function(){this._motions.clear()};e.prototype.releaseExpressions=function(){this._expressions.clear()};e.prototype.doDraw=function(){if(this._model==null)return;var t=[0,0,y.canvas.width,y.canvas.height];this.getRenderer().setRenderState(y.frameBuffer,t);this.getRenderer().drawModel()};e.prototype.draw=function(t){if(this._model==null){return}if(this._state==S.CompleteSetup){t.multiplyByMatrix(this._modelMatrix);this.getRenderer().setMvpMatrix(t);this.doDraw()}};return e}(f.CubismUserModel);e.LAppModel=P},"./src/lapppal.ts":
/*!************************!*\
  !*** ./src/lapppal.ts ***!
  \************************/function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.LAppPal=void 0;var r=function(){function t(){}t.loadFileAsBytes=function(t,e){fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return e(t,t.byteLength)}))};t.getDeltaTime=function(){return this.s_deltaTime};t.updateTime=function(){this.s_currentFrame=Date.now();this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3;this.s_lastFrame=this.s_currentFrame};t.printMessage=function(t){console.log(t)};t.lastUpdate=Date.now();t.s_currentFrame=0;t.s_lastFrame=0;t.s_deltaTime=0;return t}();e.LAppPal=r},"./src/lappsprite.ts":
/*!***************************!*\
  !*** ./src/lappsprite.ts ***!
  \***************************/function(t,e,r){Object.defineProperty(e,"__esModule",{value:true});e.Rect=e.LAppSprite=void 0;var i=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var a=function(){function t(t,e,r,i,a){this._rect=new n;this._rect.left=t-r*.5;this._rect.right=t+r*.5;this._rect.up=e+i*.5;this._rect.down=e-i*.5;this._texture=a;this._vertexBuffer=null;this._uvBuffer=null;this._indexBuffer=null;this._positionLocation=null;this._uvLocation=null;this._textureLocation=null;this._positionArray=null;this._uvArray=null;this._indexArray=null;this._firstDraw=true}t.prototype.release=function(){this._rect=null;i.gl.deleteTexture(this._texture);this._texture=null;i.gl.deleteBuffer(this._uvBuffer);this._uvBuffer=null;i.gl.deleteBuffer(this._vertexBuffer);this._vertexBuffer=null;i.gl.deleteBuffer(this._indexBuffer);this._indexBuffer=null};t.prototype.getTexture=function(){return this._texture};t.prototype.render=function(t){if(this._texture==null){return}if(this._firstDraw){this._positionLocation=i.gl.getAttribLocation(t,"position");i.gl.enableVertexAttribArray(this._positionLocation);this._uvLocation=i.gl.getAttribLocation(t,"uv");i.gl.enableVertexAttribArray(this._uvLocation);this._textureLocation=i.gl.getUniformLocation(t,"texture");i.gl.uniform1i(this._textureLocation,0);{this._uvArray=new Float32Array([1,0,0,0,0,1,1,1]);this._uvBuffer=i.gl.createBuffer()}{var e=i.canvas.width;var r=i.canvas.height;this._positionArray=new Float32Array([(this._rect.right-e*.5)/(e*.5),(this._rect.up-r*.5)/(r*.5),(this._rect.left-e*.5)/(e*.5),(this._rect.up-r*.5)/(r*.5),(this._rect.left-e*.5)/(e*.5),(this._rect.down-r*.5)/(r*.5),(this._rect.right-e*.5)/(e*.5),(this._rect.down-r*.5)/(r*.5)]);this._vertexBuffer=i.gl.createBuffer()}{this._indexArray=new Uint16Array([0,1,2,3,2,0]);this._indexBuffer=i.gl.createBuffer()}this._firstDraw=false}i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._uvBuffer);i.gl.bufferData(i.gl.ARRAY_BUFFER,this._uvArray,i.gl.STATIC_DRAW);i.gl.vertexAttribPointer(this._uvLocation,2,i.gl.FLOAT,false,0,0);i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._vertexBuffer);i.gl.bufferData(i.gl.ARRAY_BUFFER,this._positionArray,i.gl.STATIC_DRAW);i.gl.vertexAttribPointer(this._positionLocation,2,i.gl.FLOAT,false,0,0);i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer);i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,this._indexArray,i.gl.DYNAMIC_DRAW);i.gl.bindTexture(i.gl.TEXTURE_2D,this._texture);i.gl.drawElements(i.gl.TRIANGLES,this._indexArray.length,i.gl.UNSIGNED_SHORT,0)};t.prototype.isHit=function(t,e){var r=i.canvas.height;var a=r-e;return t>=this._rect.left&&t<=this._rect.right&&a<=this._rect.up&&a>=this._rect.down};return t}();e.LAppSprite=a;var n=function(){function t(){}return t}();e.Rect=n},"./src/lapptexturemanager.ts":
/*!***********************************!*\
  !*** ./src/lapptexturemanager.ts ***!
  \***********************************/function(t,e,r){Object.defineProperty(e,"__esModule",{value:true});e.TextureInfo=e.LAppTextureManager=void 0;var i=r(/*! @framework/type/csmvector */"../../../Framework/src/type/csmvector.ts");var a=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var n=function(){function t(){this._textures=new i.csmVector}t.prototype.release=function(){for(var t=this._textures.begin();t.notEqual(this._textures.end());t.preIncrement()){a.gl.deleteTexture(t.ptr().id)}this._textures=null};t.prototype.createTextureFromPngFile=function(t,e,r){var i=this;var n=function(i){if(i.ptr().fileName==t&&i.ptr().usePremultply==e){i.ptr().img=new Image;i.ptr().img.onload=function(){return r(i.ptr())};i.ptr().img.src=t;return{value:void 0}}};for(var s=this._textures.begin();s.notEqual(this._textures.end());s.preIncrement()){var u=n(s);if(typeof u==="object")return u.value}var l=new Image;l.onload=function(){var n=a.gl.createTexture();a.gl.bindTexture(a.gl.TEXTURE_2D,n);a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,a.gl.LINEAR_MIPMAP_LINEAR);a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,a.gl.LINEAR);if(e){a.gl.pixelStorei(a.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)}a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA,a.gl.RGBA,a.gl.UNSIGNED_BYTE,l);a.gl.generateMipmap(a.gl.TEXTURE_2D);a.gl.bindTexture(a.gl.TEXTURE_2D,null);var s=new o;if(s!=null){s.fileName=t;s.width=l.width;s.height=l.height;s.id=n;s.img=l;s.usePremultply=e;i._textures.pushBack(s)}r(s)};l.src=t};t.prototype.releaseTextures=function(){for(var t=0;t<this._textures.getSize();t++){this._textures.set(t,null)}this._textures.clear()};t.prototype.releaseTextureByTexture=function(t){for(var e=0;e<this._textures.getSize();e++){if(this._textures.at(e).id!=t){continue}this._textures.set(e,null);this._textures.remove(e);break}};t.prototype.releaseTextureByFilePath=function(t){for(var e=0;e<this._textures.getSize();e++){if(this._textures.at(e).fileName==t){this._textures.set(e,null);this._textures.remove(e);break}}};return t}();e.LAppTextureManager=n;var o=function(){function t(){this.id=null;this.width=0;this.height=0}return t}();e.TextureInfo=o},"./src/lappview.ts":
/*!*************************!*\
  !*** ./src/lappview.ts ***!
  \*************************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.LAppView=void 0;var o=r(/*! @framework/math/cubismmatrix44 */"../../../Framework/src/math/cubismmatrix44.ts");var s=r(/*! @framework/math/cubismviewmatrix */"../../../Framework/src/math/cubismviewmatrix.ts");var u=n(r(/*! ./lappdefine */"./src/lappdefine.ts"));var l=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var c=r(/*! ./lapplive2dmanager */"./src/lapplive2dmanager.ts");var h=r(/*! ./lapppal */"./src/lapppal.ts");var f=r(/*! ./lappsprite */"./src/lappsprite.ts");var d=r(/*! ./touchmanager */"./src/touchmanager.ts");var m=function(){function t(){this._programId=null;this._back=null;this._gear=null;this._touchManager=new d.TouchManager;this._deviceToScreen=new o.CubismMatrix44;this._viewMatrix=new s.CubismViewMatrix}t.prototype.initialize=function(){var t=l.canvas.width,e=l.canvas.height;var r=t/e;var i=-r;var a=r;var n=u.ViewLogicalLeft;var o=u.ViewLogicalRight;this._viewMatrix.setScreenRect(i,a,n,o);this._viewMatrix.scale(u.ViewScale,u.ViewScale);this._deviceToScreen.loadIdentity();if(t>e){var s=Math.abs(a-i);this._deviceToScreen.scaleRelative(s/t,-s/t)}else{var c=Math.abs(o-n);this._deviceToScreen.scaleRelative(c/e,-c/e)}this._deviceToScreen.translateRelative(-t*.5,-e*.5);this._viewMatrix.setMaxScale(u.ViewMaxScale);this._viewMatrix.setMinScale(u.ViewMinScale);this._viewMatrix.setMaxScreenRect(u.ViewLogicalMaxLeft,u.ViewLogicalMaxRight,u.ViewLogicalMaxBottom,u.ViewLogicalMaxTop)};t.prototype.release=function(){this._viewMatrix=null;this._touchManager=null;this._deviceToScreen=null;this._gear.release();this._gear=null;this._back.release();this._back=null;l.gl.deleteProgram(this._programId);this._programId=null};t.prototype.render=function(){l.gl.useProgram(this._programId);if(this._back){this._back.render(this._programId)}if(this._gear){this._gear.render(this._programId)}l.gl.flush();var t=c.LAppLive2DManager.getInstance();t.setViewMatrix(this._viewMatrix);t.onUpdate()};t.prototype.initializeSprite=function(){var t=this;var e=l.canvas.width;var r=l.canvas.height;var i=l.LAppDelegate.getInstance().getTextureManager();var a=u.ResourcesPath;var n="";n=u.BackImageName;var o=function(i){var a=e*.5;var n=r*.5;var o=i.width*2;var s=r*.95;t._back=new f.LAppSprite(a,n,o,s,i.id)};i.createTextureFromPngFile(a+n,false,o);n=u.GearImageName;var s=function(i){var a=e-i.width*.5;var n=r-i.height*.5;var o=i.width;var s=i.height;t._gear=new f.LAppSprite(a,n,o,s,i.id)};i.createTextureFromPngFile(a+n,false,s);if(this._programId==null){this._programId=l.LAppDelegate.getInstance().createShader()}};t.prototype.onTouchesBegan=function(t,e){this._touchManager.touchesBegan(t,e)};t.prototype.onTouchesMoved=function(t,e){var r=this.transformViewX(this._touchManager.getX());var i=this.transformViewY(this._touchManager.getY());this._touchManager.touchesMoved(t,e);var a=c.LAppLive2DManager.getInstance();a.onDrag(r,i)};t.prototype.onTouchesEnded=function(t,e){var r=c.LAppLive2DManager.getInstance();r.onDrag(0,0);{var i=this._deviceToScreen.transformX(this._touchManager.getX());var a=this._deviceToScreen.transformY(this._touchManager.getY());if(u.DebugTouchLogEnable){h.LAppPal.printMessage("[APP]touchesEnded x: "+i+" y: "+a)}r.onTap(i,a);if(this._gear.isHit(t,e)){r.nextScene()}}};t.prototype.transformViewX=function(t){var e=this._deviceToScreen.transformX(t);return this._viewMatrix.invertTransformX(e)};t.prototype.transformViewY=function(t){var e=this._deviceToScreen.transformY(t);return this._viewMatrix.invertTransformY(e)};t.prototype.transformScreenX=function(t){return this._deviceToScreen.transformX(t)};t.prototype.transformScreenY=function(t){return this._deviceToScreen.transformY(t)};return t}();e.LAppView=m},"./src/lappwavfilehandler.ts":
/*!***********************************!*\
  !*** ./src/lappwavfilehandler.ts ***!
  \***********************************/function(t,e){var r=this&&this.__awaiter||function(t,e,r,i){function a(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,n){function o(t){try{u(i.next(t))}catch(t){n(t)}}function s(t){try{u(i["throw"](t))}catch(t){n(t)}}function u(t){t.done?r(t.value):a(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))};var i=this&&this.__generator||function(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(i)throw new TypeError("Generator is already executing.");while(r)try{if(i=1,a&&(n=o[0]&2?a["return"]:o[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;if(a=0,n)o=[o[0]&2,n.value];switch(o[0]){case 0:case 1:n=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;a=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(n=r.trys,n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(o[0]===6&&r.label<n[1]){r.label=n[1];n=o;break}if(n&&r.label<n[2]){r.label=n[2];r.ops.push(o);break}if(n[2])r.ops.pop();r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t];a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};Object.defineProperty(e,"__esModule",{value:true});e.ByteReader=e.WavFileInfo=e.LAppWavFileHandler=e.s_instance=void 0;e.s_instance=null;var a=function(){function t(){var t=this;this._loadFiletoBytes=function(e,r){t._byteReader._fileByte=e;t._byteReader._fileDataView=new DataView(t._byteReader._fileByte);t._byteReader._fileSize=r};this._pcmData=null;this._userTimeSeconds=0;this._lastRms=0;this._sampleOffset=0;this._wavFileInfo=new n;this._byteReader=new o}t.getInstance=function(){if(e.s_instance==null){e.s_instance=new t}return e.s_instance};t.releaseInstance=function(){if(e.s_instance!=null){e.s_instance=void 0}e.s_instance=null};t.prototype.update=function(t){var e;var r;if(this._pcmData==null||this._sampleOffset>=this._wavFileInfo._samplesPerChannel){this._lastRms=0;return false}this._userTimeSeconds+=t;e=Math.floor(this._userTimeSeconds*this._wavFileInfo._samplingRate);if(e>this._wavFileInfo._samplesPerChannel){e=this._wavFileInfo._samplesPerChannel}r=0;for(var i=0;i<this._wavFileInfo._numberOfChannels;i++){for(var a=this._sampleOffset;a<e;a++){var n=this._pcmData[i][a];r+=n*n}}r=Math.sqrt(r/(this._wavFileInfo._numberOfChannels*(e-this._sampleOffset)));this._lastRms=r;this._sampleOffset=e;return true};t.prototype.start=function(t){this._sampleOffset=0;this._userTimeSeconds=0;this._lastRms=0;if(!this.loadWavFile(t)){return}};t.prototype.getRms=function(){return this._lastRms};t.prototype.loadWavFile=function(t){var e=this;var a=false;if(this._pcmData!=null){this.releasePcmData()}var n=function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){return[2,fetch(t).then((function(t){return t.arrayBuffer()}))]}))}))};var o=function(){return r(e,void 0,void 0,(function(){var e,r,o,s,u,s;return i(this,(function(i){switch(i.label){case 0:e=this._byteReader;return[4,n()];case 1:e._fileByte=i.sent();this._byteReader._fileDataView=new DataView(this._byteReader._fileByte);this._byteReader._fileSize=this._byteReader._fileByte.byteLength;this._byteReader._readOffset=0;if(this._byteReader._fileByte==null||this._byteReader._fileSize<4){return[2,false]}this._wavFileInfo._fileName=t;try{if(!this._byteReader.getCheckSignature("RIFF")){a=false;throw new Error('Cannot find Signeture "RIFF".')}this._byteReader.get32LittleEndian();if(!this._byteReader.getCheckSignature("WAVE")){a=false;throw new Error('Cannot find Signeture "WAVE".')}if(!this._byteReader.getCheckSignature("fmt ")){a=false;throw new Error('Cannot find Signeture "fmt".')}r=this._byteReader.get32LittleEndian();if(this._byteReader.get16LittleEndian()!=1){a=false;throw new Error("File is not linear PCM.")}this._wavFileInfo._numberOfChannels=this._byteReader.get16LittleEndian();this._wavFileInfo._samplingRate=this._byteReader.get32LittleEndian();this._byteReader.get32LittleEndian();this._byteReader.get16LittleEndian();this._wavFileInfo._bitsPerSample=this._byteReader.get16LittleEndian();if(r>16){this._byteReader._readOffset+=r-16}while(!this._byteReader.getCheckSignature("data")&&this._byteReader._readOffset<this._byteReader._fileSize){this._byteReader._readOffset+=this._byteReader.get32LittleEndian()+4}if(this._byteReader._readOffset>=this._byteReader._fileSize){a=false;throw new Error('Cannot find "data" Chunk.')}{o=this._byteReader.get32LittleEndian();this._wavFileInfo._samplesPerChannel=o*8/(this._wavFileInfo._bitsPerSample*this._wavFileInfo._numberOfChannels)}this._pcmData=new Array(this._wavFileInfo._numberOfChannels);for(s=0;s<this._wavFileInfo._numberOfChannels;s++){this._pcmData[s]=new Float32Array(this._wavFileInfo._samplesPerChannel)}for(u=0;u<this._wavFileInfo._samplesPerChannel;u++){for(s=0;s<this._wavFileInfo._numberOfChannels;s++){this._pcmData[s][u]=this.getPcmSample()}}a=true}catch(t){console.log(t)}return[2]}}))}))}();return a};t.prototype.getPcmSample=function(){var t;switch(this._wavFileInfo._bitsPerSample){case 8:t=this._byteReader.get8()-128;t<<=24;break;case 16:t=this._byteReader.get16LittleEndian()<<16;break;case 24:t=this._byteReader.get24LittleEndian()<<8;break;default:t=0;break}return t/2147483647};t.prototype.releasePcmData=function(){for(var t=0;t<this._wavFileInfo._numberOfChannels;t++){delete this._pcmData[t]}delete this._pcmData;this._pcmData=null};return t}();e.LAppWavFileHandler=a;var n=function(){function t(){this._fileName="";this._numberOfChannels=0;this._bitsPerSample=0;this._samplingRate=0;this._samplesPerChannel=0}return t}();e.WavFileInfo=n;var o=function(){function t(){this._fileByte=null;this._fileDataView=null;this._fileSize=0;this._readOffset=0}t.prototype.get8=function(){var t=this._fileDataView.getUint8(this._readOffset);this._readOffset++;return t};t.prototype.get16LittleEndian=function(){var t=this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);this._readOffset+=2;return t};t.prototype.get24LittleEndian=function(){var t=this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);this._readOffset+=3;return t};t.prototype.get32LittleEndian=function(){var t=this._fileDataView.getUint8(this._readOffset+3)<<24|this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);this._readOffset+=4;return t};t.prototype.getCheckSignature=function(t){var e=new Uint8Array(4);var r=(new TextEncoder).encode(t);if(t.length!=4){return false}for(var i=0;i<4;i++){e[i]=this.get8()}return e[0]==r[0]&&e[1]==r[1]&&e[2]==r[2]&&e[3]==r[3]};return t}();e.ByteReader=o},"./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){if(i===undefined)i=r;Object.defineProperty(t,i,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,i){if(i===undefined)i=r;t[i]=e[r]});var a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))i(e,t,r);a(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});var o=r(/*! ./lappdelegate */"./src/lappdelegate.ts");var s=n(r(/*! ./lappdefine */"./src/lappdefine.ts"));window.onload=function(){if(o.LAppDelegate.getInstance().initialize()==false){return}o.LAppDelegate.getInstance().run()};window.onbeforeunload=function(){return o.LAppDelegate.releaseInstance()};window.onresize=function(){if(s.CanvasSize==="auto"){o.LAppDelegate.getInstance().onResize()}}},"./src/touchmanager.ts":
/*!*****************************!*\
  !*** ./src/touchmanager.ts ***!
  \*****************************/function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.TouchManager=void 0;var r=function(){function t(){this._startX=0;this._startY=0;this._lastX=0;this._lastY=0;this._lastX1=0;this._lastY1=0;this._lastX2=0;this._lastY2=0;this._lastTouchDistance=0;this._deltaX=0;this._deltaY=0;this._scale=1;this._touchSingle=false;this._flipAvailable=false}t.prototype.getCenterX=function(){return this._lastX};t.prototype.getCenterY=function(){return this._lastY};t.prototype.getDeltaX=function(){return this._deltaX};t.prototype.getDeltaY=function(){return this._deltaY};t.prototype.getStartX=function(){return this._startX};t.prototype.getStartY=function(){return this._startY};t.prototype.getScale=function(){return this._scale};t.prototype.getX=function(){return this._lastX};t.prototype.getY=function(){return this._lastY};t.prototype.getX1=function(){return this._lastX1};t.prototype.getY1=function(){return this._lastY1};t.prototype.getX2=function(){return this._lastX2};t.prototype.getY2=function(){return this._lastY2};t.prototype.isSingleTouch=function(){return this._touchSingle};t.prototype.isFlickAvailable=function(){return this._flipAvailable};t.prototype.disableFlick=function(){this._flipAvailable=false};t.prototype.touchesBegan=function(t,e){this._lastX=t;this._lastY=e;this._startX=t;this._startY=e;this._lastTouchDistance=-1;this._flipAvailable=true;this._touchSingle=true};t.prototype.touchesMoved=function(t,e){this._lastX=t;this._lastY=e;this._lastTouchDistance=-1;this._touchSingle=true};t.prototype.getFlickDistance=function(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)};t.prototype.calculateDistance=function(t,e,r,i){return Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))};t.prototype.calculateMovingAmount=function(t,e){if(t>0!=e>0){return 0}var r=t>0?1:-1;var i=Math.abs(t);var a=Math.abs(e);return r*(i<a?i:a)};return t}();e.TouchManager=r},"./node_modules/whatwg-fetch/fetch.js":
/*!********************************************!*\
  !*** ./node_modules/whatwg-fetch/fetch.js ***!
  \********************************************/function(t,e,r){r.r(e);r.d(e,{Headers:function(){return h},Request:function(){return C},Response:function(){return M},DOMException:function(){return x},fetch:function(){return B}});var i=typeof globalThis!=="undefined"&&globalThis||typeof self!=="undefined"&&self||typeof i!=="undefined"&&i;var a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(a.arrayBuffer){var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var s=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1}}function u(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t===""){throw new TypeError('Invalid character in header field name: "'+t+'"')}return t.toLowerCase()}function l(t){if(typeof t!=="string"){t=String(t)}return t}function c(t){var e={next:function(){var e=t.shift();return{done:e===undefined,value:e}}};if(a.iterable){e[Symbol.iterator]=function(){return e}}return e}function h(t){this.map={};if(t instanceof h){t.forEach((function(t,e){this.append(e,t)}),this)}else if(Array.isArray(t)){t.forEach((function(t){this.append(t[0],t[1])}),this)}else if(t){Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}}h.prototype.append=function(t,e){t=u(t);e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e};h.prototype["delete"]=function(t){delete this.map[u(t)]};h.prototype.get=function(t){t=u(t);return this.has(t)?this.map[t]:null};h.prototype.has=function(t){return this.map.hasOwnProperty(u(t))};h.prototype.set=function(t,e){this.map[u(t)]=l(e)};h.prototype.forEach=function(t,e){for(var r in this.map){if(this.map.hasOwnProperty(r)){t.call(e,this.map[r],r,this)}}};h.prototype.keys=function(){var t=[];this.forEach((function(e,r){t.push(r)}));return c(t)};h.prototype.values=function(){var t=[];this.forEach((function(e){t.push(e)}));return c(t)};h.prototype.entries=function(){var t=[];this.forEach((function(e,r){t.push([r,e])}));return c(t)};if(a.iterable){h.prototype[Symbol.iterator]=h.prototype.entries}function f(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function d(t){return new Promise((function(e,r){t.onload=function(){e(t.result)};t.onerror=function(){r(t.error)}}))}function m(t){var e=new FileReader;var r=d(e);e.readAsArrayBuffer(t);return r}function p(t){var e=new FileReader;var r=d(e);e.readAsText(t);return r}function g(t){var e=new Uint8Array(t);var r=new Array(e.length);for(var i=0;i<e.length;i++){r[i]=String.fromCharCode(e[i])}return r.join("")}function _(t){if(t.slice){return t.slice(0)}else{var e=new Uint8Array(t.byteLength);e.set(new Uint8Array(t));return e.buffer}}function v(){this.bodyUsed=false;this._initBody=function(t){this.bodyUsed=this.bodyUsed;this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(a.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(a.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(a.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(a.arrayBuffer&&a.blob&&n(t)){this._bodyArrayBuffer=_(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))){this._bodyArrayBuffer=_(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(a.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(a.blob){this.blob=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=f(this);if(t){return t}if(ArrayBuffer.isView(this._bodyArrayBuffer)){return Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength))}else{return Promise.resolve(this._bodyArrayBuffer)}}else{return this.blob().then(m)}}}this.text=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return p(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(g(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(a.formData){this.formData=function(){return this.text().then(S)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function C(t,e){if(!(this instanceof C)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}e=e||{};var r=e.body;if(t instanceof C){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new h(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!r&&t._bodyInit!=null){r=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=e.credentials||this.credentials||"same-origin";if(e.headers||!this.headers){this.headers=new h(e.headers)}this.method=b(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.signal=e.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r);if(this.method==="GET"||this.method==="HEAD"){if(e.cache==="no-store"||e.cache==="no-cache"){var i=/([?&])_=[^&]*/;if(i.test(this.url)){this.url=this.url.replace(i,"$1_="+(new Date).getTime())}else{var a=/\?/;this.url+=(a.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function S(t){var e=new FormData;t.trim().split("&").forEach((function(t){if(t){var r=t.split("=");var i=r.shift().replace(/\+/g," ");var a=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(a))}}));return e}function P(t){var e=new h;var r=t.replace(/\r?\n[\t ]+/g," ");r.split("\r").map((function(t){return t.indexOf("\n")===0?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":");var i=r.shift().trim();if(i){var a=r.join(":").trim();e.append(i,a)}}));return e}v.call(C.prototype);function M(t,e){if(!(this instanceof M)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}if(!e){e={}}this.type="default";this.status=e.status===undefined?200:e.status;this.ok=this.status>=200&&this.status<300;this.statusText=e.statusText===undefined?"":""+e.statusText;this.headers=new h(e.headers);this.url=e.url||"";this._initBody(t)}v.call(M.prototype);M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})};M.error=function(){var t=new M(null,{status:0,statusText:""});t.type="error";return t};var w=[301,302,303,307,308];M.redirect=function(t,e){if(w.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new M(null,{status:e,headers:{location:t}})};var x=i.DOMException;try{new x}catch(t){x=function(t,e){this.message=t;this.name=e;var r=Error(t);this.stack=r.stack};x.prototype=Object.create(Error.prototype);x.prototype.constructor=x}function B(t,e){return new Promise((function(r,n){var o=new C(t,e);if(o.signal&&o.signal.aborted){return n(new x("Aborted","AbortError"))}var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:P(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;setTimeout((function(){r(new M(e,t))}),0)};s.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)};s.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)};s.onabort=function(){setTimeout((function(){n(new x("Aborted","AbortError"))}),0)};function c(t){try{return t===""&&i.location.href?i.location.href:t}catch(e){return t}}s.open(o.method,c(o.url),true);if(o.credentials==="include"){s.withCredentials=true}else if(o.credentials==="omit"){s.withCredentials=false}if("responseType"in s){if(a.blob){s.responseType="blob"}else if(a.arrayBuffer&&o.headers.get("Content-Type")&&o.headers.get("Content-Type").indexOf("application/octet-stream")!==-1){s.responseType="arraybuffer"}}if(e&&typeof e.headers==="object"&&!(e.headers instanceof h)){Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,l(e.headers[t]))}))}else{o.headers.forEach((function(t,e){s.setRequestHeader(e,t)}))}if(o.signal){o.signal.addEventListener("abort",u);s.onreadystatechange=function(){if(s.readyState===4){o.signal.removeEventListener("abort",u)}}}s.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)}))}B.polyfill=true;if(!i.fetch){i.fetch=B;i.Headers=h;i.Request=C;i.Response=M}}};var e={};function r(i){if(e[i]){return e[i].exports}var a=e[i]={exports:{}};t[i].call(a.exports,a,a.exports,r);return a.exports}!function(){r.d=function(t,e){for(var i in e){if(r.o(e,i)&&!r.o(t,i)){Object.defineProperty(t,i,{enumerable:true,get:e[i]})}}}}();!function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}();!function(){r.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})}}();var i=r("./src/main.ts")})();